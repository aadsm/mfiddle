var Montage=require("montage").Montage,Template=require("montage/core/template").Template,Promise=require("montage/core/promise").Promise,gist=require("gist").gist,Fiddle=exports.Fiddle=Montage.specialize({constructor:{value:function Fiddle(){this.super()}},id:{value:null},css:{value:null},serialization:{value:null},html:{value:null},settings:{value:null},init:{value:function(e,t,i,l){var a,o,n;return e||(e={version:1}),i&&(n=new Template,a=n.createHtmlDocumentWithHtml(i),o=n.getInlineObjectsString(a),i=a.body.innerHTML,o=o.replace(/\n    /g,"\n"),i=i.replace(/\n    /g,"\n").replace(/^\s*\n|\n\s*$/g,"")),this.settings=e,this.css=t,this.serialization=o,this.html=i,this.javascript=l,this}}},{fromId:{value:function(e){var t=Promise.defer();return gist.load(e,null,function(i,l,a,o){var n;n=(new Fiddle).init(i,l,a,o),n.id=e,t.resolve(n)}),t.promise}}});