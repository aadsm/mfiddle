var CodeMirror=exports.CodeMirror=function(){function e(o,u){function v(e){return e>=0&&$n.size>e}function x(e){return d($n,e)}function T(e,t){si=!0;for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function z(e){var t={line:0,ch:0};lt(t,{line:$n.size-1,ch:x($n.size-1).text.length},J(e),t,t),ni=!0}function I(){var e=[];return $n.iter(0,$n.size,function(t){e.push(t.text)}),e.join("\n")}function U(e){function t(e){var n=gn(e,!0);if(n&&!L(n,l)){Yn||rt(),l=n,Nt(i,n),ni=!1;var r=St();(n.line>=r.to||n.line<r.from)&&(o=setTimeout(zn(function(){t(e)}),150))}}Lt(e.shiftKey);for(var n=w(e);n!=Dn;n=n.parentNode)if(n.parentNode==_n&&n!=jn)return;for(var n=w(e);n!=Dn;n=n.parentNode)if(n.parentNode==Un)return En.onGutterClick&&En.onGutterClick(wi,H(Un.childNodes,n)+mi,e),b(e);var i=gn(e);switch(C(e)){case 3:return P&&!j&&vn(e),void 0;case 2:return i&&Ot(i.line,i.ch,!0),void 0}if(!i)return w(e)==Hn&&b(e),void 0;Yn||rt();var r=+new Date;if(ei&&ei.time>r-400&&L(ei.pos,i))return b(e),setTimeout(xt,20),Rt(i.line);if(Qn&&Qn.time>r-400&&L(Qn.pos,i))return ei={time:r,pos:i},b(e),Vt(i);Qn={time:r,pos:i};var o,l=i;if(q&&!L(di.from,di.to)&&!N(i,di.from)&&!N(di.to,i)){F&&(Bn.draggable=!0);var a=S(Nn,"mouseup",zn(function(t){F&&(Bn.draggable=!1),ti=!1,a(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(b(t),Ot(i.line,i.ch,!0),xt())}),!0);return ti=!0,void 0}b(e),Ot(i.line,i.ch,!0);var s=S(Nn,"mousemove",zn(function(e){clearTimeout(o),b(e),t(e)}),!0),a=S(Nn,"mouseup",zn(function(e){clearTimeout(o);var t=gn(e);t&&Nt(i,t),b(e),xt(),ni=!0,s(),a()}),!0)}function G(e){for(var t=w(e);t!=Dn;t=t.parentNode)if(t.parentNode==Un)return b(e);var n=gn(e);n&&(ei={time:+new Date,pos:n},b(e),Vt(n))}function Z(e){function t(e,t){var i=new FileReader;i.onload=function(){o[t]=i.result,++l==r&&(n=_t(n),zn(function(){var e=ht(o.join(""),n,n);Nt(n,e)})())},i.readAsText(e)}e.preventDefault();var n=gn(e,!0),i=e.dataTransfer.files;if(n&&!En.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),l=0,a=0;r>a;++a)t(i[a],a);else try{var o=e.dataTransfer.getData("Text");if(o){var s=ht(o,n,n),u=di.from,c=di.to;Nt(n,s),ti&&ht("",u,c),xt()}}catch(e){}}function Q(e){var t=mt();W(t),e.dataTransfer.setDragImage(Y,0,0),e.dataTransfer.setData("Text",t)}function et(e){var i,r,o=$[e.keyCode],l=R[En.keyMap].auto;if(null==o||e.altGraphKey)return l&&(En.keyMap=l),null;if(e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Cmd-"+o),e.shiftKey&&(i=t("Shift-"+o,En.extraKeys,En.keyMap))?r=!0:i=t(o,En.extraKeys,En.keyMap),"string"==typeof i&&(i=V.propertyIsEnumerable(i)?V[i]:null),l&&(i||!n(e))&&(En.keyMap=l),!i)return!1;if(r){var a=Zn;Zn=null,i(wi),Zn=a}else i(wi);return b(e),!0}function tt(e){Yn||rt();var t=e.keyCode;if(K&&27==t&&(e.returnValue=!1),Lt(16==t||e.shiftKey),!En.onKeyEvent||!En.onKeyEvent(wi,y(e))){var n=et(e);window.opera&&(Ci=n?e.keyCode:null,!n&&(j?e.metaKey:e.ctrlKey)&&88==e.keyCode&&dt(""))}}function nt(e){if(window.opera&&e.keyCode==Ci)return Ci=null,b(e),void 0;if(!(En.onKeyEvent&&En.onKeyEvent(wi,y(e))||window.opera&&!e.which&&et(e))){if(En.electricChars&&Fn.electricChars){var t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);Fn.electricChars.indexOf(t)>-1&&setTimeout(zn(function(){Pt(di.to.line,"smart")}),75)}vt()}}function it(e){En.onKeyEvent&&En.onKeyEvent(wi,y(e))||16==e.keyCode&&(Zn=null)}function rt(){En.readOnly||(Yn||(En.onFocus&&En.onFocus(wi),Yn=!0,-1==Dn.className.search(/\bCodeMirror-focused\b/)&&(Dn.className+=" CodeMirror-focused"),ai||bt(!0)),gt(),yn())}function ot(){Yn&&(En.onBlur&&En.onBlur(wi),Yn=!1,Dn.className=Dn.className.replace(" CodeMirror-focused","")),clearInterval(Kn),setTimeout(function(){Yn||(Zn=null)},150)}function lt(e,t,n,i,r){if(xi){var o=[];for($n.iter(e.line,t.line+1,function(e){o.push(e.text)}),xi.addChange(e.line,n.length,o);xi.done.length>En.undoDepth;)xi.done.shift()}ct(e,t,n,i,r)}function at(e,t){var n=e.pop();if(n){var i=[],r=n.start+n.added;$n.iter(n.start,r,function(e){i.push(e.text)}),t.push({start:n.start,added:n.old.length,old:i});var o=_t({line:n.start+n.old.length-1,ch:O(i[i.length-1],n.old[n.old.length-1])});ct({line:n.start,ch:0},{line:r-1,ch:x(r-1).text.length},n.old,o,o),ni=!0}}function st(){at(xi.done,xi.undone)}function ut(){at(xi.undone,xi.done)}function ct(e,t,n,i,r){function o(e){return Math.min(t.line,t.line+y)>=e?e:e+y}var l=!1,a=yi.length;En.lineWrapping||$n.iter(e.line,t.line,function(e){return e.text.length==a?(l=!0,!0):void 0}),(e.line!=t.line||n.length>1)&&(si=!0);var u=t.line-e.line,c=x(e.line),h=x(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var d=[],f=null;e.line?(f=x(e.line-1),f.fixMarkEnds(h)):h.fixMarkStarts();for(var p=0,m=n.length-1;m>p;++p)d.push(s.inheritMarks(n[p],f));u&&$n.remove(e.line,u,ui),d.length&&$n.insert(e.line,d)}else if(c==h)if(1==n.length)c.replace(e.ch,t.ch,n[0]);else{h=c.split(t.ch,n[n.length-1]),c.replace(e.ch,null,n[0]),c.fixMarkEnds(h);for(var d=[],p=1,m=n.length-1;m>p;++p)d.push(s.inheritMarks(n[p],c));d.push(h),$n.insert(e.line+1,d)}else if(1==n.length)c.replace(e.ch,null,n[0]),h.replace(null,t.ch,""),c.append(h),$n.remove(e.line+1,u,ui);else{var d=[];c.replace(e.ch,null,n[0]),h.replace(null,t.ch,n[n.length-1]),c.fixMarkEnds(h);for(var p=1,m=n.length-1;m>p;++p)d.push(s.inheritMarks(n[p],c));u>1&&$n.remove(e.line+1,u-1,ui),$n.insert(e.line+1,d)}if(En.lineWrapping){var g=Hn.clientWidth/fn()-3;$n.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/g)||1;t!=e.height&&T(e,t)}})}else $n.iter(e.line,p+n.length,function(e){var t=e.text;t.length>a&&(yi=t,a=t.length,hi=null,l=!1)}),l&&(a=0,yi="",hi=null,$n.iter(0,$n.size,function(e){var t=e.text;t.length>a&&(a=t.length,yi=t)}));for(var v=[],y=n.length-u-1,p=0,b=Gn.length;b>p;++p){var k=Gn[p];e.line>k?v.push(k):k>t.line&&v.push(k+y)}var w=e.line+Math.min(n.length,500);wn(e.line,w),v.push(w),Gn=v,Sn(100),ri.push({from:e.line,to:t.line+1,diff:y});var C={from:e,to:t,text:n};if(oi){for(var S=oi;S.next;S=S.next);S.next=C}else oi=C;Dt(i,r,o(di.from.line),o(di.to.line)),_n.style.height=$n.height*dn()+2*pn()+"px"}function ht(e,t,n){function i(i){if(N(i,t))return i;if(!N(n,i))return r;var o=i.line+e.length-(n.line-t.line)-1,l=i.ch;return i.line==n.line&&(l+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:o,ch:l}}t=_t(t),n=n?_t(n):t,e=J(e);var r;return ft(e,t,n,function(e){return r=e,{from:i(di.from),to:i(di.to)}}),r}function dt(e,t){ft(J(e),di.from,di.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:di.from,to:di.from}:{from:di.from,to:e}})}function ft(e,t,n,i){var r=1==e.length?e[0].length+t.ch:e[e.length-1].length,o=i({line:t.line+e.length-1,ch:r});lt(t,n,e,o.from,o.to)}function pt(e,t){var n=e.line,i=t.line;if(n==i)return x(n).text.slice(e.ch,t.ch);var r=[x(n).text.slice(e.ch)];return $n.iter(n+1,i,function(e){r.push(e.text)}),r.push(x(i).text.slice(0,t.ch)),r.join("\n")}function mt(){return pt(di.from,di.to)}function gt(){Si||Jn.set(En.pollInterval,function(){Mn(),yt(),Yn&&gt(),Tn()})}function vt(){function e(){Mn();var n=yt();n||t?(Si=!1,gt()):(t=!0,Jn.set(60,e)),Tn()}var t=!1;Si=!0,Jn.set(20,e)}function yt(){if(ai||!Yn||X(On))return!1;var e=On.value;if(e==Mi)return!1;Zn=null;for(var t=0,n=Math.min(Mi.length,e.length);n>t&&Mi[t]==e[t];)++t;return Mi.length>t?di.from={line:di.from.line,ch:di.from.ch-(Mi.length-t)}:fi&&L(di.from,di.to)&&(di.to={line:di.to.line,ch:Math.min(x(di.to.line).text.length,di.to.ch+(e.length-t))}),dt(e.slice(t),"end"),Mi=e,!0}function bt(e){L(di.from,di.to)?e&&(Mi=On.value=""):(Mi="",On.value=mt(),On.select())}function xt(){En.readOnly||On.focus()}function kt(){if(Rn.getBoundingClientRect){var e=Rn.getBoundingClientRect();if(!K||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&Rn.scrollIntoView()}}}function wt(){var e=un(di.inverted?di.from:di.to),t=En.lineWrapping?Math.min(e.x,Bn.offsetWidth):e.x;return Ct(t,e.y,t,e.yBot)}function Ct(e,t,n,i){var r=mn(),o=pn(),l=dn();t+=o,i+=o,e+=r,n+=r;var a=Hn.clientHeight,s=Hn.scrollTop,u=!1,c=!0;s>t?(Hn.scrollTop=Math.max(0,t-2*l),u=!0):i>s+a&&(Hn.scrollTop=i+l-a,u=!0);var h=Hn.clientWidth,d=Hn.scrollLeft,f=En.fixedGutter?In.clientWidth:0;return d+f>e?(50>e&&(e=0),Hn.scrollLeft=Math.max(0,e-10-f),u=!0):n>h+d-3&&(Hn.scrollLeft=n+10-h,u=!0,n>_n.clientWidth&&(c=!1)),u&&En.onScroll&&En.onScroll(wi),c}function St(){var e=dn(),t=Hn.scrollTop-pn(),n=Math.max(0,Math.floor(t/e)),i=Math.ceil((t+Hn.clientHeight)/e);return{from:p($n,n),to:p($n,i)}}function Mt(e,t){if(!Hn.clientWidth)return mi=gi=pi=0,void 0;var n=St();if(!(e!==!0&&0==e.length&&n.from>=mi&&gi>=n.to)){var i=Math.max(n.from-100,0),r=Math.min($n.size,n.to+100);i>mi&&20>i-mi&&(i=mi),gi>r&&20>gi-r&&(r=Math.min($n.size,gi));for(var o=e===!0?[]:Tt([{from:mi,to:gi,domStart:0}],e),l=0,a=0;o.length>a;++a){var s=o[a];i>s.from&&(s.domStart+=i-s.from,s.from=i),s.to>r&&(s.to=r),s.from>=s.to?o.splice(a--,1):l+=s.to-s.from}if(l!=r-i){o.sort(function(e,t){return e.domStart-t.domStart});var u=dn(),c=In.style.display;qn.style.display=In.style.display="none",zt(i,r,o),qn.style.display="";var h=i!=mi||r!=gi||vi!=Hn.clientHeight+u;if(h&&(vi=Hn.clientHeight+u),mi=i,gi=r,pi=m($n,i),jn.style.top=pi*u+"px",_n.style.height=$n.height*u+2*pn()+"px",qn.childNodes.length!=gi-mi)throw Error("BAD PATCH! "+JSON.stringify(o)+" size="+(gi-mi)+" nodes="+qn.childNodes.length);if(En.lineWrapping){hi=Hn.clientWidth;var d=qn.firstChild;$n.iter(mi,gi,function(e){if(!e.hidden){var t=Math.round(d.offsetHeight/u)||1;e.height!=t&&(T(e,t),si=!0)}d=d.nextSibling})}else null==hi&&(hi=an(yi)),hi>Hn.clientWidth?(Bn.style.width=hi+"px",_n.style.width="",_n.style.width=Hn.scrollWidth+"px"):Bn.style.width=_n.style.width="";return In.style.display=c,(h||si)&&Et(),At(),!t&&En.onUpdate&&En.onUpdate(wi),!0}}}function Tt(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],o=[],l=r.diff||0,a=0,s=e.length;s>a;++a){var u=e[a];r.to<=u.from&&r.diff?o.push({from:u.from+l,to:u.to+l,domStart:u.domStart}):r.to<=u.from||r.from>=u.to?o.push(u):(r.from>u.from&&o.push({from:u.from,to:r.from,domStart:u.domStart}),r.to<u.to&&o.push({from:r.to+l,to:u.to+l,domStart:u.domStart+(r.to-u.from)}))}e=o}return e}function zt(e,t,n){function i(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var r=0,o=qn.firstChild,l=0;n.length>l;++l){for(var a=n[l];a.domStart>r;)o=i(o),r++;for(var s=0,u=a.to-a.from;u>s;++s)o=o.nextSibling,r++}for(;o;)o=i(o)}else qn.innerHTML="";var c=n.shift(),o=qn.firstChild,s=e,h=di.from.line,d=di.to.line,f=e>h&&d>=e,p=Nn.createElement("div");$n.iter(e,t,function(e){var t=null,i=null;f?(t=0,d==s&&(f=!1,i=di.to.ch)):h==s&&(d==s?(t=di.from.ch,i=di.to.ch):(f=!0,t=di.from.ch)),c&&c.to==s&&(c=n.shift()),!c||c.from>s?(p.innerHTML=e.hidden?"<pre></pre>":e.getHTML(t,i,!0,bi),qn.insertBefore(p.firstChild,o)):o=o.nextSibling,++s})}function Et(){if(En.gutter||En.lineNumbers){var e=jn.offsetHeight,t=Hn.clientHeight;In.style.height=(2>e-t?t:e)+"px";var n=[],i=mi;$n.iter(mi,Math.max(gi,mi+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,r=En.lineNumbers?i+En.firstLineNumber:null;t&&t.text?r=t.text.replace("%N%",null!=r?r:""):null==r&&(r=" "),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",r);for(var o=1;e.height>o;++o)n.push("<br/>&#160;");n.push("</pre>")}++i}),In.style.display="none",Un.innerHTML=n.join("");for(var r=($n.size+"").length,o=Un.firstChild,l=A(o),a="";r>l.length+a.length;)a+=" ";a&&o.insertBefore(Nn.createTextNode(a),o.firstChild),In.style.display="",Bn.style.marginLeft=In.offsetWidth+"px",si=!1}}function At(){var e=di.inverted?di.from:di.to,t=(dn(),un(e,!0)),n=E(Dn),i=E(qn);Wn.style.top=t.y+i.top-n.top+"px",Wn.style.left=t.x+i.left-n.left+"px",L(di.from,di.to)?(Rn.style.top=t.y+"px",Rn.style.left=(En.lineWrapping?Math.min(t.x,Bn.offsetWidth):t.x)+"px",Rn.style.display=""):Rn.style.display="none"}function Lt(e){Zn=e?Zn||(di.inverted?di.to:di.from):null}function Nt(e,t){var n=Zn&&_t(Zn);n&&(N(n,e)?e=n:N(t,n)&&(t=n)),Dt(e,t),ii=!0}function Dt(e,t,n,i){if(Ti=null,null==n&&(n=di.from.line,i=di.to.line),!L(di.from,e)||!L(di.to,t)){if(N(t,e)){var r=t;t=e,e=r}e.line!=n&&(e=Wt(e,n,di.from.ch)),t.line!=i&&(t=Wt(t,i,di.to.ch)),L(e,t)?di.inverted=!1:L(e,di.to)?di.inverted=!1:L(t,di.from)&&(di.inverted=!0),L(e,t)?L(di.from,di.to)||ri.push({from:n,to:i+1}):L(di.from,di.to)?ri.push({from:e.line,to:t.line+1}):(L(e,di.from)||(n>e.line?ri.push({from:e.line,to:Math.min(t.line,n)+1}):ri.push({from:n,to:Math.min(i,e.line)+1})),L(t,di.to)||(i>t.line?ri.push({from:Math.max(n,e.line),to:i+1}):ri.push({from:Math.max(e.line,i),to:t.line+1}))),di.from=e,di.to=t,li=!0}}function Wt(e,t,n){function i(t){for(var i=e.line+t,r=1==t?$n.size:-1;i!=r;){var o=x(i);if(!o.hidden){var l=e.ch;return(l>n||l>o.text.length)&&(l=o.text.length),{line:i,ch:l}}i+=t}}var r=x(e.line);return r.hidden?e.line>=t?i(1)||i(-1):i(-1)||i(1):e}function Ot(e,t,n){var i=_t({line:e,ch:t||0});(n?Nt:Dt)(i,i)}function Ht(e){return Math.max(0,Math.min(e,$n.size-1))}function _t(e){if(0>e.line)return{line:0,ch:0};if(e.line>=$n.size)return{line:$n.size-1,ch:x($n.size-1).text.length};var t=e.ch,n=x(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function jt(e,t){function n(){for(var t=o+e,n=0>e?-1:$n.size;t!=n;t+=e){var i=x(t);if(!i.hidden)return o=t,a=i,!0}}function i(t){if(l==(0>e?0:a.text.length)){if(t||!n())return!1;l=0>e?a.text.length:0}else l+=e;return!0}var r=di.inverted?di.from:di.to,o=r.line,l=r.ch,a=x(o);if("char"==t)i();else if("column"==t)i(!0);else if("word"==t)for(var s=!1;!(0>e)||i();){if(_(a.text.charAt(l)))s=!0;else if(s){0>e&&(e=1,i());break}if(e>0&&!i())break}return{line:o,ch:l}}function It(e,t){var n=0>e?di.from:di.to;(Zn||L(di.from,di.to))&&(n=jt(e,t)),Ot(n.line,n.ch,!0)}function Ut(e,t){L(di.from,di.to)?0>e?ht("",jt(e,t),di.to):ht("",di.from,jt(e,t)):ht("",di.from,di.to),ii=!0}function Bt(e,t){var n=0,i=un(di.inverted?di.from:di.to,!0);null!=Ti&&(i.x=Ti),"page"==t?n=Hn.clientHeight:"line"==t&&(n=dn());var r=cn(i.x,i.y+n*e+2);Ot(r.line,r.ch,!0),Ti=i.x}function Vt(e){for(var t=x(e.line).text,n=e.ch,i=e.ch;n>0&&_(t.charAt(n-1));)--n;for(;t.length>i&&_(t.charAt(i));)++i;Nt({line:e.line,ch:n},{line:e.line,ch:i})}function Rt(e){Nt({line:e,ch:0},{line:e,ch:x(e).text.length})}function qt(e){if(L(di.from,di.to))return Pt(di.from.line,e);for(var t=di.to.line-(di.to.ch?0:1),n=di.from.line;t>=n;++n)Pt(n,e)}function Pt(e,t){if(t||(t="add"),"smart"==t)if(Fn.indent)var n=kn(e);else t="prev";var i,r=x(e),o=r.indentation(En.tabSize),l=r.text.match(/^\s*/)[0];"prev"==t?i=e?x(e-1).indentation(En.tabSize):0:"smart"==t?i=Fn.indent(n,r.text.slice(l.length),r.text):"add"==t?i=o+En.indentUnit:"subtract"==t&&(i=o-En.indentUnit),i=Math.max(0,i);var a=i-o;if(a){var s="",u=0;if(En.indentWithTabs)for(var c=Math.floor(i/En.tabSize);c;--c)u+=En.tabSize,s+="	";for(;i>u;)++u,s+=" "}else{if(di.from.line!=e&&di.to.line!=e)return;var s=l}ht(s,{line:e,ch:0},{line:e,ch:l.length})}function Kt(){Fn=e.getMode(En,En.mode),$n.iter(0,$n.size,function(e){e.stateAfter=null}),Gn=[0],Sn()}function Ft(){var e=En.gutter||En.lineNumbers;In.style.display=e?"":"none",e?si=!0:qn.parentNode.style.marginLeft=0}function Gt(){if(En.lineWrapping){Dn.className+=" CodeMirror-wrap";var e=Hn.clientWidth/fn()-3;$n.iter(0,$n.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&T(t,n)}}),Bn.style.width=_n.style.width=""}else Dn.className=Dn.className.replace(" CodeMirror-wrap",""),hi=null,yi="",$n.iter(0,$n.size,function(e){1!=e.height&&!e.hidden&&T(e,1),e.text.length>yi.length&&(yi=e.text)});ri.push({from:0,to:$n.size})}function Yt(){for(var e='<span class="cm-tab">',t=0;En.tabSize>t;++t)e+=" ";return e+"</span>"}function Jt(){bi=Yt(),Mt(!0)}function Xt(){Hn.className=Hn.className.replace(/\s*cm-s-\w+/g,"")+En.theme.replace(/(^|\s)\s*/g," cm-s-")}function $t(){this.set=[]}function Zt(e,t,n){function i(e,t,n,i){x(e).addMark(new l(t,n,i,r.set))}e=_t(e),t=_t(t);var r=new $t;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var o=e.line+1,a=t.line;a>o;++o)i(o,null,null,n);i(t.line,null,t.ch,n)}return ri.push({from:e.line,to:t.line+1}),r}function Qt(e){e=_t(e);var t=new a(e.ch);return x(e.line).addMark(t),t}function en(e,t,n){return"number"==typeof e&&(e=x(Ht(e))),e.gutterMarker={text:t,style:n},si=!0,e}function tn(e){"number"==typeof e&&(e=x(Ht(e))),e.gutterMarker=null,si=!0}function nn(e,t){var n=e,i=e;return"number"==typeof e?i=x(Ht(e)):n=f(e),null==n?null:t(i,n)?(ri.push({from:n,to:n+1}),i):null}function rn(e,t){return nn(e,function(e){return e.className!=t?(e.className=t,!0):void 0})}function on(e,t){return nn(e,function(e,n){return e.hidden!=t?(e.hidden=t,T(e,t?0:1),t&&(di.from.line==n||di.to.line==n)&&Dt(Wt(di.from,di.from.line,di.from.ch),Wt(di.to,di.to.line,di.to.ch)),si=!0):void 0})}function ln(e){if("number"==typeof e){if(!v(e))return null;var t=e;if(e=x(e),!e)return null}else{var t=f(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function an(e){return Vn.innerHTML="<pre><span>x</span></pre>",Vn.firstChild.firstChild.firstChild.nodeValue=e,Vn.firstChild.firstChild.offsetWidth||10}function sn(e,t){var n="";if(En.lineWrapping){var i=e.text.indexOf(" ",t+2);n=W(e.text.slice(t+1,0>i?e.text.length:i+(K?5:0)))}Vn.innerHTML="<pre>"+e.getHTML(null,null,!1,bi,t)+'<span id="CodeMirror-temp-'+Ni+'">'+W(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var r=document.getElementById("CodeMirror-temp-"+Ni),o=r.offsetTop,l=r.offsetLeft;if(K&&t&&0==o&&0==l){var a=document.createElement("span");a.innerHTML="x",r.parentNode.insertBefore(a,r.nextSibling),o=a.offsetTop}return{top:o,left:l}}function un(e,t){var n,i=dn(),r=i*(m($n,e.line)-(t?pi:0));if(0==e.ch)n=0;else{var o=sn(x(e.line),e.ch);n=o.left,En.lineWrapping&&(r+=Math.max(0,o.top))}return{x:n,y:r,yBot:r+i}}function cn(e,t){function n(e){var t=sn(a,e);if(u){var n=Math.round(t.top/i);return Math.max(0,t.left+(n-c)*Hn.clientWidth)}return t.left}0>t&&(t=0);var i=dn(),r=fn(),o=pi+Math.floor(t/i),l=p($n,o);if(l>=$n.size)return{line:$n.size-1,ch:x($n.size-1).text.length};var a=x(l),s=a.text,u=En.lineWrapping,c=u?o-m($n,l):0;if(0>=e&&0==c)return{line:l,ch:0};for(var h,d=0,f=0,g=s.length,v=Math.min(g,Math.ceil((e+.9*c*Hn.clientWidth)/r));;){var y=n(v);if(!(e>=y&&g>v)){h=y,g=v;break}v=Math.min(g,Math.ceil(1.2*v))}if(e>h)return{line:l,ch:g};for(v=Math.floor(.8*g),y=n(v),e>y&&(d=v,f=y);;){if(1>=g-d)return{line:l,ch:h-e>e-f?d:g};var b=Math.ceil((d+g)/2),k=n(b);k>e?(g=b,h=k):(d=b,f=k)}}function hn(e){var t=un(e,!0),n=E(Bn);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function dn(){if(null==Ai){Ai="<pre>";for(var e=0;49>e;++e)Ai+="x<br/>";Ai+="x</pre>"}var t=qn.clientHeight;return t==Ei?zi:(Ei=t,Vn.innerHTML=Ai,zi=Vn.firstChild.offsetHeight/50||1,Vn.innerHTML="",zi)}function fn(){return Hn.clientWidth==Di?Li:(Di=Hn.clientWidth,Li=an("x"))}function pn(){return Bn.offsetTop}function mn(){return Bn.offsetLeft}function gn(e,t){var n,i,r=E(Hn,!0);try{n=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(n-r.left>Hn.clientWidth||i-r.top>Hn.clientHeight))return null;var o=E(Bn,!0);return cn(n-o.left,i-o.top)}function vn(e){function t(){var e=J(On.value).join("\n");e!=r&&zn(dt)(e,"end"),Wn.style.position="relative",On.style.cssText=i,ai=!1,bt(!0),gt()}var n=gn(e);if(n&&!window.opera){(L(di.from,di.to)||N(n,di.from)||!N(n,di.to))&&zn(Ot)(n.line,n.ch);var i=On.style.cssText;Wn.style.position="absolute",On.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ai=!0;var r=On.value=mt();if(xt(),On.select(),P){k(e);var o=S(window,"mouseup",function(){o(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function yn(){clearInterval(Kn);var e=!0;Rn.style.visibility="",Kn=setInterval(function(){Rn.style.visibility=(e=!e)?"":"hidden"},650)}function bn(e){function t(e,t,n){if(e.text)for(var i,r=e.styles,o=l?0:e.text.length-1,s=l?0:r.length-2,u=l?r.length:-2;s!=u;s+=2*a){var c=r[s];if(null==r[s+1]||r[s+1]==d){for(var h=l?0:c.length-1,m=l?c.length:-1;h!=m;h+=a,o+=a)if(o>=t&&n>o&&p.test(i=c.charAt(h))){var g=Wi[i];if(">"==g.charAt(1)==l)f.push(i);else{if(f.pop()!=g.charAt(0))return{pos:o,match:!1};if(!f.length)return{pos:o,match:!0}}}}else o+=a*c.length}}var n=di.inverted?di.from:di.to,i=x(n.line),r=n.ch-1,o=r>=0&&Wi[i.text.charAt(r)]||Wi[i.text.charAt(++r)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=i.styles,u=r+1,c=0,h=s.length;h>c;c+=2)if(0>=(u-=s[c].length)){var d=s[c+1];break}for(var f=[i.text.charAt(r)],p=/[(){}[\]]/,c=n.line,h=l?Math.min(c+100,$n.size):Math.max(-1,c-100);c!=h;c+=a){var i=x(c),m=c==n.line,g=t(i,m&&l?r+1:0,m&&!l?r:i.text.length);if(g)break}g||(g={pos:null,match:!1});var d=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=Zt({line:n.line,ch:r},{line:n.line,ch:r+1},d),y=null!=g.pos&&Zt({line:c,ch:g.pos},{line:c,ch:g.pos+1},d),b=zn(function(){v.clear(),y&&y.clear()});e?setTimeout(b,800):ci=b}}function xn(e){for(var t,n,i=e,r=e-40;i>r;--i){if(0==i)return 0;var o=x(i-1);if(o.stateAfter)return i;var l=o.indentation(En.tabSize);(null==n||t>l)&&(n=i-1,t=l)}return n}function kn(e){var t=xn(e),n=t&&x(t-1).stateAfter;return n=n?i(Fn,n):r(Fn),$n.iter(t,e,function(e){e.highlight(Fn,n,En.tabSize),e.stateAfter=i(Fn,n)}),e>t&&ri.push({from:t,to:e}),$n.size>e&&!x(e).stateAfter&&Gn.push(e),n}function wn(e,t){var n=kn(e);$n.iter(e,t,function(e){e.highlight(Fn,n,En.tabSize),e.stateAfter=i(Fn,n)})}function Cn(){for(var e=+new Date+En.workTime,t=Gn.length;Gn.length;){if(x(mi).stateAfter)var n=Gn.pop();else var n=mi;if(!(n>=$n.size)){var o=xn(n),l=o&&x(o-1).stateAfter;l=l?i(Fn,l):r(Fn);var a=0,s=Fn.compareStates,u=!1,c=o,h=!1;if($n.iter(c,$n.size,function(t){var r=t.stateAfter;if(+new Date>e)return Gn.push(c),Sn(En.workDelay),u&&ri.push({from:n,to:c+1}),h=!0;var o=t.highlight(Fn,l,En.tabSize);if(o&&(u=!0),t.stateAfter=i(Fn,l),s){if(r&&s(r,l))return!0}else if(o===!1&&r){if(++a>3&&(!Fn.indent||Fn.indent(r,"")==Fn.indent(l,"")))return!0}else a=0;++c}),h)return;u&&ri.push({from:n,to:c+1})}}t&&En.onHighlightComplete&&En.onHighlightComplete(wi)}function Sn(e){Gn.length&&Xn.set(e,zn(Cn))}function Mn(){ni=ii=oi=null,ri=[],li=!1,ui=[]}function Tn(){var e,t=!1;li&&(t=!wt()),ri.length?e=Mt(ri,!0):(li&&At(),si&&Et()),t&&wt(),li&&(kt(),yn()),Yn&&!ai&&(ni===!0||ni!==!1&&li)&&bt(ii),li&&En.matchBrackets&&setTimeout(zn(function(){ci&&(ci(),ci=null),L(di.from,di.to)&&bn(!1)}),20);var n=oi,i=ui;li&&En.onCursorActivity&&En.onCursorActivity(wi),n&&En.onChange&&wi&&En.onChange(wi,n);for(var r=0;i.length>r;++r)i[r](wi);e&&En.onUpdate&&En.onUpdate(wi)}function zn(e){return function(){Oi++||Mn();try{var t=e.apply(this,arguments)}finally{--Oi||Tn()}return t}}var En={},An=e.defaults;for(var Ln in An)An.hasOwnProperty(Ln)&&(En[Ln]=(u&&u.hasOwnProperty(Ln)?u:An)[Ln]);var Nn=En.document,Dn=Nn.createElement("div");Dn.className="CodeMirror"+(En.lineWrapping?" CodeMirror-wrap":""),Dn.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',o.appendChild?o.appendChild(Dn):o(Dn);var Wn=Dn.firstChild,On=Wn.firstChild,Hn=Dn.lastChild,_n=Hn.firstChild,jn=_n.firstChild,In=jn.firstChild,Un=In.firstChild,Bn=In.nextSibling.firstChild,Vn=Bn.firstChild,Rn=Vn.nextSibling,qn=Rn.nextSibling;Xt(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(On.style.width="0px"),F||(Bn.draggable=!0),null!=En.tabindex&&(On.tabIndex=En.tabindex),!En.gutter&&!En.lineNumbers&&(In.style.display="none");try{an("x")}catch(Pn){throw Pn.message.match(/runtime/i)&&(Pn=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Pn}var Kn,Fn,Gn,Yn,Jn=new M,Xn=new M,$n=new h([new c([new s("")])]);Kt();var Zn,Qn,ei,ti,ni,ii,ri,oi,li,ai,si,ui,ci,hi,di={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},fi=!1,pi=0,mi=0,gi=0,vi=0,yi="",bi=Yt();zn(function(){z(En.value||""),ni=!1})();var xi=new g;S(Hn,"mousedown",zn(U)),S(Hn,"dblclick",zn(G)),S(Bn,"dragstart",Q),S(Bn,"selectstart",b),P||S(Hn,"contextmenu",vn),S(Hn,"scroll",function(){Mt([]),En.fixedGutter&&(In.style.left=Hn.scrollLeft+"px"),En.onScroll&&En.onScroll(wi)}),S(window,"resize",function(){Mt(!0)}),S(On,"keyup",zn(it)),S(On,"input",vt),S(On,"keydown",zn(tt)),S(On,"keypress",zn(nt)),S(On,"focus",rt),S(On,"blur",ot),S(Hn,"dragenter",k),S(Hn,"dragover",k),S(Hn,"drop",zn(Z)),S(Hn,"paste",function(){xt(),vt()}),S(On,"paste",vt),S(On,"cut",zn(function(){dt("")}));var ki;try{ki=Nn.activeElement==On}catch(Pn){}ki?setTimeout(rt,20):ot();var wi=Dn.CodeMirror={getValue:I,setValue:zn(z),getSelection:mt,replaceSelection:zn(dt),focus:function(){xt(),rt(),vt()},setOption:function(e,t){var n=En[e];En[e]=t,"mode"==e||"indentUnit"==e?Kt():"readOnly"==e&&t?(ot(),On.blur()):"theme"==e?Xt():"lineWrapping"==e&&n!=t?zn(Gt)():"tabSize"==e&&zn(Jt)(),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&zn(Ft)()},getOption:function(e){return En[e]},undo:zn(st),redo:zn(ut),indentLine:zn(function(e,t){v(e)&&Pt(e,null==t?"smart":t?"add":"subtract")}),indentSelection:zn(qt),historySize:function(){return{undo:xi.done.length,redo:xi.undone.length}},clearHistory:function(){xi=new g},matchBrackets:zn(function(){bn(!0)}),getTokenAt:zn(function(e){return e=_t(e),x(e.line).getTokenAt(Fn,kn(e.line),e.ch)}),getStateAfter:function(e){return e=Ht(null==e?$n.size-1:e),kn(e+1)},cursorCoords:function(e){return null==e&&(e=di.inverted),hn(e?di.from:di.to)},charCoords:function(e){return hn(_t(e))},coordsChar:function(e){var t=E(Bn);return cn(e.x-t.left,e.y-t.top)},markText:zn(Zt),setBookmark:Qt,setMarker:zn(en),clearMarker:zn(tn),setLineClass:zn(rn),hideLine:zn(function(e){return on(e,!0)}),showLine:zn(function(e){return on(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!v(e))return null;e=x(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:ln,addWidget:function(e,t,n,i,r){e=un(_t(e));var o=e.yBot,l=e.x;if(t.style.position="absolute",_n.appendChild(t),"over"==i)o=e.y;else if("near"==i){var a=Math.max(Hn.offsetHeight,$n.height*dn()),s=Math.max(_n.clientWidth,Bn.clientWidth)-mn();e.yBot+t.offsetHeight>a&&e.y>t.offsetHeight&&(o=e.y-t.offsetHeight),l+t.offsetWidth>s&&(l=s-t.offsetWidth)}t.style.top=o+pn()+"px",t.style.left=t.style.right="","right"==r?(l=_n.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(_n.clientWidth-t.offsetWidth)/2),t.style.left=l+mn()+"px"),n&&Ct(l,o,l+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return $n.size},clipPos:_t,getCursor:function(e){return null==e&&(e=di.inverted),D(e?di.from:di.to)},somethingSelected:function(){return!L(di.from,di.to)},setCursor:zn(function(e,t,n){null==t&&"number"==typeof e.line?Ot(e.line,e.ch,n):Ot(e,t,n)}),setSelection:zn(function(e,t,n){(n?Nt:Dt)(_t(e),_t(t||e))}),getLine:function(e){return v(e)?x(e).text:void 0},getLineHandle:function(e){return v(e)?x(e):void 0},setLine:zn(function(e,t){v(e)&&ht(t,{line:e,ch:0},{line:e,ch:x(e).text.length})}),removeLine:zn(function(e){v(e)&&ht("",{line:e,ch:0},_t({line:e+1,ch:0}))}),replaceRange:zn(ht),getRange:function(e,t){return pt(_t(e),_t(t))},execCommand:function(e){return V[e](wi)},moveH:zn(It),deleteH:zn(Ut),moveV:zn(Bt),toggleOverwrite:function(){fi=!fi},posFromIndex:function(e){var t,n=0;return $n.iter(0,$n.size,function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),_t({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return $n.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return zn(e)()},refresh:function(){Mt(!0)},getInputField:function(){return On},getWrapperElement:function(){return Dn},getScrollerElement:function(){return Hn},getGutterElement:function(){return In}},Ci=null,Si=!1,Mi="",Ti=null;$t.prototype.clear=zn(function(){for(var e=1/0,t=-1/0,n=0,i=this.set.length;i>n;++n){var r=this.set[n],o=r.marked;if(o&&r.parent){var l=f(r);e=Math.min(e,l),t=Math.max(t,l);for(var a=0;o.length>a;++a)o[a].set==this.set&&o.splice(a--,1)}}1/0!=e&&ri.push({from:e,to:t+1})}),$t.prototype.find=function(){for(var e,t,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],o=r.marked,l=0;o.length>l;++l){var a=o[l];if(a.set==this.set&&(null!=a.from||null!=a.to)){var s=f(r);null!=s&&(null!=a.from&&(e={line:s,ch:a.from}),null!=a.to&&(t={line:s,ch:a.to}))}}return{from:e,to:t}};var zi,Ei,Ai,Li,Ni=Math.floor(16777215*Math.random()).toString(16),Di=0,Wi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Oi=0;for(var Hi in B)B.propertyIsEnumerable(Hi)&&!wi.propertyIsEnumerable(Hi)&&(wi[Hi]=B[Hi]);return wi}function t(e,t,n){function i(e,t,n){var r=t[e];if(null!=r)return r;if(null==n&&(n=t.fallthrough),null==n)return t.catchall;if("string"==typeof n)return i(e,R[n]);for(var o=0,l=n.length;l>o;++o)if(r=i(e,R[n[o]]),null!=r)return r;return null}return t?i(e,t,n):i(e,R[n])}function n(e){var t=$[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function r(e,t,n){return e.startState?e.startState(t,n):!0}function o(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function l(e,t,n,i){this.from=e,this.to=t,this.style=n,this.set=i}function a(e){this.from=e,this.to=e,this.line=null}function s(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function u(e,t,n,i){for(var r=0,o=0,l=0;t>o;r+=2){var a=n[r],s=o+a.length;0==l?(s>e&&i.push(a.slice(e-o,Math.min(a.length,t-o)),n[r+1]),s>=e&&(l=1)):1==l&&(s>t?i.push(a.slice(0,t-o),n[r+1]):i.push(a,n[r+1])),o=s}}function c(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function h(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function d(e,t){for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function f(e){if(null==e.parent)return null;for(var t=e.parent,n=H(t.lines,e),i=t.parent;i;t=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=t;++r)n+=i.children[r].chunkSize()}return n}function p(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var o=e.children[i],l=o.height;if(l>t){e=o;continue e}t-=l,n+=o.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var a=e.lines[i],s=a.height;if(s>t)break;t-=s}return n+i}function m(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var o=e.children[i],l=o.chunkSize();if(l>t){e=o;continue e}t-=l,n+=o.height}return n}while(!e.lines);for(var i=0;t>i;++i)n+=e.lines[i].height;return n}function g(){this.time=0,this.done=[],this.undone=[]}function v(){k(this)}function y(e){return e.stop||(e.stop=v),e}function b(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function x(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function k(e){b(e),x(e)}function w(e){return e.target||e.srcElement}function C(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0
}function S(e,t,n,i){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),i)return function(){e.removeEventListener(t,n,!1)}}else{var r=function(e){n(e||window.event)};if(e.attachEvent("on"+t,r),i)return function(){e.detachEvent("on"+t,r)}}}function M(){this.id=null}function T(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var i=0,r=0;t>i;++i)"	"==e.charAt(i)?r+=n-r%n:++r;return r}function z(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function E(e,t){for(var n=e.ownerDocument.body,i=0,r=0,o=!1,l=e;l;l=l.offsetParent){var a=l.offsetLeft,s=l.offsetTop;l==n?(i+=Math.abs(a),r+=Math.abs(s)):(i+=a,r+=s),t&&"fixed"==z(l).position&&(o=!0)}for(var u=t&&!o?null:n,l=e.parentNode;l!=u;l=l.parentNode)null!=l.scrollLeft&&(i-=l.scrollLeft,r-=l.scrollTop);return{left:i,top:r}}function A(e){return e.textContent||e.innerText||e.nodeValue||""}function L(e,t){return e.line==t.line&&e.ch==t.ch}function N(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function D(e){return{line:e.line,ch:e.ch}}function W(e){return Y.textContent=e,Y.innerHTML}function O(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,i=t.length;n>=0&&i>=0&&e.charAt(n)==t.charAt(i);--n,--i);return i+1}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function _(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var j=/Mac/.test(navigator.platform),I=(/Win/.test(navigator.platform),{}),U={};e.defineMode=function(t,n){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),I[t]=n},e.defineMIME=function(e,t){U[e]=t},e.getMode=function(t,n){if("string"==typeof n&&U.hasOwnProperty(n)&&(n=U[n]),"string"==typeof n)var i=n,r={};else if(null!=n)var i=n.name,r=n;var o=I[i];return o?o(t,r||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in I)I.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in U)U.propertyIsEnumerable(t)&&e.push({mime:t,mode:U[t]});return e};var B=e.extensions={};e.defineExtension=function(e,t){B[e]=t};var V=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!L(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),i=Math.max(0,n.search(/\S/));e.setCursor(t.line,i>=t.ch&&t.ch?0:i,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},R=e.keyMap={};R.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},R.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},R.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},R["default"]=j?R.macDefault:R.pcDefault,R.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function i(){t.value=a.getValue()}function r(){i(),t.form.submit=l,t.form.submit(),t.form.submit=r}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),t.form){var o=S(t.form,"submit",i,!0);if("function"==typeof t.form.submit){var l=t.form.submit;t.form.submit=r}}t.style.display="none";var a=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return a.save=i,a.getTextArea=function(){return t},a.toTextArea=function(){i(),t.parentNode.removeChild(a.getWrapperElement()),t.style.display="",t.form&&(o(),"function"==typeof t.form.submit&&(t.form.submit=l))},a},e.copyState=i,e.startState=r,o.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return T(this.string,this.start,this.tabSize)},indentation:function(){return T(this.string,null,this.tabSize)},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&t!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=o,l.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=H(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,i=null==this.to?null:this.to-e+t;return new l(n,i,this.style,this.set)},dup:function(){return new l(null,null,this.style,this.set)},clipTo:function(e,t,n,i,r){null!=this.from&&this.from>=t&&(this.from=Math.max(i,this.from)+r),null!=this.to&&this.to>t&&(this.to=this.to>i?this.to+r:t),e&&i>this.from&&(this.to>i||null==this.to)&&(this.from=null),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},a.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,i,r){(e||this.from>t)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:f(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=H(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},s.inheritMarks=function(e,t){var n=new s(e),i=t&&t.marked;if(i)for(var r=0;i.length>r;++r)if(null==i[r].to&&i[r].style){var o=n.marked||(n.marked=[]),l=i[r],a=l.dup();o.push(a),a.attach(n)}return n},s.prototype={replace:function(e,t,n){var i=[],r=this.marked,o=null==t?this.text.length:t;if(u(0,e,this.styles,i),n&&i.push(n,null),u(o,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,e)+n+this.text.slice(o),this.stateAfter=null,r)for(var l=n.length-(o-e),a=0,s=r[a];r.length>a;++a)s.clipTo(null==e,e||0,null==t,o,l),s.isDead()&&(s.detach(this),r.splice(a--,1))},split:function(e,t){var n=[t,null],i=this.marked;u(e,this.text.length,this.styles,n);var r=new s(t+this.text.slice(e),n);if(i)for(var o=0;i.length>o;++o){var l=i[o],a=l.split(e,t.length);a&&(r.marked||(r.marked=[]),r.marked.push(a),a.attach(r))}return r},append:function(e){var t=this.text.length,n=e.marked,i=this.marked;if(this.text+=e.text,u(0,e.text.length,e.styles,this.styles),i)for(var r=0;i.length>r;++r)null==i[r].to&&(i[r].to=t);if(n&&n.length){i||(this.marked=i=[]);e:for(var r=0;n.length>r;++r){var o=n[r];if(!o.from)for(var l=0;i.length>l;++l){var a=i[l];if(a.to==t&&a.sameSet(o)){a.to=null==o.to?null:o.to+t,a.isDead()&&(a.detach(this),n.splice(r--,1));continue e}}i.push(o),o.attach(this),o.from+=t,null!=o.to&&(o.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var i=0;t.length>i;++i){var r=t[i],o=null==r.to;if(o&&n)for(var l=0;n.length>l;++l)if(n[l].sameSet(r)){o=!1;break}o&&(r.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var i,r=new o(this.text,n),l=this.styles,a=0,s=!1,u=l[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var c=e.token(r,t),h=this.text.slice(r.start,r.pos);if(r.start=r.pos,a&&l[a-1]==c?l[a-2]+=h:h&&(!s&&(l[a+1]!=c||a&&l[a-2]!=i)&&(s=!0),l[a++]=h,l[a++]=c,i=u,u=l[a]),r.pos>5e3){l[a++]=this.text.slice(r.pos),l[a++]=null;break}}return l.length!=a&&(l.length=a,s=!0),a&&l[a-2]!=i&&(s=!0),s||(5>l.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var i=this.text,r=new o(i);n>r.pos&&!r.eol();){r.start=r.pos;var l=e.token(r,t)}return{start:r.start,end:r.pos,string:r.current(),className:l||null,state:t}},indentation:function(e){return T(this.text,null,e)},getHTML:function(e,t,n,i,r){function o(e,t){e&&(s&&K&&" "==e.charAt(0)&&(e=" "+e.slice(1)),s=!1,t?a.push('<span class="',t,'">',W(e).replace(/\t/g,i),"</span>"):a.push(W(e).replace(/\t/g,i)))}function l(){h&&(v+=1,y=h.length>v?h[v]:null)}var a=[],s=!0;n&&a.push(this.className?'<pre class="'+this.className+'">':"<pre>");var u=this.styles,c=this.text,h=this.marked;e==t&&(e=null);var d=c.length;if(null!=r&&(d=Math.min(r,d)),c||null!=r)if(h||null!=e){var f,p=0,m=0,g="",v=-1,y=null;for(l();d>p;){var b=d,x="";for(null!=e&&(e>p?b=e:(null==t||t>p)&&(x=" CodeMirror-selected",null!=t&&(b=Math.min(b,t))));y&&null!=y.to&&p>=y.to;)l();for(y&&(y.from>p?b=Math.min(b,y.from):(x+=" "+y.style,null!=y.to&&(b=Math.min(b,y.to))));;){var k=p+g.length,w=f;if(x&&(w=f?f+x:x),o(k>b?g.slice(0,b-p):g,w),k>=b){g=g.slice(b-p),p=b;break}p=k,g=u[m++],f="cm-"+u[m++]}}null!=e&&null==t&&o(" ","CodeMirror-selected")}else for(var m=0,C=0;d>C;m+=2){var S=u[m],f=u[m+1],M=S.length;C+M>d&&(S=S.slice(0,d-C)),C+=M,o(S,f&&"cm-"+f)}else o(" ",null!=e&&null==t?"CodeMirror-selected":null);return n&&a.push("</pre>"),a.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},c.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var i=e,r=e+t;r>i;++i){var o=this.lines[i];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var l=0;o.handlers.length>l;++l)n.push(o.handlers[l])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var i=0;this.children.length>i;++i){var r=this.children[i],o=r.chunkSize();if(o>e){var l=Math.min(t,o-e),a=r.height;if(r.remove(e,l,n),this.height-=a-r.height,o==l&&(this.children.splice(i--,1),r.parent=null),0==(t-=l))break;e=0}else e-=o}if(25>this.size-t){var s=[];this.collapse(s),this.children=[new c(s)]}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],l=o.chunkSize();if(l>=e){if(o.insertHeight(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),s=new c(a);o.height-=s.height,this.children.splice(i+1,0,s),s.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new h(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=H(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new h(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],l=o.chunkSize();if(l>e){var a=Math.min(t,l-e);if(o.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=l}}},g.prototype={addChange:function(e,t,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1];if(i-this.time>400||!r||r.start>e+t||r.start+r.added<e-r.added+r.old.length)this.done.push({start:e,added:t,old:n});else{var o=0;if(r.start>e){for(var l=r.start-e-1;l>=0;--l)r.old.unshift(n[l]);r.added+=r.start-e,r.start=e}else e>r.start&&(o=e-r.start,t+=o);for(var l=r.added-o,a=n.length;a>l;++l)r.old.push(n[l]);t>r.added&&(r.added=t)}this.time=i}},e.e_stop=k,e.e_preventDefault=b,e.e_stopPropagation=x,e.connect=S,M.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var q=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),P=/gecko\/\d{7}/i.test(navigator.userAgent),K=/MSIE \d/.test(navigator.userAgent),F=/WebKit\//.test(navigator.userAgent),G="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(G="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(E=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var Y=document.createElement("pre");"\na"==W("a")?W=function(e){return Y.textContent=e,Y.innerHTML.slice(1)}:"	"!=W("	")&&(W=function(e){return Y.innerHTML="",Y.appendChild(document.createTextNode(e)),Y.innerHTML}),e.htmlEscape=W;var J=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,i=[];(t=e.indexOf("\n",n))>-1;)i.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return i.push(e.slice(n)),i}:function(e){return e.split(/\r?\n/)};e.splitLines=J;var X=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var $={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=$,function(){for(var e=0;10>e;e++)$[e+48]=e+"";for(var e=65;90>=e;e++)$[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)$[e+111]=$[e+63235]="F"+e}(),e}();CodeMirror.defineMode("css",function(e){function t(e,t){return l=t,e}function n(e,n){var l=e.next();return"@"==l?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==l&&e.eat("*")?(n.tokenize=i,i(e,n)):"<"==l&&e.eat("!")?(n.tokenize=r,r(e,n)):"="!=l?"~"!=l&&"|"!=l||!e.eat("=")?'"'==l||"'"==l?(n.tokenize=o(l),n.tokenize(e,n)):"#"==l?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==l?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(l)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(l)?t(null,"select-op"):/[;{}:\[\]]/.test(l)?t(null,l):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function i(e,i){for(var r,o=!1;null!=(r=e.next());){if(o&&"/"==r){i.tokenize=n;break}o="*"==r}return t("comment","comment")}function r(e,i){for(var r,o=0;null!=(r=e.next());){if(o>=2&&">"==r){i.tokenize=n;break}o="-"==r?o+1:0}return t("comment","comment")}function o(e){return function(i,r){for(var o,l=!1;null!=(o=i.next())&&(o!=e||l);)l=!l&&"\\"==o;return l||(r.tokenize=n),t("string","string")}}var l,a=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),i=t.stack[t.stack.length-1];return"hash"==l&&"rule"==i?n="atom":"variable"==n&&("rule"==i?n="number":i&&"@media{"!=i||(n="tag")),"rule"==i&&/^[\{\};]$/.test(l)&&t.stack.pop(),"{"==l?"@media"==i?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==l?t.stack.pop():"@media"==l?t.stack.push("@media"):"{"==i&&"comment"!=l&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*a},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),CodeMirror.defineMode("htmlmixed",function(e){function t(e,t){var n=o.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=i,t.localState=l.startState(o.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=r,t.localState=a.startState(o.indent(t.htmlState,"")),t.mode="css")),n}function n(e,t,n){var i=e.current(),r=i.search(t);return r>-1&&e.backUp(i.length-r),n}function i(e,i){return e.match(/^<\/\s*script\s*>/i,!1)?(i.token=t,i.curState=null,i.mode="html",t(e,i)):n(e,/<\/\s*script\s*>/,l.token(e,i.localState))}function r(e,i){return e.match(/^<\/\s*style\s*>/i,!1)?(i.token=t,i.localState=null,i.mode="html",t(e,i)):n(e,/<\/\s*style\s*>/,a.token(e,i.localState))}var o=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),l=CodeMirror.getMode(e,"javascript"),a=CodeMirror.getMode(e,"css");return{startState:function(){var e=o.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.token==r?a:l,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:CodeMirror.copyState(o,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?o.indent(e.htmlState,n):e.token==i?l.indent(e.localState,n):a.indent(e.localState,n)},compareStates:function(e,t){return o.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function i(e,t){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i)return!1;i=!i&&"\\"==n}return i}function r(e,t,n){return _=e,j=n,t}function o(e,t){var o=e.next();if('"'==o||"'"==o)return n(e,t,l(o));if(/[\[\]{}\(\),;\:\.]/.test(o))return r(o);if("0"==o&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(o))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==o)return e.eat("*")?n(e,t,a):e.eat("/")?(e.skipToEnd(),r("comment","comment")):t.reAllowed?(i(e,"/"),e.eatWhile(/[gimy]/),r("regexp","string")):(e.eatWhile(V),r("operator",null,e.current()));if("#"==o)return e.skipToEnd(),r("error","error");if(V.test(o))return e.eatWhile(V),r("operator",null,e.current());e.eatWhile(/[\w\$_]/);var s=e.current(),u=B.propertyIsEnumerable(s)&&B[s];return u&&t.kwAllowed?r(u.type,u.style,s):r("variable","variable",s)}function l(e){return function(t,n){return i(t,e)||(n.tokenize=o),r("string","string")}}function a(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=o;break}i="*"==n}return r("comment","comment")}function s(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function u(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function c(e,t,n,i,r){var o=e.cc;for(q.state=e,q.stream=r,q.marked=null,q.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var l=o.length?o.pop():U?x:b;if(l(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return q.marked?q.marked:"variable"==n&&u(e,i)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)q.cc.push(arguments[e])}function d(){return h.apply(null,arguments),!0}function f(e){var t=q.state;if(t.context){q.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function p(){q.state.context||(q.state.localVars=P),q.state.context={prev:q.state.context,vars:q.state.localVars}}function m(){q.state.localVars=q.state.context.vars,q.state.context=q.state.context.prev}function g(e,t){var n=function(){var n=q.state;n.lexical=new s(n.indented,q.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function v(){var e=q.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function y(e){return function(t){return t==e?d():";"==e?h():d(arguments.callee)}}function b(e){return"var"==e?d(g("vardef"),E,y(";"),v):"keyword a"==e?d(g("form"),x,b,v):"keyword b"==e?d(g("form"),b,v):"{"==e?d(g("}"),z,v):";"==e?d():"function"==e?d(O):"for"==e?d(g("form"),y("("),g(")"),L,y(")"),v,b,v):"variable"==e?d(g("stat"),C):"switch"==e?d(g("form"),x,g("}","switch"),y("{"),z,v,v):"case"==e?d(x,y(":")):"default"==e?d(y(":")):"catch"==e?d(g("form"),p,y("("),H,y(")"),b,v,m):h(g("stat"),x,y(";"),v)}function x(e){return R.hasOwnProperty(e)?d(w):"function"==e?d(O):"keyword c"==e?d(k):"("==e?d(g(")"),x,y(")"),v,w):"operator"==e?d(x):"["==e?d(g("]"),T(x,"]"),v,w):"{"==e?d(g("}"),T(M,"}"),v,w):d()}function k(e){return e.match(/[;\}\)\],]/)?h():h(x)}function w(e,t){if("operator"==e&&/\+\+|--/.test(t))return d(w);if("operator"==e)return d(x);if(";"!=e)return"("==e?d(g(")"),T(x,")"),v,w):"."==e?d(S,w):"["==e?d(g("]"),x,y("]"),v,w):void 0}function C(e){return":"==e?d(v,b):h(w,y(";"),v)}function S(e){return"variable"==e?(q.marked="property",d()):void 0}function M(e){return"variable"==e&&(q.marked="property"),R.hasOwnProperty(e)?d(y(":"),x):void 0}function T(e,t){function n(i){return","==i?d(e,n):i==t?d():d(y(t))}return function(i){return i==t?d():h(e,n)}}function z(e){return"}"==e?d():h(b,z)}function E(e,t){return"variable"==e?(f(t),d(A)):d()}function A(e,t){return"="==t?d(x,A):","==e?d(E):void 0}function L(e){return"var"==e?d(E,D):";"==e?h(D):"variable"==e?d(N):h(D)}function N(e,t){return"in"==t?d(x):d(w,D)}function D(e,t){return";"==e?d(W):"in"==t?d(x):d(x,y(";"),W)}function W(e){")"!=e&&d(x)}function O(e,t){return"variable"==e?(f(t),d(O)):"("==e?d(g(")"),p,T(H,")"),v,b,m):void 0}function H(e,t){return"variable"==e?(f(t),d()):void 0}var _,j,I=e.indentUnit,U=t.json,B=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),o={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o}}(),V=/[+\-*&%=<>!?|]/,R={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},q={state:null,column:null,marked:null,cc:null},P={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(e){return{tokenize:o,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new s((e||0)-I,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==_?n:(t.reAllowed="operator"==_||"keyword c"==_||_.match(/^[\[{}\(,;:]$/),t.kwAllowed="."!=_,c(t,n,_,j,e))},indent:function(e,t){if(e.tokenize!=o)return 0;var n=t&&t.charAt(0),i=e.lexical,r=i.type,l=n==r;return"vardef"==r?i.indented+4:"form"==r&&"{"==n?i.indented:"stat"==r||"form"==r?i.indented+I:"switch"!=i.info||l?i.align?i.column+(l?0:1):i.indented+(l?0:I):i.indented+(/^(?:case|default)\b/.test(t)?I:2*I)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(o("atom","]]>")):null:e.match("--")?n(o("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(l(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=o("meta","?>"),"meta";y=e.eat("/")?"closeTag":"openTag",e.eatSpace(),v="";for(var a;a=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)v+=a;return t.tokenize=i,"tag"}return"&"==r?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function i(e,t){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(t.tokenize=n,y=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(y="equals",null):/[\'\"]/.test(i)?(t.tokenize=r(i),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function r(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"}}function o(e,t){return function(i,r){for(;!i.eol();){if(i.match(t)){r.tokenize=n;break}i.next()}return e}}function l(e){return function(t,i){for(var r;null!=(r=t.next());){if("<"==r)return i.tokenize=l(e+1),i.tokenize(t,i);if(">"==r){if(1==e){i.tokenize=n;break}return i.tokenize=l(e-1),i.tokenize(t,i)}}return"meta"}}function a(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function s(){return a.apply(null,arguments),!0}function u(e,t){var n=w.doNotIndent.hasOwnProperty(e)||b.context&&b.context.noIndent;b.context={prev:b.context,tagName:e,indent:b.indented,startOfLine:t,noIndent:n}}function c(){b.context&&(b.context=b.context.prev)}function h(e){if("openTag"==e)return b.tagName=v,s(p,d(b.startOfLine));if("closeTag"==e){var t=!1;return t=b.context?b.context.tagName!=v:!0,t&&(x="error"),s(f(t))}return s()}function d(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&w.autoSelfClosers.hasOwnProperty(b.tagName.toLowerCase())?s():"endTag"==t?(u(b.tagName,e),s()):s()}}function f(e){return function(t){return e&&(x="error"),"endTag"==t?(c(),s()):(x="error",s(arguments.callee))}}function p(e){return"word"==e?(x="attribute",s(p)):"equals"==e?s(m,p):"string"==e?(x="error",s(p)):a()}function m(e){return"word"==e&&w.allowUnquoted?(x="string",s()):"string"==e?s(g):a()}function g(e){return"string"==e?s(g):a()}var v,y,b,x,k=e.indentUnit,w=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},C=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;x=y=v=null;var n=t.tokenize(e,t);if(t.type=y,(n||y)&&"comment"!=n)for(b=t;;){var i=t.cc.pop()||h;if(i(y||n))break}return t.startOfLine=!1,x||n},indent:function(e,t,r){var o=e.context;if(e.tokenize!=i&&e.tokenize!=n||o&&o.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(C&&/<!\[CDATA\[/.test(t))return 0;for(o&&/^<\//.test(t)&&(o=o.prev);o&&!o.startOfLine;)o=o.prev;return o?o.indent+k:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,i=t.context;;n=n.prev,i=i.prev){if(!n||!i)return n==i;if(n.tagName!=i.tagName)return!1}},electricChars:"/"}}),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});