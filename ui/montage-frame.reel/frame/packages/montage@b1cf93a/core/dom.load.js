montageDefine("b1cf93a","core/dom",{dependencies:["core/geometry/point"],factory:function(e,t){var n=e("core/geometry/point").Point,i=Node.prototype,s=Element.prototype;Object.defineProperty(s,"set",{value:function(e,t,n){var i,s,r,a,o,l=e.indexOf(".",n);n=n||0,s=e.substring(n,-1===l?e.length:l),-1===l?this.setAttribute(s,t):(r=e.lastIndexOf("."),"style"===s?(a=e.substring(l+1,e.length),this.style[a]=t):"classList"===s?(o=e.substring(l+1,e.length),t?this.classList.add(o):this.classList.remove(o)):(i=this.get(e.substring(0,r)))&&(i[e.substring(r+1,e.length)]=t))},enumerable:!1}),i.get=function(e){return this.getAttribute(e)||this[e]},Object.getPrototypeOf(document).addRule=function(e,t){var n,i;if(null==(n=document.styleSheets[0])){var s=document.createElement("style");s.type="text/css",document.head.appendChild(s),n=document.styleSheets[0]}else i=document.getRule(e,n);i||n.insertRule(e+" "+t,n.cssRules.length)},Object.getPrototypeOf(document).getRule=function(e,t){var n;if(t.cssRules)for(var i=0;n=t.cssRules[i];i++){if(n.name&&n.name===e)return n;if(n.selectorText===e)return n}},"undefined"!=typeof Element&&function(){var e="classList";if(!Element.prototype.hasOwnProperty(e)){var t=/^\s+|\s+$/g,n=function(e,t){e.setAttribute("class",t.join(" "))},i=function(e,t){if(""===t)throw"SYNTAX_ERR";if(/\s/.test(t))throw"INVALID_CHARACTER_ERR";return e.indexOf(t)},s=function(){var e=this,s=e.getAttribute("class")||"";return s=s.replace(t,"").split(/\s+/),{length:s.length,item:function(e){return s[e]||null},contains:function(e){return-1!==i(s,e)},add:function(t){-1===i(s,t)&&(s.push(t),this.length=s.length,n(e,s))},remove:function(t){var r=i(s,t);-1!==r&&(s.splice(r,1),this.length=s.length,n(e,s))},toggle:function(e){-1===i(s,e)?this.add(e):this.remove(e)},toString:function(){return e.getAttribute("class")||""}}};Object.defineProperty?Object.defineProperty(Element.prototype,e,{get:s,enumerable:!0}):Object.prototype.__defineGetter__&&Element.prototype.__defineGetter__(e,s)}}(),i.parentOf=function(e){for(;(e=e.parentNode)&&e!==this;);return e?!0:!1};var r=function(e){var t,n,i,s,r=e.ownerDocument;if(e&&r){if(n=r.documentElement,i=r.body,s=r.defaultView,e!==i){if(t=e.getBoundingClientRect(),n.parentOf(e)){var a=n.clientTop||i.clientTop||0,o=n.clientLeft||i.clientLeft||0,l=s.pageYOffset||n.scrollTop||i.scrollTop,u=s.pageXOffset||n.scrollLeft||i.scrollLeft,h=t.top+l-a,c=t.left+u-o;return{top:h,left:c}}return{top:t.top,left:t.left}}return{top:i.offsetTop,left:i.offsetLeft}}return null},a=null;try{a=new WebKitPoint(0,0)}catch(o){}var l=function(){t.convertPointFromNodeToPage=function(e,t){return t?(a.x=t.x,a.y=t.y):(a.x=0,a.y=0),t=webkitConvertPointFromNodeToPage(e,a),t?(new n).init(t.x,t.y):null},t.convertPointFromPageToNode=function(e,t){return t?(a.x=t.x,a.y=t.y):(a.x=0,a.y=0),t=webkitConvertPointFromPageToNode(e,a),t?(new n).init(t.x,t.y):null}},u=function(){t.convertPointFromNodeToPage=function(e,t){if(!e||e.x!==void 0)return null;var i;return(i=r(e))?(new n).init((t?t.x:0)+i.left,(t?t.y:0)+i.top):(new n).init(t?t.x:0,t?t.y:0)},t.convertPointFromPageToNode=function(e,t){if(!e||e.x!==void 0)return null;var i;return(i=r(e))?(new n).init((t?t.x:0)-i.left,(t?t.y:0)-i.top):(new n).init(t?t.x:0,t?t.y:0)}};a?l():u()}});