var Promise=require("q");(function(t){function e(t,e,n){if(this._reviver=e,this._serialization=t,this._objects=Object.create(null),n){this._userObjects=Object.create(null);for(var a in n)this._userObjects[a]=n[a]}}Object.defineProperties(e.prototype,{_objects:{value:null,writable:!0},_userObjects:{value:null,writable:!0},_serialization:{value:null,writable:!0},_reviver:{value:null,writable:!0},setObjectLabel:{value:function(t,e){this._objects[e]=t}},getObject:{value:function(t){var e,n=this._serialization,a=this._reviver,i=this._objects;return t in i?i[t]:t in n?(e=a.reviveRootObject(n[t],this,t),t in i||(i[t]=e),e):Promise.reject(Error("Object with label '"+t+"' was not found."))}},getObjects:{value:function(){var t,e=this,n=(this._reviver,this._serialization),a=[];for(var i in n)t=this.getObject(i),Promise.isPromise(t)&&a.push(t);return 0===a.length?Promise.resolve(this._invokeDidReviveObjects()):Promise.all(a).then(function(){return e._invokeDidReviveObjects()})}},hasUserObject:{value:function(t){var e=this._userObjects;return e?t in e:!1}},getUserObject:{value:function(t){var e=this._userObjects;return e?e[t]:void 0}},_invokeDidReviveObjects:{value:function(){var t,e=this,n=this._reviver;return"function"==typeof n.didReviveObjects&&(t=n.didReviveObjects(this._objects,this),Promise.isPromise(t))?t.then(function(){return e._objects}):this._objects}}}),t.Context=e})(exports);