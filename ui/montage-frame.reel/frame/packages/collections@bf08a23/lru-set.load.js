montageDefine("bf08a23","lru-set",{dependencies:["./shim","./set","./generic-collection","./generic-set","./listen/property-changes","./listen/range-changes"],factory:function(t,e,n){"use strict";function i(t,e,n,r,s){return this instanceof i?(e=e||1/0,n=n||Object.equals,r=r||Object.hash,s=s||Function.noop,this.store=new a(void 0,n,r),this.contentEquals=n,this.contentHash=r,this.getDefault=s,this.maxLength=e,this.length=0,this.addEach(t),void 0):new i(t,e,n,r,s)}t("./shim");var a=t("./set"),r=t("./generic-collection"),s=t("./generic-set"),o=t("./listen/property-changes"),l=t("./listen/range-changes");n.exports=i,Object.addEach(i.prototype,r.prototype),Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,l.prototype),i.prototype.constructClone=function(t){return new this.constructor(t,this.maxLength,this.contentEquals,this.contentHash,this.getDefault)},i.prototype.has=function(t){return this.store.has(t)},i.prototype.get=function(t){return t=this.store.get(t),void 0!==t?(this.store["delete"](t),this.store.add(t)):t=this.getDefault(t),t},i.prototype.add=function(t){var e=this.store.has(t),n=this.length;if(e&&(this.store["delete"](t),n--),!e&&this.dispachesRangeChanges&&this.dispatchBeforeRangeChange([t],[],0),this.store.add(t),n++,this.length=n,!e&&this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],0),this.store.length>this.maxLength){var i=this.store.order.head.next;return this["delete"](i.value),!1}return!e},i.prototype["delete"]=function(t){var e=this.store.has(t);return e&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],0),this.store["delete"](t),this.length--,this.dispatchesRangeChanges&&this.dispatcheRangeChange([],[t],0)),e},i.prototype.one=function(){return this.length>0?this.store.one():void 0},i.prototype.clear=function(){this.store.clear(),this.length=0},i.prototype.reduce=function(t,e){var n=arguments[2],i=this.store,a=0;return i.reduce(function(e,i){return t.call(n,e,i,a++,this)},e,this)},i.prototype.reduceRight=function(){var t=arguments[2],e=this.store,n=this.length-1;return e.reduceRight(function(e,i){return callback.call(t,e,i,n--,this)},basis,this)},i.prototype.iterate=function(){return this.store.iterate()}}});