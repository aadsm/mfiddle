montageDefine("bf08a23","generic-map",{dependencies:["./shim-object","./listen/map-changes","./listen/property-changes"],factory:function(t,e,n){"use strict";function i(){throw Error("Can't construct. GenericMap is a mixin.")}function a(t,e){this.key=t,this.value=e}var r=t("./shim-object"),s=t("./listen/map-changes"),o=t("./listen/property-changes");n.exports=i,r.addEach(i.prototype,s.prototype),r.addEach(i.prototype,o.prototype),i.prototype.addEach=function(t){return t&&r(t)===t&&("function"==typeof t.forEach?"function"==typeof t.keys?t.forEach(function(t,e){this.set(e,t)},this):t.forEach(function(t){this.set(t[0],t[1])},this):r.keys(t).forEach(function(e){this.set(e,t[e])},this)),this},i.prototype.get=function(t,e){var n=this.store.get(new this.Item(t));return n?n.value:arguments.length>1?e:this.getDefault(t)},i.prototype.set=function(t,e){var n=new this.Item(t,e),i=this.store.get(n),a=!1;return i?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,i.value),i.value=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),this.store.add(n)&&(this.length++,a=!0),this.dispatchesMapChanges&&this.dispatchMapChange(t,e)),a},i.prototype.add=function(t,e){return this.set(e,t)},i.prototype.has=function(t){return this.store.has(new this.Item(t))},i.prototype["delete"]=function(t){var e=new this.Item(t);if(this.store.has(e)){var n=this.store.get(e).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,n),this.store["delete"](e),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0}return!1},i.prototype.clear=function(){var t;this.dispatchesMapChanges&&(this.forEach(function(t,e){this.dispatchBeforeMapChange(e,t)},this),t=this.keys()),this.store.clear(),this.length=0,this.dispatchesMapChanges&&t.forEach(function(t){this.dispatchMapChange(t)},this)},i.prototype.reduce=function(t,e,n){return this.store.reduce(function(e,i){return t.call(n,e,i.value,i.key,this)},e,this)},i.prototype.reduceRight=function(t,e,n){return this.store.reduceRight(function(e,i){return t.call(n,e,i.value,i.key,this)},e,this)},i.prototype.keys=function(){return this.map(function(t,e){return e})},i.prototype.values=function(){return this.map(Function.identity)},i.prototype.entries=function(){return this.map(function(t,e){return[e,t]})},i.prototype.items=function(){return this.entries()},i.prototype.equals=function(t,e){if(e=e||r.equals,this===t)return!0;if(r.can(t,"every"))return t.length===this.length&&t.every(function(t,n){return e(this.get(n),t)},this);var n=r.keys(t);return n.length===this.length&&r.keys(t).every(function(n){return e(this.get(n),t[n])},this)},i.prototype.Item=a,a.prototype.equals=function(t){return r.equals(this.key,t.key)&&r.equals(this.value,t.value)},a.prototype.compare=function(t){return r.compare(this.key,t.key)}}});