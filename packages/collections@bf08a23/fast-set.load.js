montageDefine("bf08a23","fast-set",{dependencies:["./shim","./dict","./list","./generic-collection","./generic-set","./tree-log","./listen/property-changes"],factory:function(t,e,n){"use strict";function i(t,e,n,a){return this instanceof i?(e=e||Object.equals,n=n||Object.hash,a=a||Function.noop,this.contentEquals=e,this.contentHash=n,this.getDefault=a,this.buckets=new this.Buckets(null,this.Bucket),this.length=0,this.addEach(t),void 0):new i(t,e,n,a)}t("./shim");var a=t("./dict"),r=t("./list"),s=t("./generic-collection"),o=t("./generic-set"),l=t("./tree-log"),c=t("./listen/property-changes");Object.prototype.hasOwnProperty,n.exports=i,Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,c.prototype),i.prototype.Buckets=a,i.prototype.Bucket=r,i.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},i.prototype.has=function(t){var e=this.contentHash(t);return this.buckets.get(e).has(t)},i.prototype.get=function(t){var e=this.contentHash(t),n=this.buckets;return n.has(e)?n.get(e).get(t):this.getDefault(t)},i.prototype["delete"]=function(t){var e=this.contentHash(t),n=this.buckets;if(n.has(e)){var i=n.get(e);if(i["delete"](t))return this.length--,0===i.length&&n["delete"](e),!0}return!1},i.prototype.clear=function(){this.buckets.clear(),this.length=0},i.prototype.add=function(t){var e=this.contentHash(t),n=this.buckets;return n.has(e)||n.set(e,new this.Bucket(null,this.contentEquals)),n.get(e).has(t)?!1:(n.get(e).add(t),this.length++,!0)},i.prototype.reduce=function(t,e){var n=arguments[2],i=this.buckets,a=0;return i.reduce(function(e,i){return i.reduce(function(e,i){return t.call(n,e,i,a++,this)},e,this)},e,this)},i.prototype.one=function(){return this.length>0?this.buckets.one().one():void 0},i.prototype.iterate=function(){return this.buckets.values().flatten().iterate()},i.prototype.log=function(t,e,n,i){t=t||l.unicodeSharp,e=e||this.logNode,n||(n=console.log,i=console),n=n.bind(i);var a=this.buckets,r=a.keys();r.forEach(function(s,o){var l,c;o===r.length-1?(l=t.fromAbove,c=" "):0===o?(l=t.branchDown,c=t.strafe):(l=t.fromBoth,c=t.strafe);var u=a.get(s);n.call(i,l+t.through+t.branchDown+" "+s),u.forEach(function(a,r){var s,o;r===u.head.prev?(s=t.fromAbove,o=" "):(s=t.fromBoth,o=t.strafe);var l;e(r,function(e){l?n.call(i,c+" "+o+"  "+e):(n.call(i,c+" "+s+t.through+t.through+e),l=!0)},function(e){n.call(i,c+" "+t.strafe+"  "+e)})})})},i.prototype.logNode=function(t,e){var n=t.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+n)}}});