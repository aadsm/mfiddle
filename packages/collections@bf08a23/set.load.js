montageDefine("bf08a23","set",{dependencies:["./shim","./list","./fast-set","./generic-collection","./generic-set","./listen/property-changes","./listen/range-changes"],factory:function(t,e,n){"use strict";function i(t,e,n,a){return this instanceof i?(e=e||Object.equals,n=n||Object.hash,a=a||Function.noop,this.contentEquals=e,this.contentHash=n,this.getDefault=a,this.order=new this.Order(void 0,e),this.store=new this.Store(void 0,function(t,n){return e(t.value,n.value)},function(t){return n(t.value)}),this.length=0,this.addEach(t),void 0):new i(t,e,n,a)}t("./shim");var a=t("./list"),r=t("./fast-set"),s=t("./generic-collection"),o=t("./generic-set"),l=t("./listen/property-changes"),c=t("./listen/range-changes");n.exports=i,Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,l.prototype),Object.addEach(i.prototype,c.prototype),i.prototype.Order=a,i.prototype.Store=r,i.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},i.prototype.has=function(t){var e=new this.order.Node(t);return this.store.has(e)},i.prototype.get=function(t){var e=new this.order.Node(t);return e=this.store.get(e),e?e.value:this.getDefault(t)},i.prototype.add=function(t){var e=new this.order.Node(t);return this.store.has(e)?!1:(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([t],[],0),this.order.add(t),e=this.order.head.prev,this.store.add(e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],0),!0)},i.prototype["delete"]=function(t){var e=new this.order.Node(t);if(this.store.has(e)){this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],0);var e=this.store.get(e);return this.store["delete"](e),e["delete"](),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[t],0),!0}return!1},i.prototype.pop=function(){if(this.length){var t=this.order.head.prev.value;return this["delete"](t),t}},i.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this["delete"](t),t}},i.prototype.one=function(){return this.length>0?this.store.one().value:void 0},i.prototype.clear=function(){var t;this.dispatchesRangeChanges&&(t=this.toArray(),this.dispatchBeforeRangeChange([],t,0)),this.store.clear(),this.order.clear(),this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange([],t,0)},i.prototype.reduce=function(t,e){var n=arguments[2],i=this.order,a=0;return i.reduce(function(e,i){return t.call(n,e,i,a++,this)},e,this)},i.prototype.reduceRight=function(t,e){var n=arguments[2],i=this.order,a=this.length-1;return i.reduceRight(function(e,i){return t.call(n,e,i,a--,this)},e,this)},i.prototype.iterate=function(){return this.order.iterate()},i.prototype.log=function(){var t=this.store;return t.log.apply(t,arguments)}}});