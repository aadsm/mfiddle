(function(e){if("undefined"!=typeof bootstrap)"undefined"!=typeof window?bootstrap("require",function(t,n){var i=t("promise"),a=t("mini-url");e(n,i,a),t("require/browser")}):bootstrap("require",function(t,n){var i=t("promise").Promise,a=t("mini-url");e(n,i,a)});else{if("undefined"==typeof process)throw Error("Can't support require on this platform");var t=require("q"),n=require("url");e(exports,t,n),require("./node")}})(function(e,t,n){function i(t,i){if(i=i||{},"string"==typeof t&&(t={location:t}),t.main&&(t.location=i.mainPackageLocation),t.name&&i.registry&&i.registry[t.name]&&(t.location=i.registry[t.name]),!t.location&&i.packagesDirectory&&t.name&&(t.location=n.resolve(i.packagesDirectory,t.name+"/")),!t.location)return t;if(/\/$/.test(t.location)||(t.location+="/"),!e.isAbsolute(t.location)){if(!i.location)throw Error("Dependency locations must be fully qualified: "+JSON.stringify(t));t.location=n.resolve(i.location,t.location)}return t.name&&(i.registry[t.name]=t.location),t}function a(t,a,r){/\/$/.test(t)||(t+="/");var s=Object.create(r);s.name=a.name,s.location=t||e.getLocation(),s.packageDescription=a,s.useScriptInjection=a.useScriptInjection,void 0!==a.production&&(s.production=a.production);var l=s.modules=s.modules||{},c=s.registry;void 0===s.name||c[s.name]||(c[s.name]=s.location);var u=a.overlay||{};(s.overlays||e.overlays).forEach(function(e){if(u[e]){var t=u[e];for(var n in t)a[n]=t[n]}}),delete a.overlay,a.directories=a.directories||{},a.directories.lib=void 0===a.directories.lib?"./":a.directories.lib;var h=a.directories.lib;s.lib=n.resolve(t,"./"+h);var d=a.directories.packages||"node_modules";d=n.resolve(t,d+"/"),s.packagesDirectory=d,void 0!==a.main&&(l[""]={id:"",redirect:o(a.main),location:s.location},a.name!==l[""].redirect&&(l[a.name]={id:a.name,redirect:"",location:n.resolve(t,a.name)}));var p=a.redirects;void 0!==p&&Object.keys(p).forEach(function(e){l[e]={id:e,redirect:p[e],location:n.resolve(t,e)}});var g=a.mappings||{};return[a.dependencies,s.production?null:a.devDependencies].forEach(function(e){e&&Object.keys(e).forEach(function(t){g[t]||(g[t]={name:t,version:e[t]})})}),Object.keys(g).forEach(function(e){g[e]=i(g[e],s,e)}),s.mappings=g,s}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){e+="";var n=e.split("/"),i=[];if(n.length&&"."===n[0]||".."===n[0]){var a=t.split("/");a.pop(),n.unshift.apply(n,a)}for(var r=0,s=n.length;s>r;r++){var o=n[r];""===o||"."===o||(".."===o?i.length&&i.pop():i.push(o))}return i.join("/")}if(!this)throw Error("Require does not work in strict mode.");e.makeRequire=function(a){function c(e){var t=e.toLowerCase();return r(f,t)||(f[t]={id:e,display:(a.name||a.location)+"#"+e,require:m}),f[t]}function u(e,t){var i=c(e);i.exports=t,i.location=n.resolve(a.location,e),i.directory=n.resolve(i.location,"./"),i.injected=!0,delete i.redirect,delete i.mappingRedirect}function h(e,n,i){var a=c(e);return i=i||{},r(i,e)?void 0:(i[e]=!0,v(e,n).then(function(){return t.all(a.dependencies.map(function(t){t=s(t,e);var n=c(t),a=n.dependees=n.dependees||{};return a[e]=!0,h(t,e,i)}))},function(e){a.error=e}))}function d(e,t){var i=c(e);if(i.id!==e)throw Error("Can't require module "+JSON.stringify(i.id)+" by alternate spelling "+JSON.stringify(e));if(i.error){var a=Error("Can't require module "+JSON.stringify(i.id)+" via "+JSON.stringify(t)+" because "+i.error.message);throw a.cause=i.error,a}if(void 0!==i.redirect)return d(i.redirect,t);if(void 0!==i.mappingRedirect)return i.mappingRequire(i.mappingRedirect,t);if(void 0!==i.exports)return i.exports;if(void 0===i.factory)throw Error("Can't require module "+JSON.stringify(e)+" via "+JSON.stringify(t));i.directory=n.resolve(i.location,"./"),i.exports={};var r=i.factory.call(void 0,g(e),i.exports,i);return void 0!==r&&(i.exports=r),i.exports}function p(e,t,n){if(t.location===a.location)return e;for(var i in a.mappings){var r=a.mappings[i],s=r.location;if(a.hasPackage(s)){var o=a.getPackage(s),l=o.identify(e,t,!0);if(null!==l)return""===l?i:i+"/"+l}}if(n)return null;throw Error("Can't identify "+e+" from "+t.location)}function g(t){var n=function(e){var n=s(e,t);return d(n,t)};return n.async=function(e){var i=s(e,t);return c(e),h(i,t).then(function(){return n(i)})},n.resolve=function(e){return o(s(e,t))},n.getModule=c,n.getModuleDescriptor=c,n.load=v,n.deepLoad=h,n.loadPackage=function(t,n){return n?e.loadPackage(t,n):a.loadPackage(t,a)},n.hasPackage=function(e){return a.hasPackage(e)},n.getPackage=function(e){return a.getPackage(e)},n.isMainPackage=function(){return n.location===a.mainPackageLocation},n.injectPackageDescription=function(t,n){e.injectPackageDescription(t,n,a)},n.injectPackageDescriptionLocation=function(t,n){e.injectPackageDescriptionLocation(t,n,a)},n.injectMapping=function(e,t){e=i(e,a,t),t=t||e.name,a.mappings[t]=e},n.injectDependency=function(e){n.injectMapping({name:e},e)},n.identify=p,n.inject=u,a.exposedConfigs.forEach(function(e){n[e]=a[e]}),n.config=a,n.read=e.read,n}var m;a=a||{},a.location=n.resolve(a.location||e.getLocation(),"./"),a.lib=n.resolve(a.location,a.lib||"./"),a.paths=a.paths||[a.lib],a.mappings=a.mappings||{},a.exposedConfigs=a.exposedConfigs||e.exposedConfigs,a.makeLoader=a.makeLoader||e.makeLoader,a.load=a.load||a.makeLoader(a),a.makeCompiler=a.makeCompiler||e.makeCompiler,a.compile=a.compile||a.makeCompiler(a),a.parseDependencies=a.parseDependencies||e.parseDependencies,a.read=a.read||e.read;var f=a.modules=a.modules||{},v=l(function(e){var n=c(e);return t.fcall(function(){return void 0===n.factory&&void 0===n.exports&&void 0===n.redirect?t.fcall(a.load,e,n):void 0}).then(function(){a.compile(n);var e=n.dependencies=n.dependencies||[];void 0!==n.redirect&&e.push(n.redirect),void 0!==n.extraDependencies&&Array.prototype.push.apply(n.dependencies,n.extraDependencies)})});return m=g("")},e.injectPackageDescription=function(e,n,i){var a=i.descriptions=i.descriptions||{};a[e]=t.resolve(n)},e.injectPackageDescriptionLocation=function(e,t,n){var i=n.descriptionLocations=n.descriptionLocations||{};i[e]=t},e.loadPackageDescription=function(t,i){var a=t.location,r=i.descriptions=i.descriptions||{};if(void 0===r[a]){var s,o=i.descriptionLocations=i.descriptionLocations||{};s=o[a]?o[a]:n.resolve(a,"package.json"),r[a]=e.read(s).then(function(e){try{return JSON.parse(e)}catch(t){throw t.message=t.message+" in "+JSON.stringify(s),t}})}return r[a]},e.loadPackage=function(t,n){if(t=i(t,n),!t.location)throw Error("Can't find dependency: "+JSON.stringify(t));var r=t.location;n=Object.create(n||null);var s=n.loadingPackages=n.loadingPackages||{},o=n.packages={};n.registry=n.registry||Object.create(null),n.mainPackageLocation=r,n.hasPackage=function(e){if(e=i(e,n),!e.location)return!1;var t=e.location;return!!o[t]},n.getPackage=function(e){if(e=i(e,n),!e.location)throw Error("Can't find dependency: "+JSON.stringify(e)+" from "+n.location);var t=e.location;if(!o[t])throw s[t]?Error("Dependency has not finished loading: "+JSON.stringify(e)):Error("Dependency was not loaded: "+JSON.stringify(e));return o[t]},n.loadPackage=function(t,r){if(t=i(t,r),!t.location)throw Error("Can't find dependency: "+JSON.stringify(t)+" from "+n.location);var l=t.location;return s[l]||(s[l]=e.loadPackageDescription(t,n).then(function(t){var i=a(l,t,n),r=e.makeRequire(i);return o[l]=r,r})),s[l]};var l=n.loadPackage(t);return l.location=r,l.async=function(e,t){return l.then(function(n){return n.async(e,t)})},l},e.resolve=s,e.base=function(e){return(e+"").replace(/(.+?)\/+$/,"$1").match(/([^\/]+$|^\/$|^$)/)[1]},e.isAbsolute=function(e){return/^[\w\-]+:/.test(e)},e.parseDependencies=function(e){var t={};return(e+"").replace(/(?:^|[^\w\$_.])require\s*\(\s*["']([^"']*)["']\s*\)/g,function(e,n){t[n]=!0}),Object.keys(t)},e.DependenciesCompiler=function(t,n){return function(i){return i.dependencies||void 0===i.text||(i.dependencies=t.parseDependencies(i.text)),n(i),i&&!i.dependencies&&(i.dependencies=i.text||i.factory?e.parseDependencies(i.text||i.factory):[]),i}},e.ShebangCompiler=function(e,t){return function(e){e.text&&(e.text=e.text.replace(/^#!/,"//#!")),t(e)}},e.LintCompiler=function(e,n){return function(i){try{n(i)}catch(a){throw e.lint&&t.nextTick(function(){e.lint(i)}),a}}},e.exposedConfigs=["paths","mappings","location","packageDescription","packages","modules"],e.makeCompiler=function(t){return e.JsonCompiler(t,e.ShebangCompiler(t,e.DependenciesCompiler(t,e.LintCompiler(t,e.Compiler(t)))))},e.JsonCompiler=function(e,t){return function(e){var n=(e.location||"").match(/\.json$/);return n?(e.exports=JSON.parse(e.text),e):t(e)}},e.MappingsLoader=function(t,n){return t.mappings=t.mappings||{},t.name=t.name,function(i,a){var r=t.mappings,s=Object.keys(r),o=s.length;if(e.isAbsolute(i))return n(i,a);void 0!==t.name&&0===i.indexOf(t.name)&&"/"===i.charAt(t.name.length)&&console.warn("Package reflexive module ignored:",i);var l,c;for(l=0;o>l;l++)if(c=s[l],i===c||0===i.indexOf(c)&&"/"===i.charAt(c.length)){var u=r[c],h=i.slice(c.length+1);return t.loadPackage(u,t).then(function(e){return a.mappingRedirect=h,a.mappingRequire=e,e.deepLoad(h,t.location)})}return n(i,a)}},e.ExtensionsLoader=function(t,n){var i=t.extensions||["js"],a=i.reduceRight(function(e,t){return function(i,a){return n(i+"."+t,a).fail(function(t){if(/^Can't find /.test(t.message))return e(i,a);throw t})}},function(e){throw Error("Can't find "+JSON.stringify(e)+" with extensions "+JSON.stringify(i)+" in package at "+JSON.stringify(t.location))});return function(t,i){return-1!==e.base(t).indexOf(".")?n(t,i):a(t,i)}},e.PathsLoader=function(t,i){var a=t.paths.reduceRight(function(e,t){return function(a,r){var s=n.resolve(t,a);return i(s,r).fail(function(t){if(/^Can't find /.test(t.message))return e(a,r);throw t})}},function(e){throw Error("Can't find "+JSON.stringify(e)+" from paths "+JSON.stringify(t.paths)+" in package at "+JSON.stringify(t.location))});return function(t,n){return e.isAbsolute(t)?i(t,n):a(t,n)}},e.MemoizedLoader=function(e,t){var n=e.cache=e.cache||{};return l(t,n)};var o=function(e){var t=/^(.*)\.js$/.exec(e);return t&&(e=t[1]),e},l=function(e,n){return n=n||{},function(i,a){return r(n,i)||(n[i]=t.fcall(e,i,a)),n[i]}}});