montageDefine("9a2d78b","lib/FeedHandler",{dependencies:["./index.js","util"],factory:function(t,e,n){function i(t){this.init(t,{ignoreWhitespace:!0})}function a(t,e){return c.getElementsByTagName(t,e,!0)}function r(t,e){return c.getElementsByTagName(t,e,!0,1)[0]}function s(t,e,n){return c.getText(c.getElementsByTagName(t,e,n,1))}var o=t("./index.js"),l=o.DomHandler,c=o.DomUtils;t("util").inherits(i,l),i.prototype.init=l;var h=function(t){return"rss"===t||"feed"===t||"rdf:RDF"===t};i.prototype.onend=function(){var t,e,n={},i=r(h,this.dom);i&&("feed"===i.name?(e=i.children,n.type="atom",(t=s("id",e))&&(n.id=t),(t=s("title",e))&&(n.title=t),(t=r("link",e))&&(t=t.attribs)&&(t=t.href)&&(n.link=t),(t=s("subtitle",e))&&(n.description=t),(t=s("updated",e))&&(n.updated=new Date(t)),(t=s("email",e,!0))&&(n.author=t),n.items=a("entry",e).map(function(t){var e,n={};return t=t.children,(e=s("id",t))&&(n.id=e),(e=s("title",t))&&(n.title=e),(e=r("link",t))&&(e=e.attribs)&&(e=e.href)&&(n.link=e),(e=s("summary",t))&&(n.description=e),(e=s("updated",t))&&(n.pubDate=new Date(e)),n})):(e=r("channel",i.children).children,n.type=i.name.substr(0,3),n.id="",(t=s("title",e))&&(n.title=t),(t=s("link",e))&&(n.link=t),(t=s("description",e))&&(n.description=t),(t=s("lastBuildDate",e))&&(n.updated=new Date(t)),(t=s("managingEditor",e))&&(n.author=t),n.items=a("item",i.children).map(function(t){var e,n={};return t=t.children,(e=s("guid",t))&&(n.id=e),(e=s("title",t))&&(n.title=e),(e=s("link",t))&&(n.link=e),(e=s("description",t))&&(n.description=e),(e=s("pubDate",t))&&(n.pubDate=new Date(e)),n}))),this.dom=n,l.prototype._handleCallback.call(this,i?null:Error("couldn't find root of feed"))},n.exports=i}});