montageDefine("8775e1b","ui/code-mirror.reel/codemirror/codemirror-min",{dependencies:[],factory:function(e,t){var n=t.CodeMirror=function(){function e(a,c){function v(e){return e>=0&&Jn.size>e}function L(e){return d(Jn,e)}function z(e,t){li=!0;for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function S(e){var t={line:0,ch:0};st(t,{line:Jn.size-1,ch:L(Jn.size-1).text.length},K(e),t,t),ni=!0}function R(){var e=[];return Jn.iter(0,Jn.size,function(t){e.push(t.text)}),e.join("\n")}function N(e){function t(e){var n=fn(e,!0);if(n&&!T(n,s)){Gn||rt(),s=n,Ot(i,n),ni=!1;var r=xt();(n.line>=r.to||n.line<r.from)&&(a=setTimeout(Sn(function(){t(e)}),150))}}Tt(e.shiftKey);for(var n=C(e);n!=Pn;n=n.parentNode)if(n.parentNode==jn&&n!=In)return;for(var n=C(e);n!=Pn;n=n.parentNode)if(n.parentNode==Nn)return En.onGutterClick&&En.onGutterClick(Ci,A(Nn.childNodes,n)+mi,e),y(e);var i=fn(e);switch(w(e)){case 3:return H&&!I&&vn(e),void 0;case 2:return i&&Bt(i.line,i.ch,!0),void 0}if(!i)return C(e)==An&&y(e),void 0;Gn||rt();var r=+new Date;if(ei&&ei.time>r-400&&T(ei.pos,i))return y(e),setTimeout(Lt,20),Wt(i.line);if(Qn&&Qn.time>r-400&&T(Qn.pos,i))return ei={time:r,pos:i},y(e),qt(i);Qn={time:r,pos:i};var a,s=i;if(V&&!T(di.from,di.to)&&!O(i,di.from)&&!O(di.to,i)){Y&&(Fn.draggable=!0);var o=x(On,"mouseup",Sn(function(t){Y&&(Fn.draggable=!1),ti=!1,o(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(y(t),Bt(i.line,i.ch,!0),Lt())}),!0);return ti=!0,void 0}y(e),Bt(i.line,i.ch,!0);var l=x(On,"mousemove",Sn(function(e){clearTimeout(a),y(e),t(e)}),!0),o=x(On,"mouseup",Sn(function(e){clearTimeout(a);var t=fn(e);t&&Ot(i,t),y(e),Lt(),ni=!0,l(),o()}),!0)}function X(e){for(var t=C(e);t!=Pn;t=t.parentNode)if(t.parentNode==Nn)return y(e);var n=fn(e);n&&(ei={time:+new Date,pos:n},y(e),qt(n))}function $(e){function t(e,t){var i=new FileReader;i.onload=function(){a[t]=i.result,++s==r&&(n=jt(n),Sn(function(){var e=ht(a.join(""),n,n);Ot(n,e)})())},i.readAsText(e)}e.preventDefault();var n=fn(e,!0),i=e.dataTransfer.files;if(n&&!En.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,a=Array(r),s=0,o=0;r>o;++o)t(i[o],o);else try{var a=e.dataTransfer.getData("Text");if(a){var l=ht(a,n,n),c=di.from,u=di.to;Ot(n,l),ti&&ht("",c,u),Lt()}}catch(e){}}function Q(e){var t=mt();D(t),e.dataTransfer.setDragImage(G,0,0),e.dataTransfer.setData("Text",t)}function et(e){var i,r,a=J[e.keyCode],s=W[En.keyMap].auto;if(null==a||e.altGraphKey)return s&&(En.keyMap=s),null;if(e.altKey&&(a="Alt-"+a),e.ctrlKey&&(a="Ctrl-"+a),e.metaKey&&(a="Cmd-"+a),e.shiftKey&&(i=t("Shift-"+a,En.extraKeys,En.keyMap))?r=!0:i=t(a,En.extraKeys,En.keyMap),"string"==typeof i&&(i=q.propertyIsEnumerable(i)?q[i]:null),s&&(i||!n(e))&&(En.keyMap=s),!i)return!1;if(r){var o=$n;$n=null,i(Ci),$n=o}else i(Ci);return y(e),!0}function tt(e){Gn||rt();var t=e.keyCode;if(U&&27==t&&(e.returnValue=!1),Tt(16==t||e.shiftKey),!En.onKeyEvent||!En.onKeyEvent(Ci,b(e))){var n=et(e);window.opera&&(wi=n?e.keyCode:null,!n&&(I?e.metaKey:e.ctrlKey)&&88==e.keyCode&&dt(""))}}function nt(e){if(window.opera&&e.keyCode==wi)return wi=null,y(e),void 0;if(!(En.onKeyEvent&&En.onKeyEvent(Ci,b(e))||window.opera&&!e.which&&et(e))){if(En.electricChars&&Yn.electricChars){var t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);Yn.electricChars.indexOf(t)>-1&&setTimeout(Sn(function(){Ht(di.to.line,"smart")}),75)}vt()}}function it(e){En.onKeyEvent&&En.onKeyEvent(Ci,b(e))||16==e.keyCode&&($n=null)}function rt(){En.readOnly||(Gn||(En.onFocus&&En.onFocus(Ci),Gn=!0,-1==Pn.className.search(/\bCodeMirror-focused\b/)&&(Pn.className+=" CodeMirror-focused"),oi||yt(!0)),ft(),bn())}function at(){Gn&&(En.onBlur&&En.onBlur(Ci),Gn=!1,Pn.className=Pn.className.replace(" CodeMirror-focused","")),clearInterval(Un),setTimeout(function(){Gn||($n=null)},150)}function st(e,t,n,i,r){if(Li){var a=[];for(Jn.iter(e.line,t.line+1,function(e){a.push(e.text)}),Li.addChange(e.line,n.length,a);Li.done.length>En.undoDepth;)Li.done.shift()}ut(e,t,n,i,r)}function ot(e,t){var n=e.pop();if(n){var i=[],r=n.start+n.added;Jn.iter(n.start,r,function(e){i.push(e.text)}),t.push({start:n.start,added:n.old.length,old:i});var a=jt({line:n.start+n.old.length-1,ch:B(i[i.length-1],n.old[n.old.length-1])});ut({line:n.start,ch:0},{line:r-1,ch:L(r-1).text.length},n.old,a,a),ni=!0}}function lt(){ot(Li.done,Li.undone)}function ct(){ot(Li.undone,Li.done)}function ut(e,t,n,i,r){function a(e){return Math.min(t.line,t.line+b)>=e?e:e+b}var s=!1,o=bi.length;En.lineWrapping||Jn.iter(e.line,t.line,function(e){return e.text.length==o?(s=!0,!0):void 0}),(e.line!=t.line||n.length>1)&&(li=!0);var c=t.line-e.line,u=L(e.line),h=L(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var d=[],p=null;e.line?(p=L(e.line-1),p.fixMarkEnds(h)):h.fixMarkStarts();for(var g=0,m=n.length-1;m>g;++g)d.push(l.inheritMarks(n[g],p));c&&Jn.remove(e.line,c,ci),d.length&&Jn.insert(e.line,d)}else if(u==h)if(1==n.length)u.replace(e.ch,t.ch,n[0]);else{h=u.split(t.ch,n[n.length-1]),u.replace(e.ch,null,n[0]),u.fixMarkEnds(h);for(var d=[],g=1,m=n.length-1;m>g;++g)d.push(l.inheritMarks(n[g],u));d.push(h),Jn.insert(e.line+1,d)}else if(1==n.length)u.replace(e.ch,null,n[0]),h.replace(null,t.ch,""),u.append(h),Jn.remove(e.line+1,c,ci);else{var d=[];u.replace(e.ch,null,n[0]),h.replace(null,t.ch,n[n.length-1]),u.fixMarkEnds(h);for(var g=1,m=n.length-1;m>g;++g)d.push(l.inheritMarks(n[g],u));c>1&&Jn.remove(e.line+1,c-1,ci),Jn.insert(e.line+1,d)}if(En.lineWrapping){var f=An.clientWidth/pn()-3;Jn.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/f)||1;t!=e.height&&z(e,t)}})}else Jn.iter(e.line,g+n.length,function(e){var t=e.text;t.length>o&&(bi=t,o=t.length,hi=null,s=!1)}),s&&(o=0,bi="",hi=null,Jn.iter(0,Jn.size,function(e){var t=e.text;t.length>o&&(o=t.length,bi=t)}));for(var v=[],b=n.length-c-1,g=0,y=Xn.length;y>g;++g){var _=Xn[g];e.line>_?v.push(_):_>t.line&&v.push(_+b)}var C=e.line+Math.min(n.length,500);Cn(e.line,C),v.push(C),Xn=v,xn(100),ri.push({from:e.line,to:t.line+1,diff:b});var w={from:e,to:t,text:n};if(ai){for(var x=ai;x.next;x=x.next);x.next=w}else ai=w;Pt(i,r,a(di.from.line),a(di.to.line)),jn.style.height=Jn.height*dn()+2*gn()+"px"}function ht(e,t,n){function i(i){if(O(i,t))return i;if(!O(n,i))return r;var a=i.line+e.length-(n.line-t.line)-1,s=i.ch;return i.line==n.line&&(s+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:a,ch:s}}t=jt(t),n=n?jt(n):t,e=K(e);var r;return pt(e,t,n,function(e){return r=e,{from:i(di.from),to:i(di.to)}}),r}function dt(e,t){pt(K(e),di.from,di.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:di.from,to:di.from}:{from:di.from,to:e}})}function pt(e,t,n,i){var r=1==e.length?e[0].length+t.ch:e[e.length-1].length,a=i({line:t.line+e.length-1,ch:r});st(t,n,e,a.from,a.to)}function gt(e,t){var n=e.line,i=t.line;if(n==i)return L(n).text.slice(e.ch,t.ch);var r=[L(n).text.slice(e.ch)];return Jn.iter(n+1,i,function(e){r.push(e.text)}),r.push(L(i).text.slice(0,t.ch)),r.join("\n")}function mt(){return gt(di.from,di.to)}function ft(){xi||Kn.set(En.pollInterval,function(){Mn(),bt(),Gn&&ft(),zn()})}function vt(){function e(){Mn();var n=bt();n||t?(xi=!1,ft()):(t=!0,Kn.set(60,e)),zn()}var t=!1;xi=!0,Kn.set(20,e)}function bt(){if(oi||!Gn||Z(Bn))return!1;var e=Bn.value;if(e==Mi)return!1;$n=null;for(var t=0,n=Math.min(Mi.length,e.length);n>t&&Mi[t]==e[t];)++t;return Mi.length>t?di.from={line:di.from.line,ch:di.from.ch-(Mi.length-t)}:pi&&T(di.from,di.to)&&(di.to={line:di.to.line,ch:Math.min(L(di.to.line).text.length,di.to.ch+(e.length-t))}),dt(e.slice(t),"end"),Mi=e,!0}function yt(e){T(di.from,di.to)?e&&(Mi=Bn.value=""):(Mi="",Bn.value=mt(),Bn.select())}function Lt(){En.readOnly||Bn.focus()}function _t(){if(Wn.getBoundingClientRect){var e=Wn.getBoundingClientRect();if(!U||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&Wn.scrollIntoView()}}}function Ct(){var e=cn(di.inverted?di.from:di.to),t=En.lineWrapping?Math.min(e.x,Fn.offsetWidth):e.x;return wt(t,e.y,t,e.yBot)}function wt(e,t,n,i){var r=mn(),a=gn(),s=dn();t+=a,i+=a,e+=r,n+=r;var o=An.clientHeight,l=An.scrollTop,c=!1,u=!0;l>t?(An.scrollTop=Math.max(0,t-2*s),c=!0):i>l+o&&(An.scrollTop=i+s-o,c=!0);var h=An.clientWidth,d=An.scrollLeft,p=En.fixedGutter?Rn.clientWidth:0;return d+p>e?(50>e&&(e=0),An.scrollLeft=Math.max(0,e-10-p),c=!0):n>h+d-3&&(An.scrollLeft=n+10-h,c=!0,n>jn.clientWidth&&(u=!1)),c&&En.onScroll&&En.onScroll(Ci),u}function xt(){var e=dn(),t=An.scrollTop-gn(),n=Math.max(0,Math.floor(t/e)),i=Math.ceil((t+An.clientHeight)/e);return{from:g(Jn,n),to:g(Jn,i)}}function Mt(e,t){if(!An.clientWidth)return mi=fi=gi=0,void 0;var n=xt();if(!(e!==!0&&0==e.length&&n.from>=mi&&fi>=n.to)){var i=Math.max(n.from-100,0),r=Math.min(Jn.size,n.to+100);i>mi&&20>i-mi&&(i=mi),fi>r&&20>fi-r&&(r=Math.min(Jn.size,fi));for(var a=e===!0?[]:zt([{from:mi,to:fi,domStart:0}],e),s=0,o=0;a.length>o;++o){var l=a[o];i>l.from&&(l.domStart+=i-l.from,l.from=i),l.to>r&&(l.to=r),l.from>=l.to?a.splice(o--,1):s+=l.to-l.from}if(s!=r-i){a.sort(function(e,t){return e.domStart-t.domStart});var c=dn(),u=Rn.style.display;Vn.style.display=Rn.style.display="none",St(i,r,a),Vn.style.display="";var h=i!=mi||r!=fi||vi!=An.clientHeight+c;if(h&&(vi=An.clientHeight+c),mi=i,fi=r,gi=m(Jn,i),In.style.top=gi*c+"px",jn.style.height=Jn.height*c+2*gn()+"px",Vn.childNodes.length!=fi-mi)throw Error("BAD PATCH! "+JSON.stringify(a)+" size="+(fi-mi)+" nodes="+Vn.childNodes.length);if(En.lineWrapping){hi=An.clientWidth;var d=Vn.firstChild;Jn.iter(mi,fi,function(e){if(!e.hidden){var t=Math.round(d.offsetHeight/c)||1;e.height!=t&&(z(e,t),li=!0)}d=d.nextSibling})}else null==hi&&(hi=on(bi)),hi>An.clientWidth?(Fn.style.width=hi+"px",jn.style.width="",jn.style.width=An.scrollWidth+"px"):Fn.style.width=jn.style.width="";return Rn.style.display=u,(h||li)&&Et(),kt(),!t&&En.onUpdate&&En.onUpdate(Ci),!0}}}function zt(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],a=[],s=r.diff||0,o=0,l=e.length;l>o;++o){var c=e[o];r.to<=c.from&&r.diff?a.push({from:c.from+s,to:c.to+s,domStart:c.domStart}):r.to<=c.from||r.from>=c.to?a.push(c):(r.from>c.from&&a.push({from:c.from,to:r.from,domStart:c.domStart}),r.to<c.to&&a.push({from:r.to+s,to:c.to+s,domStart:c.domStart+(r.to-c.from)}))}e=a}return e}function St(e,t,n){function i(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var r=0,a=Vn.firstChild,s=0;n.length>s;++s){for(var o=n[s];o.domStart>r;)a=i(a),r++;for(var l=0,c=o.to-o.from;c>l;++l)a=a.nextSibling,r++}for(;a;)a=i(a)}else Vn.innerHTML="";var u=n.shift(),a=Vn.firstChild,l=e,h=di.from.line,d=di.to.line,p=e>h&&d>=e,g=On.createElement("div");Jn.iter(e,t,function(e){var t=null,i=null;p?(t=0,d==l&&(p=!1,i=di.to.ch)):h==l&&(d==l?(t=di.from.ch,i=di.to.ch):(p=!0,t=di.from.ch)),u&&u.to==l&&(u=n.shift()),!u||u.from>l?(g.innerHTML=e.hidden?"<pre></pre>":e.getHTML(t,i,!0,yi),Vn.insertBefore(g.firstChild,a)):a=a.nextSibling,++l})}function Et(){if(En.gutter||En.lineNumbers){var e=In.offsetHeight,t=An.clientHeight;Rn.style.height=(2>e-t?t:e)+"px";var n=[],i=mi;Jn.iter(mi,Math.max(fi,mi+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,r=En.lineNumbers?i+En.firstLineNumber:null;t&&t.text?r=t.text.replace("%N%",null!=r?r:""):null==r&&(r=" "),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",r);for(var a=1;e.height>a;++a)n.push("<br/>&#160;");n.push("</pre>")}++i}),Rn.style.display="none",Nn.innerHTML=n.join("");for(var r=(Jn.size+"").length,a=Nn.firstChild,s=k(a),o="";r>s.length+o.length;)o+=" ";o&&a.insertBefore(On.createTextNode(o),a.firstChild),Rn.style.display="",Fn.style.marginLeft=Rn.offsetWidth+"px",li=!1}}function kt(){var e=di.inverted?di.from:di.to,t=(dn(),cn(e,!0)),n=E(Pn),i=E(Vn);Dn.style.top=t.y+i.top-n.top+"px",Dn.style.left=t.x+i.left-n.left+"px",T(di.from,di.to)?(Wn.style.top=t.y+"px",Wn.style.left=(En.lineWrapping?Math.min(t.x,Fn.offsetWidth):t.x)+"px",Wn.style.display=""):Wn.style.display="none"}function Tt(e){$n=e?$n||(di.inverted?di.to:di.from):null}function Ot(e,t){var n=$n&&jt($n);n&&(O(n,e)?e=n:O(t,n)&&(t=n)),Pt(e,t),ii=!0}function Pt(e,t,n,i){if(zi=null,null==n&&(n=di.from.line,i=di.to.line),!T(di.from,e)||!T(di.to,t)){if(O(t,e)){var r=t;t=e,e=r}e.line!=n&&(e=Dt(e,n,di.from.ch)),t.line!=i&&(t=Dt(t,i,di.to.ch)),T(e,t)?di.inverted=!1:T(e,di.to)?di.inverted=!1:T(t,di.from)&&(di.inverted=!0),T(e,t)?T(di.from,di.to)||ri.push({from:n,to:i+1}):T(di.from,di.to)?ri.push({from:e.line,to:t.line+1}):(T(e,di.from)||(n>e.line?ri.push({from:e.line,to:Math.min(t.line,n)+1}):ri.push({from:n,to:Math.min(i,e.line)+1})),T(t,di.to)||(i>t.line?ri.push({from:Math.max(n,e.line),to:i+1}):ri.push({from:Math.max(e.line,i),to:t.line+1}))),di.from=e,di.to=t,si=!0}}function Dt(e,t,n){function i(t){for(var i=e.line+t,r=1==t?Jn.size:-1;i!=r;){var a=L(i);if(!a.hidden){var s=e.ch;return(s>n||s>a.text.length)&&(s=a.text.length),{line:i,ch:s}}i+=t}}var r=L(e.line);return r.hidden?e.line>=t?i(1)||i(-1):i(-1)||i(1):e}function Bt(e,t,n){var i=jt({line:e,ch:t||0});(n?Ot:Pt)(i,i)}function At(e){return Math.max(0,Math.min(e,Jn.size-1))}function jt(e){if(0>e.line)return{line:0,ch:0};if(e.line>=Jn.size)return{line:Jn.size-1,ch:L(Jn.size-1).text.length};var t=e.ch,n=L(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function It(e,t){function n(){for(var t=a+e,n=0>e?-1:Jn.size;t!=n;t+=e){var i=L(t);if(!i.hidden)return a=t,o=i,!0}}function i(t){if(s==(0>e?0:o.text.length)){if(t||!n())return!1;s=0>e?o.text.length:0}else s+=e;return!0}var r=di.inverted?di.from:di.to,a=r.line,s=r.ch,o=L(a);if("char"==t)i();else if("column"==t)i(!0);else if("word"==t)for(var l=!1;!(0>e)||i();){if(j(o.text.charAt(s)))l=!0;else if(l){0>e&&(e=1,i());break}if(e>0&&!i())break}return{line:a,ch:s}}function Rt(e,t){var n=0>e?di.from:di.to;($n||T(di.from,di.to))&&(n=It(e,t)),Bt(n.line,n.ch,!0)}function Nt(e,t){T(di.from,di.to)?0>e?ht("",It(e,t),di.to):ht("",di.from,It(e,t)):ht("",di.from,di.to),ii=!0}function Ft(e,t){var n=0,i=cn(di.inverted?di.from:di.to,!0);null!=zi&&(i.x=zi),"page"==t?n=An.clientHeight:"line"==t&&(n=dn());var r=un(i.x,i.y+n*e+2);Bt(r.line,r.ch,!0),zi=i.x}function qt(e){for(var t=L(e.line).text,n=e.ch,i=e.ch;n>0&&j(t.charAt(n-1));)--n;for(;t.length>i&&j(t.charAt(i));)++i;Ot({line:e.line,ch:n},{line:e.line,ch:i})}function Wt(e){Ot({line:e,ch:0},{line:e,ch:L(e).text.length})}function Vt(e){if(T(di.from,di.to))return Ht(di.from.line,e);for(var t=di.to.line-(di.to.ch?0:1),n=di.from.line;t>=n;++n)Ht(n,e)}function Ht(e,t){if(t||(t="add"),"smart"==t)if(Yn.indent)var n=_n(e);else t="prev";var i,r=L(e),a=r.indentation(En.tabSize),s=r.text.match(/^\s*/)[0];"prev"==t?i=e?L(e-1).indentation(En.tabSize):0:"smart"==t?i=Yn.indent(n,r.text.slice(s.length),r.text):"add"==t?i=a+En.indentUnit:"subtract"==t&&(i=a-En.indentUnit),i=Math.max(0,i);var o=i-a;if(o){var l="",c=0;if(En.indentWithTabs)for(var u=Math.floor(i/En.tabSize);u;--u)c+=En.tabSize,l+="	";for(;i>c;)++c,l+=" "}else{if(di.from.line!=e&&di.to.line!=e)return;var l=s}ht(l,{line:e,ch:0},{line:e,ch:s.length})}function Ut(){Yn=e.getMode(En,En.mode),Jn.iter(0,Jn.size,function(e){e.stateAfter=null}),Xn=[0],xn()}function Yt(){var e=En.gutter||En.lineNumbers;Rn.style.display=e?"":"none",e?li=!0:Vn.parentNode.style.marginLeft=0}function Xt(){if(En.lineWrapping){Pn.className+=" CodeMirror-wrap";var e=An.clientWidth/pn()-3;Jn.iter(0,Jn.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&z(t,n)}}),Fn.style.width=jn.style.width=""}else Pn.className=Pn.className.replace(" CodeMirror-wrap",""),hi=null,bi="",Jn.iter(0,Jn.size,function(e){1!=e.height&&!e.hidden&&z(e,1),e.text.length>bi.length&&(bi=e.text)});ri.push({from:0,to:Jn.size})}function Gt(){for(var e='<span class="cm-tab">',t=0;En.tabSize>t;++t)e+=" ";return e+"</span>"}function Kt(){yi=Gt(),Mt(!0)}function Zt(){An.className=An.className.replace(/\s*cm-s-\w+/g,"")+En.theme.replace(/(^|\s)\s*/g," cm-s-")}function Jt(){this.set=[]}function $t(e,t,n){function i(e,t,n,i){L(e).addMark(new s(t,n,i,r.set))}e=jt(e),t=jt(t);var r=new Jt;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var a=e.line+1,o=t.line;o>a;++a)i(a,null,null,n);i(t.line,null,t.ch,n)}return ri.push({from:e.line,to:t.line+1}),r}function Qt(e){e=jt(e);var t=new o(e.ch);return L(e.line).addMark(t),t}function en(e,t,n){return"number"==typeof e&&(e=L(At(e))),e.gutterMarker={text:t,style:n},li=!0,e}function tn(e){"number"==typeof e&&(e=L(At(e))),e.gutterMarker=null,li=!0}function nn(e,t){var n=e,i=e;return"number"==typeof e?i=L(At(e)):n=p(e),null==n?null:t(i,n)?(ri.push({from:n,to:n+1}),i):null}function rn(e,t){return nn(e,function(e){return e.className!=t?(e.className=t,!0):void 0})}function an(e,t){return nn(e,function(e,n){return e.hidden!=t?(e.hidden=t,z(e,t?0:1),t&&(di.from.line==n||di.to.line==n)&&Pt(Dt(di.from,di.from.line,di.from.ch),Dt(di.to,di.to.line,di.to.ch)),li=!0):void 0})}function sn(e){if("number"==typeof e){if(!v(e))return null;var t=e;if(e=L(e),!e)return null}else{var t=p(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function on(e){return qn.innerHTML="<pre><span>x</span></pre>",qn.firstChild.firstChild.firstChild.nodeValue=e,qn.firstChild.firstChild.offsetWidth||10}function ln(e,t){var n="";if(En.lineWrapping){var i=e.text.indexOf(" ",t+2);n=D(e.text.slice(t+1,0>i?e.text.length:i+(U?5:0)))}qn.innerHTML="<pre>"+e.getHTML(null,null,!1,yi,t)+'<span id="CodeMirror-temp-'+Oi+'">'+D(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var r=document.getElementById("CodeMirror-temp-"+Oi),a=r.offsetTop,s=r.offsetLeft;if(U&&t&&0==a&&0==s){var o=document.createElement("span");o.innerHTML="x",r.parentNode.insertBefore(o,r.nextSibling),a=o.offsetTop}return{top:a,left:s}}function cn(e,t){var n,i=dn(),r=i*(m(Jn,e.line)-(t?gi:0));if(0==e.ch)n=0;else{var a=ln(L(e.line),e.ch);n=a.left,En.lineWrapping&&(r+=Math.max(0,a.top))}return{x:n,y:r,yBot:r+i}}function un(e,t){function n(e){var t=ln(o,e);if(c){var n=Math.round(t.top/i);return Math.max(0,t.left+(n-u)*An.clientWidth)}return t.left}0>t&&(t=0);var i=dn(),r=pn(),a=gi+Math.floor(t/i),s=g(Jn,a);if(s>=Jn.size)return{line:Jn.size-1,ch:L(Jn.size-1).text.length};var o=L(s),l=o.text,c=En.lineWrapping,u=c?a-m(Jn,s):0;if(0>=e&&0==u)return{line:s,ch:0};for(var h,d=0,p=0,f=l.length,v=Math.min(f,Math.ceil((e+.9*u*An.clientWidth)/r));;){var b=n(v);if(!(e>=b&&f>v)){h=b,f=v;break}v=Math.min(f,Math.ceil(1.2*v))}if(e>h)return{line:s,ch:f};for(v=Math.floor(.8*f),b=n(v),e>b&&(d=v,p=b);;){if(1>=f-d)return{line:s,ch:h-e>e-p?d:f};var y=Math.ceil((d+f)/2),_=n(y);_>e?(f=y,h=_):(d=y,p=_)}}function hn(e){var t=cn(e,!0),n=E(Fn);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function dn(){if(null==ki){ki="<pre>";for(var e=0;49>e;++e)ki+="x<br/>";ki+="x</pre>"}var t=Vn.clientHeight;return t==Ei?Si:(Ei=t,qn.innerHTML=ki,Si=qn.firstChild.offsetHeight/50||1,qn.innerHTML="",Si)}function pn(){return An.clientWidth==Pi?Ti:(Pi=An.clientWidth,Ti=on("x"))}function gn(){return Fn.offsetTop}function mn(){return Fn.offsetLeft}function fn(e,t){var n,i,r=E(An,!0);try{n=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(n-r.left>An.clientWidth||i-r.top>An.clientHeight))return null;var a=E(Fn,!0);return un(n-a.left,i-a.top)}function vn(e){function t(){var e=K(Bn.value).join("\n");e!=r&&Sn(dt)(e,"end"),Dn.style.position="relative",Bn.style.cssText=i,oi=!1,yt(!0),ft()}var n=fn(e);if(n&&!window.opera){(T(di.from,di.to)||O(n,di.from)||!O(n,di.to))&&Sn(Bt)(n.line,n.ch);var i=Bn.style.cssText;Dn.style.position="absolute",Bn.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",oi=!0;var r=Bn.value=mt();if(Lt(),Bn.select(),H){_(e);var a=x(window,"mouseup",function(){a(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function bn(){clearInterval(Un);var e=!0;Wn.style.visibility="",Un=setInterval(function(){Wn.style.visibility=(e=!e)?"":"hidden"},650)}function yn(e){function t(e,t,n){if(e.text)for(var i,r=e.styles,a=s?0:e.text.length-1,l=s?0:r.length-2,c=s?r.length:-2;l!=c;l+=2*o){var u=r[l];if(null==r[l+1]||r[l+1]==d){for(var h=s?0:u.length-1,m=s?u.length:-1;h!=m;h+=o,a+=o)if(a>=t&&n>a&&g.test(i=u.charAt(h))){var f=Di[i];if(">"==f.charAt(1)==s)p.push(i);else{if(p.pop()!=f.charAt(0))return{pos:a,match:!1};if(!p.length)return{pos:a,match:!0}}}}else a+=o*u.length}}var n=di.inverted?di.from:di.to,i=L(n.line),r=n.ch-1,a=r>=0&&Di[i.text.charAt(r)]||Di[i.text.charAt(++r)];if(a){for(var s=(a.charAt(0),">"==a.charAt(1)),o=s?1:-1,l=i.styles,c=r+1,u=0,h=l.length;h>u;u+=2)if(0>=(c-=l[u].length)){var d=l[u+1];break}for(var p=[i.text.charAt(r)],g=/[(){}[\]]/,u=n.line,h=s?Math.min(u+100,Jn.size):Math.max(-1,u-100);u!=h;u+=o){var i=L(u),m=u==n.line,f=t(i,m&&s?r+1:0,m&&!s?r:i.text.length);if(f)break}f||(f={pos:null,match:!1});var d=f.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=$t({line:n.line,ch:r},{line:n.line,ch:r+1},d),b=null!=f.pos&&$t({line:u,ch:f.pos},{line:u,ch:f.pos+1},d),y=Sn(function(){v.clear(),b&&b.clear()});e?setTimeout(y,800):ui=y}}function Ln(e){for(var t,n,i=e,r=e-40;i>r;--i){if(0==i)return 0;var a=L(i-1);if(a.stateAfter)return i;var s=a.indentation(En.tabSize);(null==n||t>s)&&(n=i-1,t=s)}return n}function _n(e){var t=Ln(e),n=t&&L(t-1).stateAfter;return n=n?i(Yn,n):r(Yn),Jn.iter(t,e,function(e){e.highlight(Yn,n,En.tabSize),e.stateAfter=i(Yn,n)}),e>t&&ri.push({from:t,to:e}),Jn.size>e&&!L(e).stateAfter&&Xn.push(e),n}function Cn(e,t){var n=_n(e);Jn.iter(e,t,function(e){e.highlight(Yn,n,En.tabSize),e.stateAfter=i(Yn,n)})}function wn(){for(var e=+new Date+En.workTime,t=Xn.length;Xn.length;){if(L(mi).stateAfter)var n=Xn.pop();else var n=mi;if(!(n>=Jn.size)){var a=Ln(n),s=a&&L(a-1).stateAfter;s=s?i(Yn,s):r(Yn);var o=0,l=Yn.compareStates,c=!1,u=a,h=!1;if(Jn.iter(u,Jn.size,function(t){var r=t.stateAfter;if(+new Date>e)return Xn.push(u),xn(En.workDelay),c&&ri.push({from:n,to:u+1}),h=!0;var a=t.highlight(Yn,s,En.tabSize);if(a&&(c=!0),t.stateAfter=i(Yn,s),l){if(r&&l(r,s))return!0}else if(a===!1&&r){if(++o>3&&(!Yn.indent||Yn.indent(r,"")==Yn.indent(s,"")))return!0}else o=0;++u}),h)return;c&&ri.push({from:n,to:u+1})}}t&&En.onHighlightComplete&&En.onHighlightComplete(Ci)}function xn(e){Xn.length&&Zn.set(e,Sn(wn))}function Mn(){ni=ii=ai=null,ri=[],si=!1,ci=[]}function zn(){var e,t=!1;si&&(t=!Ct()),ri.length?e=Mt(ri,!0):(si&&kt(),li&&Et()),t&&Ct(),si&&(_t(),bn()),Gn&&!oi&&(ni===!0||ni!==!1&&si)&&yt(ii),si&&En.matchBrackets&&setTimeout(Sn(function(){ui&&(ui(),ui=null),T(di.from,di.to)&&yn(!1)}),20);var n=ai,i=ci;si&&En.onCursorActivity&&En.onCursorActivity(Ci),n&&En.onChange&&Ci&&En.onChange(Ci,n);for(var r=0;i.length>r;++r)i[r](Ci);e&&En.onUpdate&&En.onUpdate(Ci)}function Sn(e){return function(){Bi++||Mn();try{var t=e.apply(this,arguments)}finally{--Bi||zn()}return t}}var En={},kn=e.defaults;for(var Tn in kn)kn.hasOwnProperty(Tn)&&(En[Tn]=(c&&c.hasOwnProperty(Tn)?c:kn)[Tn]);var On=En.document,Pn=On.createElement("div");Pn.className="CodeMirror"+(En.lineWrapping?" CodeMirror-wrap":""),Pn.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',a.appendChild?a.appendChild(Pn):a(Pn);var Dn=Pn.firstChild,Bn=Dn.firstChild,An=Pn.lastChild,jn=An.firstChild,In=jn.firstChild,Rn=In.firstChild,Nn=Rn.firstChild,Fn=Rn.nextSibling.firstChild,qn=Fn.firstChild,Wn=qn.nextSibling,Vn=Wn.nextSibling;Zt(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(Bn.style.width="0px"),Y||(Fn.draggable=!0),null!=En.tabindex&&(Bn.tabIndex=En.tabindex),!En.gutter&&!En.lineNumbers&&(Rn.style.display="none");try{on("x")}catch(Hn){throw Hn.message.match(/runtime/i)&&(Hn=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Hn}var Un,Yn,Xn,Gn,Kn=new M,Zn=new M,Jn=new h([new u([new l("")])]);Ut();var $n,Qn,ei,ti,ni,ii,ri,ai,si,oi,li,ci,ui,hi,di={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},pi=!1,gi=0,mi=0,fi=0,vi=0,bi="",yi=Gt();Sn(function(){S(En.value||""),ni=!1})();var Li=new f;x(An,"mousedown",Sn(N)),x(An,"dblclick",Sn(X)),x(Fn,"dragstart",Q),x(Fn,"selectstart",y),H||x(An,"contextmenu",vn),x(An,"scroll",function(){Mt([]),En.fixedGutter&&(Rn.style.left=An.scrollLeft+"px"),En.onScroll&&En.onScroll(Ci)}),x(window,"resize",function(){Mt(!0)}),x(Bn,"keyup",Sn(it)),x(Bn,"input",vt),x(Bn,"keydown",Sn(tt)),x(Bn,"keypress",Sn(nt)),x(Bn,"focus",rt),x(Bn,"blur",at),x(An,"dragenter",_),x(An,"dragover",_),x(An,"drop",Sn($)),x(An,"paste",function(){Lt(),vt()}),x(Bn,"paste",vt),x(Bn,"cut",Sn(function(){dt("")}));var _i;try{_i=On.activeElement==Bn}catch(Hn){}_i?setTimeout(rt,20):at();var Ci=Pn.CodeMirror={getValue:R,setValue:Sn(S),getSelection:mt,replaceSelection:Sn(dt),focus:function(){Lt(),rt(),vt()},setOption:function(e,t){var n=En[e];En[e]=t,"mode"==e||"indentUnit"==e?Ut():"readOnly"==e&&t?(at(),Bn.blur()):"theme"==e?Zt():"lineWrapping"==e&&n!=t?Sn(Xt)():"tabSize"==e&&Sn(Kt)(),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&Sn(Yt)()},getOption:function(e){return En[e]},undo:Sn(lt),redo:Sn(ct),indentLine:Sn(function(e,t){v(e)&&Ht(e,null==t?"smart":t?"add":"subtract")}),indentSelection:Sn(Vt),historySize:function(){return{undo:Li.done.length,redo:Li.undone.length}},clearHistory:function(){Li=new f},matchBrackets:Sn(function(){yn(!0)}),getTokenAt:Sn(function(e){return e=jt(e),L(e.line).getTokenAt(Yn,_n(e.line),e.ch)}),getStateAfter:function(e){return e=At(null==e?Jn.size-1:e),_n(e+1)},cursorCoords:function(e){return null==e&&(e=di.inverted),hn(e?di.from:di.to)},charCoords:function(e){return hn(jt(e))},coordsChar:function(e){var t=E(Fn);return un(e.x-t.left,e.y-t.top)},markText:Sn($t),setBookmark:Qt,setMarker:Sn(en),clearMarker:Sn(tn),setLineClass:Sn(rn),hideLine:Sn(function(e){return an(e,!0)}),showLine:Sn(function(e){return an(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!v(e))return null;e=L(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:sn,addWidget:function(e,t,n,i,r){e=cn(jt(e));var a=e.yBot,s=e.x;if(t.style.position="absolute",jn.appendChild(t),"over"==i)a=e.y;else if("near"==i){var o=Math.max(An.offsetHeight,Jn.height*dn()),l=Math.max(jn.clientWidth,Fn.clientWidth)-mn();e.yBot+t.offsetHeight>o&&e.y>t.offsetHeight&&(a=e.y-t.offsetHeight),s+t.offsetWidth>l&&(s=l-t.offsetWidth)}t.style.top=a+gn()+"px",t.style.left=t.style.right="","right"==r?(s=jn.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(jn.clientWidth-t.offsetWidth)/2),t.style.left=s+mn()+"px"),n&&wt(s,a,s+t.offsetWidth,a+t.offsetHeight)},lineCount:function(){return Jn.size},clipPos:jt,getCursor:function(e){return null==e&&(e=di.inverted),P(e?di.from:di.to)},somethingSelected:function(){return!T(di.from,di.to)},setCursor:Sn(function(e,t,n){null==t&&"number"==typeof e.line?Bt(e.line,e.ch,n):Bt(e,t,n)}),setSelection:Sn(function(e,t,n){(n?Ot:Pt)(jt(e),jt(t||e))}),getLine:function(e){return v(e)?L(e).text:void 0},getLineHandle:function(e){return v(e)?L(e):void 0},setLine:Sn(function(e,t){v(e)&&ht(t,{line:e,ch:0},{line:e,ch:L(e).text.length})}),removeLine:Sn(function(e){v(e)&&ht("",{line:e,ch:0},jt({line:e+1,ch:0}))}),replaceRange:Sn(ht),getRange:function(e,t){return gt(jt(e),jt(t))},execCommand:function(e){return q[e](Ci)},moveH:Sn(Rt),deleteH:Sn(Nt),moveV:Sn(Ft),toggleOverwrite:function(){pi=!pi},posFromIndex:function(e){var t,n=0;return Jn.iter(0,Jn.size,function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),jt({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return Jn.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return Sn(e)()},refresh:function(){Mt(!0)},getInputField:function(){return Bn},getWrapperElement:function(){return Pn},getScrollerElement:function(){return An},getGutterElement:function(){return Rn}},wi=null,xi=!1,Mi="",zi=null;Jt.prototype.clear=Sn(function(){for(var e=1/0,t=-1/0,n=0,i=this.set.length;i>n;++n){var r=this.set[n],a=r.marked;if(a&&r.parent){var s=p(r);e=Math.min(e,s),t=Math.max(t,s);for(var o=0;a.length>o;++o)a[o].set==this.set&&a.splice(o--,1)}}1/0!=e&&ri.push({from:e,to:t+1})}),Jt.prototype.find=function(){for(var e,t,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],a=r.marked,s=0;a.length>s;++s){var o=a[s];if(o.set==this.set&&(null!=o.from||null!=o.to)){var l=p(r);null!=l&&(null!=o.from&&(e={line:l,ch:o.from}),null!=o.to&&(t={line:l,ch:o.to}))}}return{from:e,to:t}};var Si,Ei,ki,Ti,Oi=Math.floor(16777215*Math.random()).toString(16),Pi=0,Di={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Bi=0;for(var Ai in F)F.propertyIsEnumerable(Ai)&&!Ci.propertyIsEnumerable(Ai)&&(Ci[Ai]=F[Ai]);return Ci}function t(e,t,n){function i(e,t,n){var r=t[e];if(null!=r)return r;if(null==n&&(n=t.fallthrough),null==n)return t.catchall;if("string"==typeof n)return i(e,W[n]);for(var a=0,s=n.length;s>a;++a)if(r=i(e,W[n[a]]),null!=r)return r;return null}return t?i(e,t,n):i(e,W[n])}function n(e){var t=J[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function r(e,t,n){return e.startState?e.startState(t,n):!0}function a(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function s(e,t,n,i){this.from=e,this.to=t,this.style=n,this.set=i}function o(e){this.from=e,this.to=e,this.line=null}function l(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function c(e,t,n,i){for(var r=0,a=0,s=0;t>a;r+=2){var o=n[r],l=a+o.length;0==s?(l>e&&i.push(o.slice(e-a,Math.min(o.length,t-a)),n[r+1]),l>=e&&(s=1)):1==s&&(l>t?i.push(o.slice(0,t-a),n[r+1]):i.push(o,n[r+1])),a=l}}function u(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function h(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var a=e[i];t+=a.chunkSize(),n+=a.height,a.parent=this}this.size=t,this.height=n,this.parent=null}function d(e,t){for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=A(t.lines,e),i=t.parent;i;t=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=t;++r)n+=i.children[r].chunkSize()}return n}function g(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var a=e.children[i],s=a.height;if(s>t){e=a;continue e}t-=s,n+=a.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var o=e.lines[i],l=o.height;if(l>t)break;t-=l}return n+i}function m(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var a=e.children[i],s=a.chunkSize();if(s>t){e=a;continue e}t-=s,n+=a.height}return n}while(!e.lines);for(var i=0;t>i;++i)n+=e.lines[i].height;return n}function f(){this.time=0,this.done=[],this.undone=[]}function v(){_(this)}function b(e){return e.stop||(e.stop=v),e}function y(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function L(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function _(e){y(e),L(e)}function C(e){return e.target||e.srcElement
}function w(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function x(e,t,n,i){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),i)return function(){e.removeEventListener(t,n,!1)}}else{var r=function(e){n(e||window.event)};if(e.attachEvent("on"+t,r),i)return function(){e.detachEvent("on"+t,r)}}}function M(){this.id=null}function z(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var i=0,r=0;t>i;++i)"	"==e.charAt(i)?r+=n-r%n:++r;return r}function S(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function E(e,t){for(var n=e.ownerDocument.body,i=0,r=0,a=!1,s=e;s;s=s.offsetParent){var o=s.offsetLeft,l=s.offsetTop;s==n?(i+=Math.abs(o),r+=Math.abs(l)):(i+=o,r+=l),t&&"fixed"==S(s).position&&(a=!0)}for(var c=t&&!a?null:n,s=e.parentNode;s!=c;s=s.parentNode)null!=s.scrollLeft&&(i-=s.scrollLeft,r-=s.scrollTop);return{left:i,top:r}}function k(e){return e.textContent||e.innerText||e.nodeValue||""}function T(e,t){return e.line==t.line&&e.ch==t.ch}function O(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function P(e){return{line:e.line,ch:e.ch}}function D(e){return G.textContent=e,G.innerHTML}function B(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,i=t.length;n>=0&&i>=0&&e.charAt(n)==t.charAt(i);--n,--i);return i+1}function A(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function j(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var I=/Mac/.test(navigator.platform),R=(/Win/.test(navigator.platform),{}),N={};e.defineMode=function(t,n){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),R[t]=n},e.defineMIME=function(e,t){N[e]=t},e.getMode=function(t,n){if("string"==typeof n&&N.hasOwnProperty(n)&&(n=N[n]),"string"==typeof n)var i=n,r={};else if(null!=n)var i=n.name,r=n;var a=R[i];return a?a(t,r||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in R)R.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in N)N.propertyIsEnumerable(t)&&e.push({mime:t,mode:N[t]});return e};var F=e.extensions={};e.defineExtension=function(e,t){F[e]=t};var q=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!T(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),i=Math.max(0,n.search(/\S/));e.setCursor(t.line,i>=t.ch&&t.ch?0:i,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},W=e.keyMap={};W.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},W.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},W.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},W["default"]=I?W.macDefault:W.pcDefault,W.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function i(){t.value=o.getValue()}function r(){i(),t.form.submit=s,t.form.submit(),t.form.submit=r}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),t.form){var a=x(t.form,"submit",i,!0);if("function"==typeof t.form.submit){var s=t.form.submit;t.form.submit=r}}t.style.display="none";var o=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return o.save=i,o.getTextArea=function(){return t},o.toTextArea=function(){i(),t.parentNode.removeChild(o.getWrapperElement()),t.style.display="",t.form&&(a(),"function"==typeof t.form.submit&&(t.form.submit=s))},o},e.copyState=i,e.startState=r,a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return z(this.string,this.start,this.tabSize)},indentation:function(){return z(this.string,null,this.tabSize)},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&t!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=a,s.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=A(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,i=null==this.to?null:this.to-e+t;return new s(n,i,this.style,this.set)},dup:function(){return new s(null,null,this.style,this.set)},clipTo:function(e,t,n,i,r){null!=this.from&&this.from>=t&&(this.from=Math.max(i,this.from)+r),null!=this.to&&this.to>t&&(this.to=this.to>i?this.to+r:t),e&&i>this.from&&(this.to>i||null==this.to)&&(this.from=null),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},o.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,i,r){(e||this.from>t)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=A(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},l.inheritMarks=function(e,t){var n=new l(e),i=t&&t.marked;if(i)for(var r=0;i.length>r;++r)if(null==i[r].to&&i[r].style){var a=n.marked||(n.marked=[]),s=i[r],o=s.dup();a.push(o),o.attach(n)}return n},l.prototype={replace:function(e,t,n){var i=[],r=this.marked,a=null==t?this.text.length:t;if(c(0,e,this.styles,i),n&&i.push(n,null),c(a,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,e)+n+this.text.slice(a),this.stateAfter=null,r)for(var s=n.length-(a-e),o=0,l=r[o];r.length>o;++o)l.clipTo(null==e,e||0,null==t,a,s),l.isDead()&&(l.detach(this),r.splice(o--,1))},split:function(e,t){var n=[t,null],i=this.marked;c(e,this.text.length,this.styles,n);var r=new l(t+this.text.slice(e),n);if(i)for(var a=0;i.length>a;++a){var s=i[a],o=s.split(e,t.length);o&&(r.marked||(r.marked=[]),r.marked.push(o),o.attach(r))}return r},append:function(e){var t=this.text.length,n=e.marked,i=this.marked;if(this.text+=e.text,c(0,e.text.length,e.styles,this.styles),i)for(var r=0;i.length>r;++r)null==i[r].to&&(i[r].to=t);if(n&&n.length){i||(this.marked=i=[]);e:for(var r=0;n.length>r;++r){var a=n[r];if(!a.from)for(var s=0;i.length>s;++s){var o=i[s];if(o.to==t&&o.sameSet(a)){o.to=null==a.to?null:a.to+t,o.isDead()&&(o.detach(this),n.splice(r--,1));continue e}}i.push(a),a.attach(this),a.from+=t,null!=a.to&&(a.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var i=0;t.length>i;++i){var r=t[i],a=null==r.to;if(a&&n)for(var s=0;n.length>s;++s)if(n[s].sameSet(r)){a=!1;break}a&&(r.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var i,r=new a(this.text,n),s=this.styles,o=0,l=!1,c=s[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var u=e.token(r,t),h=this.text.slice(r.start,r.pos);if(r.start=r.pos,o&&s[o-1]==u?s[o-2]+=h:h&&(!l&&(s[o+1]!=u||o&&s[o-2]!=i)&&(l=!0),s[o++]=h,s[o++]=u,i=c,c=s[o]),r.pos>5e3){s[o++]=this.text.slice(r.pos),s[o++]=null;break}}return s.length!=o&&(s.length=o,l=!0),o&&s[o-2]!=i&&(l=!0),l||(5>s.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var i=this.text,r=new a(i);n>r.pos&&!r.eol();){r.start=r.pos;var s=e.token(r,t)}return{start:r.start,end:r.pos,string:r.current(),className:s||null,state:t}},indentation:function(e){return z(this.text,null,e)},getHTML:function(e,t,n,i,r){function a(e,t){e&&(l&&U&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,t?o.push('<span class="',t,'">',D(e).replace(/\t/g,i),"</span>"):o.push(D(e).replace(/\t/g,i)))}function s(){h&&(v+=1,b=h.length>v?h[v]:null)}var o=[],l=!0;n&&o.push(this.className?'<pre class="'+this.className+'">':"<pre>");var c=this.styles,u=this.text,h=this.marked;e==t&&(e=null);var d=u.length;if(null!=r&&(d=Math.min(r,d)),u||null!=r)if(h||null!=e){var p,g=0,m=0,f="",v=-1,b=null;for(s();d>g;){var y=d,L="";for(null!=e&&(e>g?y=e:(null==t||t>g)&&(L=" CodeMirror-selected",null!=t&&(y=Math.min(y,t))));b&&null!=b.to&&g>=b.to;)s();for(b&&(b.from>g?y=Math.min(y,b.from):(L+=" "+b.style,null!=b.to&&(y=Math.min(y,b.to))));;){var _=g+f.length,C=p;if(L&&(C=p?p+L:L),a(_>y?f.slice(0,y-g):f,C),_>=y){f=f.slice(y-g),g=y;break}g=_,f=c[m++],p="cm-"+c[m++]}}null!=e&&null==t&&a(" ","CodeMirror-selected")}else for(var m=0,w=0;d>w;m+=2){var x=c[m],p=c[m+1],M=x.length;w+M>d&&(x=x.slice(0,d-w)),w+=M,a(x,p&&"cm-"+p)}else a(" ",null!=e&&null==t?"CodeMirror-selected":null);return n&&o.push("</pre>"),o.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},u.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var i=e,r=e+t;r>i;++i){var a=this.lines[i];if(this.height-=a.height,a.cleanUp(),a.handlers)for(var s=0;a.handlers.length>s;++s)n.push(a.handlers[s])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var i=0;this.children.length>i;++i){var r=this.children[i],a=r.chunkSize();if(a>e){var s=Math.min(t,a-e),o=r.height;if(r.remove(e,s,n),this.height-=o-r.height,a==s&&(this.children.splice(i--,1),r.parent=null),0==(t-=s))break;e=0}else e-=a}if(25>this.size-t){var l=[];this.collapse(l),this.children=[new u(l)]}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var a=this.children[i],s=a.chunkSize();if(s>=e){if(a.insertHeight(e,t,n),a.lines&&a.lines.length>50){for(;a.lines.length>50;){var o=a.lines.splice(a.lines.length-25,25),l=new u(o);a.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new h(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=A(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new h(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var a=this.children[i],s=a.chunkSize();if(s>e){var o=Math.min(t,s-e);if(a.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=s}}},f.prototype={addChange:function(e,t,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1];if(i-this.time>400||!r||r.start>e+t||r.start+r.added<e-r.added+r.old.length)this.done.push({start:e,added:t,old:n});else{var a=0;if(r.start>e){for(var s=r.start-e-1;s>=0;--s)r.old.unshift(n[s]);r.added+=r.start-e,r.start=e}else e>r.start&&(a=e-r.start,t+=a);for(var s=r.added-a,o=n.length;o>s;++s)r.old.push(n[s]);t>r.added&&(r.added=t)}this.time=i}},e.e_stop=_,e.e_preventDefault=y,e.e_stopPropagation=L,e.connect=x,M.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var V=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),H=/gecko\/\d{7}/i.test(navigator.userAgent),U=/MSIE \d/.test(navigator.userAgent),Y=/WebKit\//.test(navigator.userAgent),X="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(X="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(E=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var G=document.createElement("pre");"\na"==D("a")?D=function(e){return G.textContent=e,G.innerHTML.slice(1)}:"	"!=D("	")&&(D=function(e){return G.innerHTML="",G.appendChild(document.createTextNode(e)),G.innerHTML}),e.htmlEscape=D;var K=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,i=[];(t=e.indexOf("\n",n))>-1;)i.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return i.push(e.slice(n)),i}:function(e){return e.split(/\r?\n/)};e.splitLines=K;var Z=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var J={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=J,function(){for(var e=0;10>e;e++)J[e+48]=e+"";for(var e=65;90>=e;e++)J[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)J[e+111]=J[e+63235]="F"+e}(),e}();n.defineMode("css",function(e){function t(e,t){return s=t,e}function n(e,n){var s=e.next();return"@"==s?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==s&&e.eat("*")?(n.tokenize=i,i(e,n)):"<"==s&&e.eat("!")?(n.tokenize=r,r(e,n)):"="!=s?"~"!=s&&"|"!=s||!e.eat("=")?'"'==s||"'"==s?(n.tokenize=a(s),n.tokenize(e,n)):"#"==s?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==s?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(s)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(s)?t(null,"select-op"):/[;{}:\[\]]/.test(s)?t(null,s):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function i(e,i){for(var r,a=!1;null!=(r=e.next());){if(a&&"/"==r){i.tokenize=n;break}a="*"==r}return t("comment","comment")}function r(e,i){for(var r,a=0;null!=(r=e.next());){if(a>=2&&">"==r){i.tokenize=n;break}a="-"==r?a+1:0}return t("comment","comment")}function a(e){return function(i,r){for(var a,s=!1;null!=(a=i.next())&&(a!=e||s);)s=!s&&"\\"==a;return s||(r.tokenize=n),t("string","string")}}var s,o=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),i=t.stack[t.stack.length-1];return"hash"==s&&"rule"==i?n="atom":"variable"==n&&("rule"==i?n="number":i&&"@media{"!=i||(n="tag")),"rule"==i&&/^[\{\};]$/.test(s)&&t.stack.pop(),"{"==s?"@media"==i?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==s?t.stack.pop():"@media"==s?t.stack.push("@media"):"{"==i&&"comment"!=s&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*o},electricChars:"}"}}),n.defineMIME("text/css","css"),n.defineMode("htmlmixed",function(e){function t(e,t){var n=s.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=r,t.localState=o.startState(s.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=a,t.localState=l.startState(s.indent(t.htmlState,"")),t.mode="css")),n}function i(e,t,n){var i=e.current(),r=i.search(t);return r>-1&&e.backUp(i.length-r),n}function r(e,n){return e.match(/^<\/\s*script\s*>/i,!1)?(n.token=t,n.curState=null,n.mode="html",t(e,n)):i(e,/<\/\s*script\s*>/,o.token(e,n.localState))}function a(e,n){return e.match(/^<\/\s*style\s*>/i,!1)?(n.token=t,n.localState=null,n.mode="html",t(e,n)):i(e,/<\/\s*style\s*>/,l.token(e,n.localState))}var s=n.getMode(e,{name:"xml",htmlMode:!0}),o=n.getMode(e,"javascript"),l=n.getMode(e,"css");return{startState:function(){var e=s.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=n.copyState(e.token==a?l:o,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:n.copyState(s,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?s.indent(e.htmlState,n):e.token==r?o.indent(e.localState,n):l.indent(e.localState,n)},compareStates:function(e,t){return s.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),n.defineMIME("text/html","htmlmixed"),n.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function i(e,t){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i)return!1;i=!i&&"\\"==n}return i}function r(e,t,n){return j=e,I=n,t}function a(e,t){var a=e.next();if('"'==a||"'"==a)return n(e,t,s(a));if(/[\[\]{}\(\),;\:\.]/.test(a))return r(a);if("0"==a&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(a))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==a)return e.eat("*")?n(e,t,o):e.eat("/")?(e.skipToEnd(),r("comment","comment")):t.reAllowed?(i(e,"/"),e.eatWhile(/[gimy]/),r("regexp","string")):(e.eatWhile(q),r("operator",null,e.current()));if("#"==a)return e.skipToEnd(),r("error","error");if(q.test(a))return e.eatWhile(q),r("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),c=F.propertyIsEnumerable(l)&&F[l];return c&&t.kwAllowed?r(c.type,c.style,l):r("variable","variable",l)}function s(e){return function(t,n){return i(t,e)||(n.tokenize=a),r("string","string")}}function o(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=a;break}i="*"==n}return r("comment","comment")}function l(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function c(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function u(e,t,n,i,r){var a=e.cc;for(V.state=e,V.stream=r,V.marked=null,V.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var s=a.length?a.pop():N?L:y;if(s(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return V.marked?V.marked:"variable"==n&&c(e,i)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)V.cc.push(arguments[e])}function d(){return h.apply(null,arguments),!0}function p(e){var t=V.state;if(t.context){V.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function g(){V.state.context||(V.state.localVars=H),V.state.context={prev:V.state.context,vars:V.state.localVars}}function m(){V.state.localVars=V.state.context.vars,V.state.context=V.state.context.prev}function f(e,t){var n=function(){var n=V.state;n.lexical=new l(n.indented,V.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function v(){var e=V.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function b(e){return function(t){return t==e?d():";"==e?h():d(arguments.callee)}}function y(e){return"var"==e?d(f("vardef"),E,b(";"),v):"keyword a"==e?d(f("form"),L,y,v):"keyword b"==e?d(f("form"),y,v):"{"==e?d(f("}"),S,v):";"==e?d():"function"==e?d(B):"for"==e?d(f("form"),b("("),f(")"),T,b(")"),v,y,v):"variable"==e?d(f("stat"),w):"switch"==e?d(f("form"),L,f("}","switch"),b("{"),S,v,v):"case"==e?d(L,b(":")):"default"==e?d(b(":")):"catch"==e?d(f("form"),g,b("("),A,b(")"),y,v,m):h(f("stat"),L,b(";"),v)}function L(e){return W.hasOwnProperty(e)?d(C):"function"==e?d(B):"keyword c"==e?d(_):"("==e?d(f(")"),L,b(")"),v,C):"operator"==e?d(L):"["==e?d(f("]"),z(L,"]"),v,C):"{"==e?d(f("}"),z(M,"}"),v,C):d()}function _(e){return e.match(/[;\}\)\],]/)?h():h(L)}function C(e,t){return"operator"==e&&/\+\+|--/.test(t)?d(C):"operator"==e?d(L):";"!=e?"("==e?d(f(")"),z(L,")"),v,C):"."==e?d(x,C):"["==e?d(f("]"),L,b("]"),v,C):void 0:void 0}function w(e){return":"==e?d(v,y):h(C,b(";"),v)}function x(e){return"variable"==e?(V.marked="property",d()):void 0}function M(e){return"variable"==e&&(V.marked="property"),W.hasOwnProperty(e)?d(b(":"),L):void 0}function z(e,t){function n(i){return","==i?d(e,n):i==t?d():d(b(t))}return function(i){return i==t?d():h(e,n)}}function S(e){return"}"==e?d():h(y,S)}function E(e,t){return"variable"==e?(p(t),d(k)):d()}function k(e,t){return"="==t?d(L,k):","==e?d(E):void 0}function T(e){return"var"==e?d(E,P):";"==e?h(P):"variable"==e?d(O):h(P)}function O(e,t){return"in"==t?d(L):d(C,P)}function P(e,t){return";"==e?d(D):"in"==t?d(L):d(L,b(";"),D)}function D(e){")"!=e&&d(L)}function B(e,t){return"variable"==e?(p(t),d(B)):"("==e?d(f(")"),g,z(A,")"),v,y,m):void 0}function A(e,t){return"variable"==e?(p(t),d()):void 0}var j,I,R=e.indentUnit,N=t.json,F=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a}}(),q=/[+\-*&%=<>!?|]/,W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},V={state:null,column:null,marked:null,cc:null},H={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(e){return{tokenize:a,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-R,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==j?n:(t.reAllowed="operator"==j||"keyword c"==j||j.match(/^[\[{}\(,;:]$/),t.kwAllowed="."!=j,u(t,n,j,I,e))},indent:function(e,t){if(e.tokenize!=a)return 0;var n=t&&t.charAt(0),i=e.lexical,r=i.type,s=n==r;return"vardef"==r?i.indented+4:"form"==r&&"{"==n?i.indented:"stat"==r||"form"==r?i.indented+R:"switch"!=i.info||s?i.align?i.column+(s?0:1):i.indented+(s?0:R):i.indented+(/^(?:case|default)\b/.test(t)?R:2*R)},electricChars:":{}"}}),n.defineMIME("text/javascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(s(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";b=e.eat("/")?"closeTag":"openTag",e.eatSpace(),v="";for(var o;o=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)v+=o;return t.tokenize=i,"tag"}return"&"==r?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function i(e,t){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(t.tokenize=n,b=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(b="equals",null):/[\'\"]/.test(i)?(t.tokenize=r(i),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function r(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"}}function a(e,t){return function(i,r){for(;!i.eol();){if(i.match(t)){r.tokenize=n;break}i.next()}return e}}function s(e){return function(t,i){for(var r;null!=(r=t.next());){if("<"==r)return i.tokenize=s(e+1),i.tokenize(t,i);if(">"==r){if(1==e){i.tokenize=n;break}return i.tokenize=s(e-1),i.tokenize(t,i)}}return"meta"}}function o(){for(var e=arguments.length-1;e>=0;e--)y.cc.push(arguments[e])}function l(){return o.apply(null,arguments),!0}function c(e,t){var n=C.doNotIndent.hasOwnProperty(e)||y.context&&y.context.noIndent;y.context={prev:y.context,tagName:e,indent:y.indented,startOfLine:t,noIndent:n}}function u(){y.context&&(y.context=y.context.prev)}function h(e){if("openTag"==e)return y.tagName=v,l(g,d(y.startOfLine));if("closeTag"==e){var t=!1;return t=y.context?y.context.tagName!=v:!0,t&&(L="error"),l(p(t))}return l()}function d(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&C.autoSelfClosers.hasOwnProperty(y.tagName.toLowerCase())?l():"endTag"==t?(c(y.tagName,e),l()):l()}}function p(e){return function(t){return e&&(L="error"),"endTag"==t?(u(),l()):(L="error",l(arguments.callee))}}function g(e){return"word"==e?(L="attribute",l(g)):"equals"==e?l(m,g):"string"==e?(L="error",l(g)):o()}function m(e){return"word"==e&&C.allowUnquoted?(L="string",l()):"string"==e?l(f):o()}function f(e){return"string"==e?l(f):o()}var v,b,y,L,_=e.indentUnit,C=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},w=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;L=b=v=null;var n=t.tokenize(e,t);if(t.type=b,(n||b)&&"comment"!=n)for(y=t;;){var i=t.cc.pop()||h;if(i(b||n))break}return t.startOfLine=!1,L||n},indent:function(e,t,r){var a=e.context;if(e.tokenize!=i&&e.tokenize!=n||a&&a.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(w&&/<!\[CDATA\[/.test(t))return 0;for(a&&/^<\//.test(t)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+_:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,i=t.context;;n=n.prev,i=i.prev){if(!n||!i)return n==i;if(n.tagName!=i.tagName)return!1}},electricChars:"/"}}),n.defineMIME("application/xml","xml"),n.defineMIME("text/html",{name:"xml",htmlMode:!0})}}),montageDefine("59aee0c","composer/translate-composer",{dependencies:["montage","composer/composer","core/event/event-manager"],factory:function(e,t){var n=(e("montage").Montage,e("composer/composer").Composer),i=e("core/event/event-manager").defaultEventManager,r=t.TranslateComposer=n.specialize({_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},_translateX:{value:0},translateX:{get:function(){return this._translateX
},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&this._minTranslateX>t&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&this._minTranslateY>t&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!=e&&(null!==e&&e>this._translateX&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!=e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!=e&&(null!==e&&e>this._translateY&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!=e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e?!0:!1}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,1>this.__momentumDuration&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_start:{value:function(e,t,n){this.pointerStartEventPosition={pageX:e,pageY:t,target:n},this._pointerX=e,this._pointerY=t,window.Touch?(document.addEventListener("touchend",this,!0),this._element.addEventListener("touchmove",this,!1)):(document.addEventListener("mouseup",this,!0),this._element.addEventListener("mousemove",this,!1)),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_observedPointer:{value:null},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&-1===r._NATIVE_ELEMENTS.indexOf(e.target.tagName)&&!e.target.isContentEditable}},captureMousedown:{value:function(e){0===e.button&&(this._observedPointer="mouse",this._start(e.clientX,e.clientY,e.target))}},handleMousedown:{value:function(e){0!==e.button||this.eventManager.componentClaimingPointer(this._observedPointer)||this.eventManager.claimPointer(this._observedPointer,this)}},handleMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._firstMove()):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._firstMove())}},captureMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.clientX,e.clientY)):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._move(e.clientX,e.clientY))}},captureMouseup:{value:function(e){this._end(e)}},_releaseInterest:{value:function(){window.Touch?(document.removeEventListener("touchend",this,!0),this._isFirstMove?this._element.removeEventListener("touchmove",this,!1):document.removeEventListener("touchmove",this,!0)):(document.removeEventListener("mouseup",this,!0),this._isFirstMove?this._element.removeEventListener("mousemove",this,!1):document.removeEventListener("mousemove",this,!0)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null}},captureTouchstart:{value:function(e){null!==this._observedPointer&&this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)||e.targetTouches&&1===e.targetTouches.length&&(this._observedPointer=e.targetTouches[0].identifier,this._start(e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.targetTouches[0].target))}},handleTouchstart:{value:function(e){this.eventManager.componentClaimingPointer(this._observedPointer)||e.targetTouches&&1===e.targetTouches.length&&(this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.claimPointer(this._observedPointer,this))}},handleTouchmove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._firstMove()):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._firstMove())}},captureTouchmove:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&(this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.changedTouches[t].clientX,e.changedTouches[t].clientY)):this._analyzeMovement(e.changedTouches[t]))}},captureTouchend:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._end(e.changedTouches[t])}},_analyzeMovement:{value:function(e){var t=e.velocity;if(t){var n,i,r,a,s,o,l,c,u=.7853981633974483,h=2.356194490192345,d=-2.356194490192345,p=-.7853981633974483;if(o=t.speed,0!==t.speed&&!isNaN(t.speed))if(s=t.angle,"horizontal"===this.axis){if(r=u>=s&&s>=p,a=s>=h||d>=s,r||a)return this._stealPointer()}else if("vertical"===this.axis){if(n=p>=s&&s>=d,i=s>=u&&h>=s,n||i)return this._stealPointer()}else{if(o>=this.startTranslateSpeed)return this._stealPointer();if(l=this.pointerStartEventPosition.pageX-e.pageX,c=this.pointerStartEventPosition.pageY-e.pageY,l*l+c*c>this.startTranslateRadius*this.startTranslateRadius)return this._stealPointer()}}}},_stealPointer:{value:function(){return this.eventManager.claimPointer(this._observedPointer,this)}},_translateEndTimeout:{value:null},captureMousewheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleMousewheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._translateY;this._dispatchTranslateStart(),this.translateY=this._translateY-20*e.wheelDeltaY/120,this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd()},400),n!==this._translateY&&this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0,window.Touch?(document.addEventListener("touchmove",this,!0),this._element.removeEventListener("touchmove",this,!1)):(document.addEventListener("mousemove",this,!0),this._element.removeEventListener("mousemove",this,!1)))}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!=this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!=this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_bezierTValue:{value:function(e,t,n,i,r){var a,s,o,l,c=1-3*i+3*t,u=3*i-6*t,h=3*t,d=.5;for(s=0;10>s;s++)l=d*d,a=3*c*l+2*u*d+h,o=1-d,d-=(3*(o*o*d*t+o*l*i)+l*d-e)/a;return l=d*d,o=1-d,3*(o*o*d*n+o*l*r)+l*d}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,i,r=Date.now(),a=!1;this.animateMomentum&&(e=r-this.startTime,this.__momentumDuration>e?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=r),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=r)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&r-this.startStrideXTime>0&&(r-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,a=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&r-this.startStrideYTime>0&&(r-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,a=!0):this.posY=t*this.translateStrideY),n=this.posX,i=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=i,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||a,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this.momentumX="vertical"!=this._axis?e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):0,this.momentumY="horizontal"!=this._axis?e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},surrenderPointer:{value:function(){return!this.isMoving}},eventManager:{get:function(){return i}},load:{value:function(){window.Touch?(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("touchstart",this,!1)):(this._element.addEventListener("mousedown",this,!0),this._element.addEventListener("mousedown",this,!1),this._element.addEventListener("mousewheel",this,!1),this._element.addEventListener("mousewheel",this,!0)),this.eventManager.isStoringPointerEvents=!0}},addEventListener:{value:function(e,t,i){n.addEventListener.call(this,e,t,i),"translate"===e&&(this._shouldDispatchTranslate=!0)}}})}}),montageDefine("59aee0c","ui/repetition.reel/repetition",{dependencies:["montage","ui/component","core/template","core/range-controller","core/promise","collections/map","collections/set","frb/observers"],factory:function(e,t){var n=e("montage").Montage,i=e("ui/component").Component;e("core/template").Template;var r=e("core/range-controller").RangeController,a=e("core/promise").Promise,s=e("collections/map"),o=e("collections/set"),l=e("frb/observers"),c=l.observeProperty,u=l.observeKey,h=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},isFirst:{value:null},isLast:{value:null},isEven:{value:null},isOdd:{value:null},_noTransition:{value:null},constructor:{value:function h(){this.super(),this.repetition=null,this.controller=null,this.content=null,this.defineBinding("object",{"<->":"content"}),this.defineBinding("selected",{"<->":"repetition.contentController._selection.has(content)"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this.defineBinding("isFirst",{"<-":"index == 0"}),this.defineBinding("isLast",{"<-":"index == repetition.iterations.length - 1"}),this.defineBinding("isEven",{"<-":"index % 2 == 0"}),this.defineBinding("isOdd",{"<-":"index % 2 != 0"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.content=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex&&this.retractFromDocument();var t=this,n=this.repetition,i=n.element,r=n._boundaries,a=i.ownerDocument.createTextNode(""),s=r[e];r.splice(e,0,a),i.insertBefore(a,s),i.insertBefore(this._fragment,s);for(var o=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),o--,o||t.forEachElement(function(e){n._iterationForElement.set(e,t)})},c=0;this._childComponents.length>c;c++){var u=this._childComponents[c];u.addEventListener("firstDraw",l,!1),u.needsDraw=!0}n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this)}},retractFromDocument:{value:function(){var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],r=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,s=i.nextSibling;s!=r;){var o=s.nextSibling;n.removeChild(s),a.appendChild(s),s=o}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!=i)for(var r=n._boundaries[i];r!==n._boundaries[i+1];r=r.nextSibling)1===r.nodeType&&e.call(t,r)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},cachedFirstElement:{value:null}});t.Repetition=i.specialize({initWithContent:{value:function(e){return this.content=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new r).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},contentAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=s(),this._iterationForElement=s(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=o(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){this.innerTemplate=null,e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_setupIterationTemplate:{value:function(){var e=this;e.innerTemplate.hasParameters()?(e._iterationTemplate=e.innerTemplate.clone(),e._expandIterationTemplateParameters()):e._iterationTemplate=e.innerTemplate;for(var t,n=e.childComponents,i=n.length-1;t=n[i--];)t.detachFromParentComponent(),t.needsDraw=!1,t.cleanupDeletedComponentTree(!0);e.handleOrganizedContentRangeChange(e.organizedContent,[],0),e.organizedContent.addRangeChangeListener(e,"organizedContent"),e._canDrawInitialContent=!0,e.needsDraw=!0}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0);for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._iterationTemplate=null,this._freeIterations.clear(),this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_expandIterationTemplateParameters:{value:function(){for(var e,t,n,i,r,a,s,o,l,c=this._iterationTemplate,u=this;c.hasParameters();){u=u.ownerComponent,e=u._ownerDocumentPart.template,i=u._ownerDocumentPart.objects,a=c.expandParameters(e,u),n=c.getSerialization().getExternalObjectLabels(),r=c.getInstances(),o=a.labels,t=a.labelsCollisions;for(var h,d=0;h=o[d];d++)s=t&&h in t?t[h]:h,n.indexOf(s)>=0?r[s]=i[h]:(l=e.getObjectMetadata(h),l.owner||(l.owner=i.owner),c.setObjectMetadata(s,l.require,l.label,l.owner))}}},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n=e.element.ownerDocument;e.currentIteration=t;var i=e._iterationTemplate.instantiate(n).then(function(n){n.loadComponentTree().then(function(){t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}).done(),e.currentIteration=null});return i.done(),i.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?u(this._contentForIteration,this.currentIteration,t,n):"currentIteration"===e?t(this.currentIteration):c(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var i=this.iterations.splice(n,t.length);for(i.forEach(function(e){e.recycle()}),this._freeIterations.addEach(i);this._freeIterations.length<e.length;)this._freeIterations.push(this._createIteration());this.iterations.swap(n,0,e.map(function(e){var t=this._freeIterations.pop();return t.content=e,this._contentForIteration.set(t,e),t},this)),this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){if(this.canDraw()){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}}},_drawInitialContent:{value:function(){var e=this.element;e.innerHTML="";var t=e.ownerDocument.createTextNode("");e.appendChild(t),this._boundaries.push(t)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0)}},_disableSelectionTracking:{value:function(){this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0)}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:h,serializable:!1}})}}),montageDefine("59aee0c","composer/press-composer",{dependencies:["montage","composer/composer","core/event/mutable-event"],factory:function(e,t){var n=e("montage").Montage,i=e("composer/composer").Composer,r=e("core/event/mutable-event").MutableEvent,a=t.PressComposer=i.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this):this._element.removeEventListener("mousedown",this)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t,n=0;if("touchstart"===e.type){for(t=e.changedTouches.length;t>n;n++)if(!this.component.eventManager.componentClaimingPointer(e.changedTouches[n].identifier)){this._observedPointer=e.changedTouches[n].identifier;break}if(null===this._observedPointer)return!1;document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)}else"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1));this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,i;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;if(i=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&i)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!i)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;t&&!i&&this._endInteraction(e)}}},_endInteraction:{value:function(e){e&&"touchend"!==e.type&&"touchcancel"!==e.type?e&&"click"!==e.type&&"mouseup"!==e.type||(document.removeEventListener("click",this),document.removeEventListener("mouseup",this)):(document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this)),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(){if(null===this._observedPointer)return!1;for(var e=0,t=event.changedTouches.length;t>e;e++)if(event.changedTouches[e].identifier===this._observedPointer)return e;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new s,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[i]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED
}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),s=function(){var e,t,i,a,s,o;for(e=r.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],i=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},s=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},o=t.length-1;o>=0;o--)n.defineProperty(e,t[o],a(t[o]));for(o=i.length-1;o>=0;o--)n.defineProperty(e,i[o],s(i[o]));return e}()}}),montageDefine("8775e1b","ui/main.reel/main",{dependencies:["montage","montage/ui/component","montage/core/template","gist","components","examples"],factory:function(e,t){var n=e("montage").Montage,i=e("montage/ui/component").Component,r=e("montage/core/template").Template,a=e("gist").gist,s=1;t.Main=i.specialize({templateObjects:{value:{}},_componentId:{value:1},_logger:{value:null},templateDidLoad:{value:function(){var e=this.examples[0];this._logger=this.templateObjects.logger,this.addEventListener("action",this,!1),window.addEventListener("hashchange",this,!1);var t=location.hash.slice(3);t?(this.loadGist(t),this.setupGistLink(t)):(this.loadExample(e),this.executeFiddle())}},components:{value:e("components").components},examples:{value:e("examples").examples},loadGist:{value:function(e){var t=this;a.load(e,null,function(n,i,a,o){var l,c,u;return n.version!==s?(t.redirectToVersion(n.version,e),void 0):(a&&(u=new r,l=u.createHtmlDocumentWithHtml(a),c=u.getInlineObjectsString(l),a=l.body.innerHTML,c=c.replace(/\n    /g,"\n"),a=a.replace(/\n    /g,"\n").replace(/^\s*\n|\n\s*$/g,"")),t.loadFiddle(i,c,a,o),t.executeFiddle(),void 0)})}},loadFiddle:{value:function(e,t,n,i){this.templateObjects.cssCodeMirror.value=e||"",this.templateObjects.serializationCodeMirror.value=t||"",this.templateObjects.htmlCodeMirror.value=n||"",this.templateObjects.javascriptCodeMirror.value=i||""}},executeFiddle:{value:function(){var e=this.templateObjects;e.montageFrame.load(e.cssCodeMirror.value,e.serializationCodeMirror.value,e.htmlCodeMirror.value,e.javascriptCodeMirror.value)}},loadExample:{value:function(e){location.hash="",this.loadFiddle(e.css,this._stringifySerialization(e.serialization),e.html,e.javascript),this.executeFiddle()}},addComponentToFiddle:{value:function(e){var t=this._generateComponentId(e.name);e.serialization.properties.element={"#":t},this._addSerialization(t,e.serialization),this._addHtml(e.html.replace('data-montage-id=""','data-montage-id="'+t+'"')),this.executeFiddle()}},redirectToVersion:{value:function(e,t){var n;e||(e=0),n=window.location.href.slice(0,-window.location.hash.length)+"v"+e+"/#!/"+t,window.location.href=n}},clear:{value:function(){location.hash="",this.loadFiddle("","","",""),this.executeFiddle()}},_tmpDiv:{value:document.createElement("div")},_addHtml:{value:function(e){var t,i,r=this._getSerializationObject(),a=this.templateObjects.htmlCodeMirror,s=a.value,o=this._tmpDiv,l=!0;if(t=r&&n.getPath.call(r,"owner.properties.element['#']"))if(a.hasModeErrors())this._logger.log("Add component warning: The HTML code seems to be invalid, appending element at the end.");else if(o.innerHTML=s,i=o.querySelector("*[data-montage-id='"+t+"']"),i&&i.parentNode==o&&!i.nextSibling){/([\t ]*)[^\n]*\n\s*<\/[^>]+>\s*$/.exec(s);var c=RegExp.$1||"";s=s.replace(/<\/[^>]+>\s*$/,c+e+"\n$&"),l=!1}else this._logger.log("Add component warning: The owner's element is not the single root element, appending element at the end.");l&&(s+=(s?"\n":"")+e),a.value=s}},_addSerialization:{value:function(e,t){var n,i=this._getSerializationObject(),r=this.templateObjects.serializationCodeMirror.value;i?(i[e]=t,n=this._stringifySerialization(i)):(i={},i[e]=t,n=this.templateObjects.serializationCodeMirror.value+(r?"\n":"")+this._stringifySerialization(i),r&&this._logger.log("Add component warning: The serialization seems to be invalid, appending component at the end.")),this.templateObjects.serializationCodeMirror.value=n}},_serializationObject:{value:null},_lastSerialization:{value:null},_getSerializationObject:{value:function(){var e=this.templateObjects.serializationCodeMirror.value;if(e===this._lastSerialization)return this._serializationObject;this._lastSerialization=e;try{return this._serializationObject=JSON.parse(e)}catch(t){return this._serializationObject=null}}},_generateComponentId:{value:function(e){var t,n=this._getSerializationObject();if(n){do t=e+this._componentId++;while(t in n)}else t=e+this._componentId++;return t}},_htmlPageTemplate:{value:'<!DOCTYPE html>\n<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n    <title>MFiddle</title>\n    <script type="text/montage-serialization"><!-- serialization --></script></head>\n<body>\n    <!-- html -->\n</body>\n</html>'},_generateHtmlPage:{value:function(){var e=this.templateObjects,t=e.serializationCodeMirror.value,n=e.htmlCodeMirror.value;return t=t.replace(/\n/gm,"\n    "),n=n.replace(/\n/gm,"\n    "),this._htmlPageTemplate.replace("<!-- serialization -->",t).replace("<!-- html -->",n)}},handleComponentButtonAction:{value:function(e){this.addComponentToFiddle(e.target.component)}},handleSaveAction:{value:function(){a.save({anon:!0,cssCode:this.templateObjects.cssCodeMirror.value,htmlMarkup:this._generateHtmlPage(),jsCode:this.templateObjects.javascriptCodeMirror.value,settings:{version:1}})}},handleNewAction:{value:function(){this.clear()}},handleRunAction:{value:function(){this.executeFiddle()}},handleExampleButtonAction:{value:function(e){this.loadExample(e.target.example)}},handleHashchange:{value:function(){var e=location.hash.slice(3);e&&a.id!=e&&this.loadGist(e),this.setupGistLink(e)}},setupGistLink:{value:function(e){var t=this.templateObjects.gistLink,n=this.templateObjects.gistLinkCondition;n.condition=!!e,t.href="https://gist.github.com/"+e}},_stringifySerialization:{value:function(e){return JSON.stringify(e,null,4).replace(/\{\s*(\"[#@]\")\s*:\s*(\"[^\"]+\")\s*\}/g,"{$1: $2}").replace(/\{\s*(\"(?:<-|<->)\")\s*:\s*(\"[^\"]+\"\s*(?:,\s*\"converter\"\s*:\s*\{\s*\"@\"\s*:\s*\"[^\"]+\"\s*\}\s*|,\s*\"deferred\"\s*:\s*(true|false)\s*)*)\}/g,function(e,t,n){return"{"+t+": "+n.replace(/,\s*/,", ").replace(/\n\s*/,"")+"}"})}}})}}),montageDefine("786da12","ui/scroll-bars.reel/scroll-bars",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ScrollBars=n.specialize({_verticalScroll:{value:0},_horizontalScroll:{value:0},_verticalLength:{value:0},_horizontalLength:{value:0},verticalScroll:{get:function(){return this._verticalScroll},set:function(e){this._verticalScroll=e,this.needsDraw=!0}},horizontalScroll:{get:function(){return this._horizontalScroll},set:function(e){this._horizontalScroll=e,this.needsDraw=!0}},verticalLength:{get:function(){return this._verticalLength},set:function(e){this._verticalLength=e,this.needsDraw=!0}},horizontalLength:{get:function(){return this._horizontalLength},set:function(e){this._horizontalLength=e,this.needsDraw=!0}},_opacity:{value:0},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e,this.needsDraw=!0}},_isDisplayUpdated:{value:!1},_displayVertical:{value:!1},displayVertical:{get:function(){return this._displayVertical},set:function(e){this._displayVertical!==e&&(this._displayVertical=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_displayHorizontal:{value:!1},displayHorizontal:{get:function(){return this._displayHorizontal},set:function(e){this._displayHorizontal!==e&&(this._displayHorizontal=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_top:{value:!1},_bottomClip:{value:!1},_bottom:{value:!1},_left:{value:!1},_rightClip:{value:!1},_right:{value:!1},_hasResizedHorizontal:{value:!1},_hasResizedVertical:{value:!1},willDraw:{value:function(){this._offsetWidth!==this._element.offsetWidth&&(this._offsetWidth=this._element.offsetWidth,this._hasResizedHorizontal=!0),this._offsetHeight!==this._element.offsetHeight&&(this._offsetHeight=this._element.offsetHeight,this._hasResizedVertical=!0)}},draw:{value:function(){var e,t,n,i;if(this._isDisplayUpdated){var r=this._displayVertical?"block":"none",a=this._displayHorizontal?"block":"none";this._top.style.display=this._bottomClip.style.display=r,this._left.style.display=this._rightClip.style.display=a,this._isDisplayUpdated=!1}if(this._hasResizedHorizontal&&this._displayHorizontal&&(this._rightClip.style.width=this._right.style.width=this._offsetWidth-4+"px",this._rightClip.style.clip="rect(-1px,"+(this._offsetWidth-3)+"px,6px,3px)",this._hasResizedHorizontal=!1),this._hasResizedVertical&&this._displayVertical&&(this._bottomClip.style.height=this._bottom.style.height=this._offsetHeight-4+"px",this._bottomClip.style.clip="rect(3px,6px,"+(this._offsetHeight-3)+"px,-1px)",this._hasResizedVertical=!1),this._opacity){if(this._displayHorizontal){n=this._offsetWidth-9-(this._displayVertical?6:0),e=Math.floor(n*this._horizontalLength),i=n-e,t=1-this._horizontalLength?Math.floor(i*this._horizontalScroll/(1-this._horizontalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>i&&(e+=Math.floor(i-t),0>e&&(e=0),t=n-e);var s=e-this._offsetWidth+9+"px,0px",o=t+2+"px,0px";this._right.style.webkitTransform="translate3d("+s+",0)",this._right.style.MozTransform="translate("+s+")",this._right.style.transform="translate("+s+")",this._left.style.webkitTransform=this._rightClip.style.webkitTransform="translate3d("+o+",0)",this._left.style.MozTransform=this._rightClip.style.MozTransform="translate("+o+")",this._left.style.transform=this._rightClip.style.transform="translate("+o+")",this._left.style.webkitTransition=this._right.style.webkitTransition="none",this._left.style.MozTransition=this._right.style.MozTransition="none",this._left.style.transition=this._right.style.transition="none",this._left.style.opacity=this._right.style.opacity=this._opacity}if(this._displayVertical){n=this._offsetHeight-9-(this._displayHorizontal?6:0),e=Math.floor(n*this._verticalLength),i=n-e,t=1-this._verticalLength?Math.floor(i*this._verticalScroll/(1-this._verticalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>i&&(e+=Math.floor(i-t),0>e&&(e=0),t=n-e);var l="0px,"+(e-this._offsetHeight+9)+"px",c="0px,"+(t+2)+"px";this._bottom.style.webkitTransform="translate3d("+l+",0)",this._bottom.style.MozTransform="translate("+l+")",this._bottom.style.transform="translate("+l+")",this._top.style.webkitTransform=this._bottomClip.style.webkitTransform="translate3d("+c+",0)",this._top.style.MozTransform=this._bottomClip.style.MozTransform="translate("+c+")",this._top.style.transform=this._bottomClip.style.transform="translate("+c+")",this._top.style.webkitTransition=this._bottom.style.webkitTransition="none",this._top.style.MozTransition=this._bottom.style.MozTransition="none",this._top.style.transition=this._bottom.style.transition="none",this._top.style.opacity=this._bottom.style.opacity=this._opacity}}else this._displayHorizontal&&(this._left.style.webkitTransition=this._right.style.webkitTransition="300ms opacity",this._left.style.opacity=this._right.style.opacity=0),this._displayVertical&&(this._top.style.webkitTransition=this._bottom.style.webkitTransition="300ms opacity",this._top.style.opacity=this._bottom.style.opacity=0)}}})}}),montageDefine("59aee0c","core/range-controller",{dependencies:["montage","core/promise","collections/generic-collection"],factory:function(e,t){var n=e("montage").Montage,i=e("core/promise").Promise,r=e("collections/generic-collection");t.RangeController=n.specialize({constructor:{value:function(){this.content=null,this._selection=[],this.selection=[],this.defineBinding("_selection.rangeContent()",{"<->":"selection.rangeContent()"}),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this._selection.addRangeChangeListener(this,"selection"),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[]}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},selection:{value:null},_selection:{value:null},select:{value:function(e){!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){for(var i=this.content.splice.apply(this.content,n),e=2;n.length>e;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:r.prototype.addEach},deleteEach:{value:r.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){t.deleteEach(e),this._selection.deleteEach(t)}},handleSelectionRangeChange:{value:function(e,t){var n=this;i.nextTick(function(){var i=n._selection.length;n.avoidsEmptySelection&&0===i?n.select(t[t.length-1]):!n.multiSelect&&i>1&&n._selection.splice(0,n._selection.length,e[e.length-1])})}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent){var n=t.clone(1);n.deleteEach(e),this._selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this._selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&(!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e))}},handleMultiSelectChange:{value:function(){var e=this._selection.length;!this.multiSelect&&e>1&&this._selection.splice(0,e-1)}}},{blueprintModuleId:e("montage")._blueprintModuleIdDescriptor,blueprint:e("montage")._blueprintDescriptor})}}),montageDefine("8775e1b","ui/main.reel/main.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html;charset=utf-8">\n    <title>MFiddle</title>\n    <link rel=stylesheet href=main.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"main"}}},"cssView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"css"},"title":"CSS"}},"serializationView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"serialization"},"title":"Serialization"}},"htmlView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"html"},"title":"HTML"}},"javascriptView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"javascript"},"title":"JavaScript"}},"previewView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"preview"},"title":"Preview"}},"cssCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"cssCodeMirror"},"mode":"css","matchBrackets":true,"lineNumbers":true}},"serializationCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"serializationCodeMirror"},"mode":"json","matchBrackets":true,"lineNumbers":true}},"htmlCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"htmlCodeMirror"},"mode":"htmlmixed","lineNumbers":true}},"javascriptCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"javascriptCodeMirror"},"mode":"javascript","lineNumbers":true}},"components":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"components"}},"bindings":{"content":{"<-":"@owner.components"}}},"componentButton":{"prototype":"ui/component-button.reel","properties":{"element":{"#":"componentButton"}},"bindings":{"component":{"<-":"@components.objectAtCurrentIteration"}}},"gistLinkCondition":{"prototype":"montage/ui/condition.reel","properties":{"element":{"#":"gistLinkCondition"},"condition":false}},"gistLink":{"prototype":"matte/ui/anchor.reel","properties":{"element":{"#":"gist"}}},"save":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"save"}}},"new":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"new"}}},"run":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"run"}}},"examples":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"examples"}},"bindings":{"content":{"<-":"@owner.examples"}}},"exampleButton":{"prototype":"ui/example-button.reel","properties":{"element":{"#":"exampleButton"}},"bindings":{"example":{"<-":"@examples.objectAtCurrentIteration"}}},"montageFrame":{"prototype":"ui/montage-frame.reel","properties":{"element":{"#":"montageFrame"}}},"logger":{"prototype":"ui/logger.reel","properties":{"element":{"#":"logger"}},"bindings":{"input":{"<-":"@montageFrame.logMessages"}}}}</script>\n</head>\n<body>\n<div data-montage-id=main>\n    <div id=header>\n        <h1 id=logo>MFiddle</h1>\n        <ul id=components data-montage-id=components>\n            <li>\n                <div class=component-button-holder><div data-montage-id=componentButton></div></div>\n            </li>\n        </ul>\n        <ul id=links>\n            <li data-montage-id=gistLinkCondition class=montage-invisible><a data-montage-id=gist href="" target=_blank class=link>Gist</a></li>\n        </ul>\n        <ul id=menu>\n            <li><div class=menu-button data-montage-id=save>Save</div></li>\n            <li><div class=menu-button data-montage-id=new>New</div></li>\n            <li><div id=run class=menu-button data-montage-id=run>Run</div></li>\n            <li>\n                <div id=examples>\n                    <h2>Examples</h2>\n                    <ul data-montage-id=examples>\n                        <li class=exampleButtons>\n                            <span data-montage-id=exampleButton></span>\n                        </li>\n                    </ul>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <div id=css data-montage-id=css>\n        <div data-montage-id=cssCodeMirror></div>\n    </div>\n    <div id=serialization data-montage-id=serialization>\n        <div data-montage-id=serializationCodeMirror></div>\n    </div>\n    <div id=html data-montage-id=html>\n        <div data-montage-id=htmlCodeMirror></div>\n    </div>\n    <div id=javascript data-montage-id=javascript>\n        <div data-montage-id=javascriptCodeMirror></div>\n    </div>\n    <div id=preview data-montage-id=preview>\n        <div id=iframe-wrapper>\n            <div data-montage-id=montageFrame></div>\n        </div>\n        <div id=logger data-montage-id=logger></div>\n    </div>\n</div>\n</body>\n</html>'}),montageDefine("8775e1b","examples",{dependencies:["montage/ui/component"],factory:function(e,t){t.examples=[{label:"Simple component",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    templateDidLoad: {\n        value: function() {\n            console.log("templateDidLoad");\n        }\n    }\n});\n'},{label:"Simple button",css:"",serialization:{button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<button data-montage-id="button"></button>',javascript:""},{label:"Simple binding",css:".slider {\n    width: 50%;\n}",serialization:{slider:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider"},value:50}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@slider.value"}}}},html:'<input type="slider" data-montage-id="slider" class="slider">\n<h2 data-montage-id="text"></h2>',javascript:""},{label:"Simple listener",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleButtonAction: {\n        value: function() {\n            console.log("action!");\n        }\n    }\n});\n'},{label:"Simple condition",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},toggle:{prototype:"digit/ui/checkbox.reel",properties:{element:{"#":"toggle"},checked:!0}},hideBlockCondition:{prototype:"montage/ui/condition.reel",properties:{element:{"#":"block"}},bindings:{condition:{"<-":"@toggle.checked"}}}},html:'<div data-montage-id="component">\n	<label><input type="checkbox" data-montage-id="toggle">Show</label>\n    <div data-montage-id="block">\n        <h2>Hello There!</h2>\n    </div>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n});\n'},{label:"Two-way bindings",css:".slider2 {\n    width: 50%;\n}",serialization:{number:{prototype:"digit/ui/number-field.reel",properties:{element:{"#":"number"},value:50}},slider1:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider1"}},bindings:{value:{"<->":"@number.value"}}},slider2:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider2"}},bindings:{value:{"<->":"@number.value"}}}},html:'<p>\n    <input type="number" data-montage-id="number">\n    <input type="slider" data-montage-id="slider1" class="slider1">\n</p>\n<p>\n    <input type="slider" data-montage-id="slider2" class="slider2">\n</p>',javascript:""},{label:"Accessing repetition objects",css:"",serialization:{repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["Mike","François","Afonso","Heather"],element:{"#":"repetition"}}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@repetition.objectAtCurrentIteration"}}}},html:'<ul data-montage-id="repetition">\n  <li>\n    Hello there <span data-montage-id="text"></span>!\n  </li>\n</ul>',javascript:""},{label:"Listening on repeated buttons",css:"",serialization:{owner:{properties:{element:{"#":"owner"}}},repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["One","Two","Three"],element:{"#":"repetition"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"}},bindings:{label:{"<-":"@repetition.objectAtCurrentIteration"}},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="owner">\n    <ul data-montage-id="repetition">\n        <button data-montage-id="button"></button>\n    </ul>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleAction: {\n        value: function(event) {\n            console.log("action: " + event.target.element.textContent);\n        }\n    }\n});\n'}]}}),montageDefine("c0d90b0","ui/button.reel/button",{dependencies:["ui/native-control","montage/composer/press-composer","montage/collections/dict"],factory:function(e,t){var n=e("ui/native-control").NativeControl,i=e("montage/composer/press-composer").PressComposer,r=e("montage/collections/dict"),a=t.Button=n.specialize({_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=e===!0?!0:!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){void 0===this._label&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},constructor:{value:function(){this.super(),this._pressComposer=new i,this._pressComposer.longPressThreshold=this.holdThreshold,this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){this.super(e,t,n),"hold"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},enterDocument:{value:function(e){n.enterDocument&&n.enterDocument.apply(this,arguments),e&&(this._isInputElement="INPUT"===this.originalElement.tagName,this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this._label=this.originalElement.value)):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,this.setLabelInitialValue(this._labelNode.data),void 0===this._label&&(this._label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){this.super(),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return null===this._detail&&(this._detail=new r),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}});a.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("786da12","ui/scroller.reel/scroller",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Scroller=n.specialize({_scrollX:{value:0},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX!==e&&(this._scrollX=e,this.needsDraw=!0)}},_scrollY:{value:0},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY!==e&&(this._scrollY=e,this.needsDraw=!0)}},_maxTranslateX:{value:0},_maxTranslateY:{value:0},_axis:{value:"auto"},axis:{get:function(){return this._axis},set:function(e){this._axis=e,this.needsDraw=!0}},_displayScrollbars:{value:"auto"},displayScrollbars:{get:function(){return this._displayScrollbars},set:function(e){switch(e){case"vertical":case"horizontal":case"both":case"auto":this._displayScrollbars=e;break;default:this._displayScrollbars="none"}this.needsDraw=!0}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e}},_content:{value:null},_scrollBars:{value:null},handleTranslateStart:{value:function(){this._scrollBars.opacity=.5}},handleTranslateEnd:{value:function(){this._scrollBars.opacity=0}},canDraw:{value:function(){return this.needsDraw=!0,n.canDraw.apply(this,arguments)}},willDraw:{value:function(){this._left=this._element.offsetLeft,this._top=this._element.offsetTop,this._width=this._element.offsetWidth,this._height=this._element.offsetHeight,this._maxTranslateX=this._content.scrollWidth-this._width,0>this._maxTranslateX&&(this._maxTranslateX=0),this._maxTranslateY=this._content.offsetHeight-this._height,0>this._maxTranslateY&&(this._maxTranslateY=0);var e=this.callDelegateMethod("didSetMaxScroll",{x:this._maxTranslateX,y:this._maxTranslateY});switch(e&&(this._maxTranslateX=e.x,this._maxTranslateY=e.y),this.scrollX=Math.min(this._scrollX,this._maxTranslateX),this.scrollY=Math.min(this._scrollY,this._maxTranslateY),this._displayScrollbars){case"horizontal":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!1;
break;case"vertical":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!0;break;case"both":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!0;break;case"auto":this._scrollBars.displayHorizontal=!!this._maxTranslateX,this._scrollBars.displayVertical=!!this._maxTranslateY;break;case"none":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!1}this._scrollBars.displayHorizontal&&(this._content.scrollWidth?(this._scrollBars.horizontalLength=this._width/this._content.scrollWidth,this._scrollBars.horizontalScroll=this._scrollX/this._content.scrollWidth):(this._scrollBars.horizontalLength=1,this._scrollBars.horizontalScroll=0)),this._scrollBars.displayVertical&&(this._content.offsetHeight?(this._scrollBars.verticalLength=this._height/this._content.offsetHeight,this._scrollBars.verticalScroll=this._scrollY/this._content.offsetHeight):(this._scrollBars.verticalLength=1,this._scrollBars.verticalScroll=0))}},draw:{value:function(){var e=-this._scrollX+"px, "+-this._scrollY+"px";this._content.style.webkitTransform="translate3d("+e+", 0px)",this._content.style.MozTransform="translate("+e+")",this._content.style.transform="translate("+e+")"}}})}}),montageDefine("8775e1b","gist",{dependencies:[],factory:function(e,t){var n=t.gist={clientId:"clientId",files:null,oauth:[function(e){n.oauth.callback=e,open("https://github.com/login/oauth/authorize?client_id="+n.clientId+"&scope=gist","popup","width=1015,height=500")},function(e){e?(window.ACCESS_TOKEN=localStorage.access_token=e,n.getUser(n.oauth.callback)):alert("Authentication error"),n.oauth.callback=null}],request:function(e){e.method=e.method||"GET",e.id=e.id||"",e.rev=e.rev||"",e.accepted=e.accepted||[];var t=e.anon||"GET"===e.method;if(!t&&!window.ACCESS_TOKEN)return n.oauth[0](function(){n.request(e)}),void 0;var i=e.path||"gists"+(e.id?"/"+e.id:"")+(e.rev?"/"+e.rev:"")+(e.gpath||"");this._xhr({method:e.method,url:"https://api.github.com/"+i+(!e.anon&&window.ACCESS_TOKEN?"?access_token="+ACCESS_TOKEN:""),headers:e.headers,callback:function(t){var n=t.responseText?JSON.parse(t.responseText):null;n&&n.message&&-1===e.accepted.indexOf(t.status)?alert("Sorry, I got a "+t.status+" ("+n.message+")"):e.callback&&e.callback(n,t)},data:e.data?JSON.stringify(e.data):null})},_xhr:function(e){var t=new XMLHttpRequest,n=e.method||"GET",i=e.data||"";if(t.open(n,e.url+("GET"===n&&i?"?"+i:""),!0),"GET"!==n&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.headers)for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);return t.onreadystatechange=function(){4===t.readyState&&t.responseText&&e.callback(t)},t.send("GET"===n?null:i),t},getUser:function(e){n.request({path:"user",callback:function(t){window.user=t,e&&e(t)}})},save:function(e){e=e||{};var t=e.anon||!window.user,i=e.callback;if(!(!n.id||n.user&&window.user&&n.user.id==user.id||t))return n.fork(n.id,n.save,e.anon),void 0;var r=n.id||"",a=e.cssCode,s=e.htmlMarkup,o=e.jsCode,l=e.settings,c="title",u={};a&&(u["component.css"]={content:a}),s&&(u["component.html"]={content:s}),o&&(u["component.js"]={content:o}),u["settings.json"]={content:JSON.stringify(l)},n.request({anon:e.anon,id:t||e.forceNew?null:r,method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},callback:function(e){e.id&&n.update(e),i&&i(e.id)},data:{description:c,"public":!0,files:u}})},fork:function(e,t){n.request({method:"POST",gpath:"/fork",id:e||n.id||null,headers:{"Content-Type":"text/plain; charset=UTF-8"},callback:function(e){e.id&&(n.update(e),t&&t())},data:{}})},load:function(e,t,i){n.request({id:e||n.id,rev:t||n.rev,callback:function(e){n.update(e);var t,r,a,s,o=this.files=e.files,l=o["component.css"],c=o["component.html"],u=o["component.js"],h=o["settings.json"];if(!l||!c||!u)for(var d in o){var p=d.slice(d.lastIndexOf("."));if(l||".css"!=p||(l=o[d]),c||".html"!=p||(c=o[d]),u||".js"!=p||(u=o[d]),l&&c&&u)break}if(l&&(t=l.content),c&&(r=c.content),u&&(a=u.content),h)try{s=JSON.parse(h.content)}catch(g){console.warn("Unknown settings: ",h),s={}}else s={};i&&i(s,t,r,a)}})},update:function(e){var t=e.id,i=e.history&&e.history[0]&&e.history[0].version||"";n.id!=t?(n.id=t,n.rev=void 0,location.hash="!/"+t):n.rev&&n.rev!==i&&(n.rev=i,location.hash="!/"+t+"/"+i),e.user&&(n.user=e.user),n.saved=!0},saved:!1};window.ACCESS_TOKEN=localStorage.access_token}}),montageDefine("786da12","package.json",{exports:{name:"matte",version:"0.1.3",repository:{type:"git",url:"https://github.com/montagejs/matte.git"},dependencies:{montage:"~0.13.0","native":"~0.1.1"},devDependencies:{"montage-testing":"~0.2.0"},exclude:["overview.html","overview","run-tests.html","test"],readme:'matte\n==============\n\nThis is the Montage package template.\n\nNote: Before working on your package you will need to add montage to it.\n\n```\nnpm install .\n```\n\nLayout\n------\n\nThe template contains the following files and directories:\n\n* `ui/` – Directory containing all the UI .reel directories.\n* `package.json` – Describes your app and its dependencies\n* `README.md` – This readme. Replace the current content with a description of your app\n* `overview.html`\n* `overview/` – Directory that contains the files for the overview page. This is a different package so you will need to require the component using matte/*.\n  * `main.reel` – The main interface component where you can add the components to show.\n* `node_modules/` – Directory containing all npm packages needed, including Montage. Any packages here must be included as `dependencies` in `package.json` for the Montage require to find them.\n* `test/` – Directory containing tests for your package.\n  * `all.js` – Module that point the test runner to all your jasmine specs.\n* `run-tests.html` – Page to run jasmine tests manually in your browser\n* `testacular.conf.js` – This is the testacular configuration file. You can start testacular by running `node_modules/testacular/bin/testacular start`\n\nCreate the following directories if you need them:\n\n* `locale/` – Directory containing localized content.\n* `scripts/` – Directory containing other JS libraries. If a library doesn’t support the CommonJS "exports" object it will need to be loaded through a `<script>` tag.\n\n',readmeFilename:"README.md",description:"matte ==============",bugs:{url:"https://github.com/montagejs/matte/issues"},_id:"matte@0.1.3",dist:{shasum:"d7ce4c0111173cd1a2cb798abd87e199c5dbcad6"},_from:"matte@0.1.3",_resolved:"https://registry.npmjs.org/matte/-/matte-0.1.3.tgz",directories:{lib:"./"},hash:"786da12",mappings:{montage:{name:"montage",hash:"59aee0c",location:"../montage@59aee0c/"},"native":{name:"native",hash:"c0d90b0",location:"../native@c0d90b0/"}},production:!0,useScriptInjection:!0}}),montageDefine("c0d90b0","package.json",{exports:{name:"native",version:"0.1.2",repository:{type:"git",url:"https://github.com/montagejs/native.git"},dependencies:{montage:"~0.13.0"},devDependencies:{"montage-testing":"~0.2.0"},exclude:["overview.html","overview","run-tests.html","test"],readme:'montage-native\n==============\n\nThis is the Montage package template.\n\nNote: Before working on your package you will need to add montage to it.\n\n```\nnpm install .\n```\n\nLayout\n------\n\nThe template contains the following files and directories:\n\n* `ui/` – Directory containing all the UI .reel directories.\n* `package.json` – Describes your app and its dependencies\n* `README.md` – This readme. Replace the current content with a description of your app\n* `overview.html`\n* `overview/` – Directory that contains the files for the overview page. This is a different package so you will need to require the component using montage-native/*.\n  * `main.reel` – The main interface component where you can add the components to show.\n* `node_modules/` – Directory containing all npm packages needed, including Montage. Any packages here must be included as `dependencies` in `package.json` for the Montage require to find them.\n* `test/` – Directory containing tests for your package.\n  * `all.js` – Module that point the test runner to all your jasmine specs.\n* `run-tests.html` – Page to run jasmine tests manually in your browser\n* `testacular.conf.js` – This is the testacular configuration file. You can start testacular by running `node_modules/testacular/bin/testacular start`\n\nCreate the following directories if you need them:\n\n* `locale/` – Directory containing localized content.\n* `scripts/` – Directory containing other JS libraries. If a library doesn’t support the CommonJS "exports" object it will need to be loaded through a `<script>` tag.\n\n',readmeFilename:"README.md",description:"montage-native ==============",bugs:{url:"https://github.com/montagejs/native/issues"},_id:"native@0.1.2",_from:"native@~0.1.1",directories:{lib:"./"},hash:"c0d90b0",mappings:{montage:{name:"montage",hash:"59aee0c",location:"../montage@59aee0c/"}},production:!0,useScriptInjection:!0}}),montageDefine("8775e1b","ui/montage-frame.reel/montage-frame",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.MontageFrame=n.specialize({_css:{value:null},_serialization:{value:null},_html:{value:null},_javascript:{value:null},_iframeReady:{value:!1},_iframeWindow:{value:null},_iframeDocument:{value:null},_cssElement:{value:null},_serializationElement:{value:null},_javascriptElement:{value:null},logMessages:{distinct:!0,value:[]},enterDocument:{value:function(e){var t=this;e&&window.addEventListener("message",function(e){e._event.source===t._element.contentWindow&&"ready"===e.data&&(t._iframeReady=!0,t.needsDraw=!0,t._iframeWindow=t._element.contentWindow,t._iframeDocument=t._element.contentDocument,t._cssElement=t._iframeDocument.head.querySelector("style"),t._javascriptElement=t._iframeDocument.head.querySelector("script[type='text/montage-javascript']"),t._iframeWindow.console.debug=t.debug.bind(t),t._iframeWindow.console.log=t.log.bind(t))},!1)}},debug:{value:function(e){0==e.indexOf("Syntax error")?this._iframeDocument.body.innerHTML="<pre>"+e+"</pre>":console.debug.apply(console,arguments)}},log:{value:function(){this.logMessages.push(Array.prototype.join.call(arguments," ")),console.log.apply(console,arguments)}},load:{value:function(e,t,n,i){this._css=e,this._serialization=t,this._html=n,this._javascript=i,this.needsDraw=!0}},draw:{value:function(){if(this._iframeReady){var e=this._iframeDocument.head.querySelector("script[type='text/montage-serialization']");e&&e.parentNode.removeChild(e),this._serializationElement=this._iframeDocument.createElement("script"),this._serializationElement.setAttribute("type","text/montage-serialization"),this._iframeDocument.head.appendChild(this._serializationElement),this._iframeWindow.Frame.reset(),this._cssElement.textContent=this._css,this._serializationElement.textContent=this._serialization||"{}",this._javascriptElement.textContent=this._javascript,this._iframeDocument.body.innerHTML=this._html,this._iframeWindow.Frame.boot()}}}})}}),montageDefine("786da12","ui/toggle-button.reel/toggle-button",{dependencies:["ui/button.reel"],factory:function(e,t){var n=e("ui/button.reel").Button;t.ToggleButton=n.specialize({hasTemplate:{value:!0},_pressed:{value:!1},pressed:{get:function(){return this._pressed},set:function(e){this._pressed=!!e,this._label=this._pressed?this._pressedLabel:this._unpressedLabel,this.needsDraw=!0}},_unpressedLabel:{value:null},unpressedLabel:{get:function(){return this._unpressedLabel},set:function(e){this._unpressedLabel=e,this._pressed||(this.label=this._unpressedLabel,this.needsDraw=!0)}},_pressedLabel:{value:null},pressedLabel:{get:function(){return this._pressedLabel},set:function(e){this._pressedLabel=e,this._pressed&&(this.label=this._pressedLabel,this.needsDraw=!0)}},_pressedClass:{value:"pressed"},pressedClass:{get:function(){return this._pressedClass},set:function(e){this._pressedClass=e,this._pressed&&(this.needsDraw=!0)}},label:{get:function(){return Object.getPropertyDescriptor(n,"label").get.call(this)},set:function(e){Object.getPropertyDescriptor(n,"label").set.call(this,e),this._pressed===!0&&this._label===this._unpressedLabel?this.pressed=!1:this._pressed===!1&&this._label===this._pressedLabel&&(this.pressed=!0)}},setLabelInitialValue:{value:function(e){null===this._label&&(this._label=e)}},enterDocument:{value:function(e){this.super(e),e&&(null===this._unpressedLabel&&null!==this._label&&(this._unpressedLabel=this._label),null===this._pressedLabel&&null!==this._label&&(this._pressedLabel=this._label))}},draw:{value:function(){this.super(),this._pressed?(this._element.classList.add(this._pressedClass),this._element.setAttribute("aria-pressed",!0)):(this._element.classList.remove(this._pressedClass),this._element.setAttribute("aria-pressed",!1))}},_dispatchActionEvent:{value:function(){this.pressed=!this._pressed,this.super()}},toggle:{value:function(){this.pressed=!this._pressed}}})}}),montageDefine("8775e1b","ui/logger.reel/logger",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Logger=n.specialize({constructor:{value:function(){this.super()}},_scroller:{value:null},_output:{value:null},input:{distinct:!0,value:[]},_isOpen:{value:!1},isOpen:{get:function(){return this._isOpen},set:function(e){this._isOpen!==e&&(this._isOpen=e,this.needsDraw=!0)}},_value:{value:""},_newMessages:{distinct:!0,value:[]},templateDidLoad:{value:function(){this.addRangeAtPathChangeListener("input",this,"handleInputChange")}},log:{value:function(e){this._newMessages.push(e),this.needsDraw=!0}},draw:{value:function(){var e=this._newMessages;if(e.length>0){this._value+=e.join("\n")+"\n",e.length=0,this._element.classList.add("Logger-hilight"),this._scroller.scrollY=Number.MAX_VALUE;var t=this;window.setTimeout(function(){t.needsDraw=!0},100)}else this._element.classList.remove("Logger-hilight");this.isOpen?(this._element.classList.add("open"),this._scroller.needsDraw=!0):(this._element.classList.remove("open"),this._scroller.scrollY=Number.MAX_VALUE),this._output.textContent=this._value}},handleInputChange:{value:function(e){for(var t,n=0;t=e[n];n++)this.log(t)}},handleClearAction:{value:function(){this._value="",this.needsDraw=!0}}})}}),montageDefine("786da12","ui/scroller.reel/scroller.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroller.css>\n    <script type="text/montage-serialization">{"scrollbars":{"prototype":"ui/scroll-bars.reel","properties":{"element":{"#":"scrollbars"}}},"translateComposer1":{"prototype":"montage/composer/translate-composer","properties":{"component":{"@":"owner"},"minTranslateX":0,"minTranslateY":0,"invertAxis":true},"bindings":{"translateX":{"<->":"@owner.scrollX"},"translateY":{"<->":"@owner.scrollY"},"maxTranslateX":{"<-":"@owner._maxTranslateX"},"maxTranslateY":{"<-":"@owner._maxTranslateY"},"axis":{"<-":"@owner.axis"},"hasMomentum":{"<-":"@owner.hasMomentum"}},"listeners":[{"type":"translateStart","listener":{"@":"owner"}},{"type":"translateEnd","listener":{"@":"owner"}}]},"owner":{"prototype":"ui/scroller.reel","properties":{"_content":{"#":"content"},"element":{"#":"montage-scroller"},"_scrollBars":{"@":"scrollbars"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=montage-scroller class=matte-Scroller>\n        <div data-montage-id=scrollbars></div>\n        <div data-montage-id=content class=matte-Scroller-content>\n            <div data-param="*"></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("8775e1b","ui/code-mirror.reel/code-mirror",{dependencies:["montage/ui/component","./codemirror/codemirror-min"],factory:function(e,t){var n=e("montage/ui/component").Component,i=e("./codemirror/codemirror-min").CodeMirror;t.CodeMirror=n.specialize({_codeMirror:{value:null},tabSize:{value:4},indentUnit:{value:4},matchBrackets:{value:!1},lineNumbers:{value:!1},mode:{value:null},_newValue:{value:null},enterDocument:{value:function(e){var t,n;if(e){n="json"===this.mode?{name:"javascript",json:!0}:this.mode,t=this._codeMirror=i(this._element,{mode:n,tabSize:this.tabSize,indentUnit:this.indentUnit,matchBrackets:this.matchBracket,lineNumbers:this.lineNumbers,value:this.value}),this._newValue=null;var r=this.element,a=this.ownerComponent.element.parentElement;setTimeout(function s(){getComputedStyle(r).width===getComputedStyle(a).width?setTimeout(s,50):t.refresh()},0)}}},draw:{value:function(){null!=this._newValue&&(this._codeMirror.setValue(this._newValue),this._newValue=null)}},value:{get:function(){return this._codeMirror?null!=this._newValue?this._newValue:this._codeMirror.getValue():this._newValue},set:function(e){this._newValue=e,this.needsDraw=!0}},hasModeErrors:{value:function(){return!!this._element.querySelector("*[class~='cm-error']")}}})}}),montageDefine("59aee0c","ui/condition.reel/condition",{dependencies:["montage","ui/component","core/logger"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);e("core/logger").logger("condition"),t.Condition=n.specialize({hasTemplate:{value:!1},_condition:{value:!0},_contents:{value:null},constructor:{value:function(){this.super()}},condition:{set:function(e){e!==this._condition&&(this._condition=e,this.needsDraw=!0,this.isDeserializing||this._updateDomContent(e))},get:function(){return this._condition}},_updateDomContent:{value:function(e){"remove"===this.removalStrategy&&(e?this.domContent=this._contents:(this._contents=this.domContent,this.domContent=null))}},deserializedFromTemplate:{value:function(){this._condition||this._updateDomContent(this._condition)}},_removalStrategy:{value:"remove"},removalStrategy:{get:function(){return this._removalStrategy},set:function(e){var t;this._removalStrategy!==e&&("hide"!==e||this.isDeserializing||(t=this.domContent,this.domContent=this._contents,this._contents=t),this._removalStrategy=e,this.needsDraw=!0)}},draw:{value:function(){this.condition?this.element.classList.remove("montage-invisible"):this.element.classList.add("montage-invisible")}}})}}),montageDefine("8775e1b","components",{dependencies:[],factory:function(e,t){t.components=[{label:"Button",name:"button",x:0,y:-76,left:12,width:45,serialization:{prototype:"digit/ui/button.reel",properties:{label:"Button",enabled:!0}},html:'<button data-montage-id=""></button>'},{label:"Slider",name:"slider",x:-46,y:-76,width:43,left:12,serialization:{prototype:"digit/ui/slider.reel",properties:{min:0,max:100,value:50}},html:'<input type="slider" data-montage-id="">'},{label:"Checkbox",name:"checkbox",x:-89,y:-76,left:22,width:24,serialization:{prototype:"digit/ui/checkbox.reel",properties:{checked:!0}},html:'<input type="checkbox" data-montage-id="">'},{label:"TextField",name:"textField",x:-69,y:-101,left:14,serialization:{prototype:"digit/ui/text-field.reel",properties:{value:"Editable text"}},html:'<input data-montage-id="" type="text">'},{label:"Text",name:"text",x:-37,y:-50,left:12,width:44,serialization:{prototype:"montage/ui/text.reel",properties:{value:"Text"}},html:'<p data-montage-id=""></p>'},{label:"Repetition",name:"repetition",x:-29,y:-125,left:19,width:30,serialization:{prototype:"montage/ui/repetition.reel",properties:{content:[1,2,3]}},html:'<ul data-montage-id=""><li>Item</li></ul>'}]}}),montageDefine("8775e1b","ui/logger.reel/logger.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <title>Logger</title>\n    <link rel=stylesheet href=logger.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"logger"},"_scroller":{"@":"scroller"},"_output":{"#":"output"}},"bindings":{"isOpen":{"<-":"@toggle.pressed"}}},"toggle":{"prototype":"matte/ui/toggle-button.reel","properties":{"element":{"#":"toggle"},"pressedLabel":"▲ Console"}},"clear":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"clear"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"scroller":{"prototype":"matte/ui/scroller.reel","properties":{"element":{"#":"scroller"},"axis":"both"}}}</script>\n</head>\n<body>\n    <div data-montage-id=logger class=Logger>\n        <div data-montage-id=scroller class=Logger-scroller>\n            <div data-montage-id=output class=Logger-output></div>\n        </div>\n        <div data-montage-id=buttons class=Logger-buttons>\n            <button data-montage-id=clear class=Logger-clear>Clear</button>\n            <button data-montage-id=toggle class=Logger-toggle>◀ Console</button>\n        </div>\n    </div>\n  \n</body>\n</html>'}),montageDefine("786da12","ui/scroll-bars.reel/scroll-bars.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroll-bars.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"matte-scroll-bars"},"_top":{"#":"top"},"_bottomClip":{"#":"bottom-clip"},"_bottom":{"#":"bottom"},"_left":{"#":"left"},"_rightClip":{"#":"right-clip"},"_right":{"#":"right"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=matte-scroll-bars class=matte-ScrollBars>\n        <div data-montage-id=top class=matte-ScrollBars-top></div>\n        <div data-montage-id=bottom-clip class=matte-ScrollBars-bottomClip>\n            <div data-montage-id=bottom class=matte-ScrollBars-bottom></div>\n        </div>\n        <div data-montage-id=left class=matte-ScrollBars-left></div>\n        <div data-montage-id=right-clip class=matte-ScrollBars-rightClip>\n            <div data-montage-id=right class=matte-ScrollBars-right></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("59aee0c","composer/composer",{dependencies:["montage","core/target"],factory:function(e,t){var n=(e("montage").Montage,e("core/target").Target);t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(){}},_resolveDefaults:{value:function(){null==this.element&&null!=this.component&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("59aee0c","ui/text.reel/text",{dependencies:["montage","ui/component"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("8775e1b","ui/content-view.reel/content-view.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Content View</title>\n    <link rel=stylesheet href=content-view.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"owner"}}},"text":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@owner.title"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=content-view>\n        <h2 data-montage-id=title>Title</h2>\n        <div data-param="*"></div>\n    </div>\n</body>\n</html>'}),montageDefine("8775e1b","ui/component-button.reel/component-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ComponentButton=n.specialize({component:{value:null},_iconStyle:{value:null},enterDocument:{value:function(e){if(e){var t=this,n=this._element;this._iconStyle=this.templateObjects.icon.style,n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){var e=this._element,t=this.component;e.setAttribute("title","Add "+t.label),this._iconStyle.backgroundPosition=t.x+"px "+t.y+"px",this._iconStyle.width=t.width+"px",this._iconStyle.left=t.left+"px"}}})}}),montageDefine("8775e1b","ui/component-button.reel/component-button.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href=component-button.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"owner"}}},"icon":{"value":{"#":"icon"}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=component-button>\n        <div data-montage-id=icon class=icon></div>\n        <div class=highlighter></div>\n    </div>\n</body>\n</html>'}),montageDefine("8775e1b","ui/example-button.reel/example-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ExampleButton=n.specialize({hasTemplate:{value:!1},example:{value:!1},enterDocument:{value:function(e){if(e){var t=this,n=this._element;n.classList.add("example-button"),n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){this._element.textContent=this.example.label}}})}}),montageDefine("8775e1b","ui/montage-frame.reel/montage-frame.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href=montage-frame.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"component"}}}}</script>\n\n</head>\n<body>\n<iframe src="ui/montage-frame.reel/frame/frame.html" data-montage-id=component class=montage-frame></iframe>\n</body>\n</html>'}),montageDefine("c0d90b0","ui/native-control",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component,i=t.NativeControl=n.specialize({hasTemplate:{value:!1},willPrepareForDraw:{value:function(){}}});i.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,style:null,tabindex:null,title:null})}}),montageDefine("c0d90b0","ui/anchor.reel/anchor",{dependencies:["ui/native-control"],factory:function(e,t){var n=e("ui/native-control").NativeControl,i=t.Anchor=n.specialize({blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}}});i.addAttributes({textContent:null,href:null,hreflang:null,media:null,rel:null,target:null,type:null})}}),montageDefine("786da12","ui/anchor.reel/anchor",{dependencies:["montage/ui/component","native/ui/anchor.reel"],factory:function(e,t){var n=(e("montage/ui/component").Component,e("native/ui/anchor.reel").Anchor);t.Anchor=n.specialize({hasTemplate:{value:!1},constructor:{value:function(){this.super(),this.classList.add("matte-Anchor")}}})}}),montageDefine("786da12","ui/button.reel/button",{dependencies:["native/ui/button.reel"],factory:function(e,t){var n=e("native/ui/button.reel").Button;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("matte-Button")}}})}}),montageDefine("786da12","ui/toggle-button.reel/toggle-button.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href="../button.reel/button.css">\n    <link rel=stylesheet href=toggle-button.css>\n</head>\n<body>\n</body>\n</html>'}),montageDefine("8775e1b","ui/code-mirror.reel/code-mirror.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href="codemirror/codemirror.css">\n</head>\n<body>\n</body>\n</html>'}),montageDefine("786da12","ui/button.reel/button.html",{text:"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n</body>\n</html>"}),montageDefine("8775e1b","ui/content-view.reel/content-view",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ContentView=n.specialize({})}});
bundleLoaded("index.html.bundle-1-0.js")