montageDefine("eca8d22","ui/code-mirror.reel/codemirror/codemirror-min",{dependencies:[],factory:function(e,t){var n=t.CodeMirror=function(){function e(a,u){function g(e){return e>=0&&$n.size>e}function y(e){return d($n,e)}function T(e,t){lr=!0;for(var n=t-e.height,r=e;r;r=r.parent)r.height+=n}function k(e){var t={line:0,ch:0};ot(t,{line:$n.size-1,ch:y($n.size-1).text.length},K(e),t,t),nr=!0}function B(){var e=[];return $n.iter(0,$n.size,function(t){e.push(t.text)}),e.join("\n")}function N(e){function t(e){var n=vn(e,!0);if(n&&!P(n,o)){Gn||it(),o=n,Dt(r,n),nr=!1;var i=Ct();(n.line>=i.to||n.line<i.from)&&(a=setTimeout(kn(function(){t(e)}),150))}}Pt(e.shiftKey);for(var n=x(e);n!=Ln;n=n.parentNode)if(n.parentNode==zn&&n!=Rn)return;for(var n=x(e);n!=Ln;n=n.parentNode)if(n.parentNode==Nn)return On.onGutterClick&&On.onGutterClick(xr,I(Nn.childNodes,n)+mr,e),_(e);var r=vn(e);switch(E(e)){case 3:return U&&!R&&gn(e),void 0;case 2:return r&&At(r.line,r.ch,!0),void 0}if(!r)return x(e)==In&&_(e),void 0;Gn||it();var i=+new Date;if(er&&er.time>i-400&&P(er.pos,r))return _(e),setTimeout(yt,20),Wt(r.line);if(Qn&&Qn.time>i-400&&P(Qn.pos,r))return er={time:i,pos:r},_(e),qt(r);Qn={time:i,pos:r};var a,o=r;if(H&&!P(dr.from,dr.to)&&!D(r,dr.from)&&!D(dr.to,r)){Y&&(Fn.draggable=!0);var s=C(Dn,"mouseup",kn(function(t){Y&&(Fn.draggable=!1),tr=!1,s(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(_(t),At(r.line,r.ch,!0),yt())}),!0);return tr=!0,void 0}_(e),At(r.line,r.ch,!0);var l=C(Dn,"mousemove",kn(function(e){clearTimeout(a),_(e),t(e)}),!0),s=C(Dn,"mouseup",kn(function(e){clearTimeout(a);var t=vn(e);t&&Dt(r,t),_(e),yt(),nr=!0,l(),s()}),!0)}function X(e){for(var t=x(e);t!=Ln;t=t.parentNode)if(t.parentNode==Nn)return _(e);var n=vn(e);n&&(er={time:+new Date,pos:n},_(e),qt(n))}function Z(e){function t(e,t){var r=new FileReader;r.onload=function(){a[t]=r.result,++o==i&&(n=zt(n),kn(function(){var e=ht(a.join(""),n,n);Dt(n,e)})())},r.readAsText(e)}e.preventDefault();var n=vn(e,!0),r=e.dataTransfer.files;if(n&&!On.readOnly)if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),o=0,s=0;i>s;++s)t(r[s],s);else try{var a=e.dataTransfer.getData("Text");if(a){var l=ht(a,n,n),u=dr.from,c=dr.to;Dt(n,l),tr&&ht("",u,c),yt()}}catch(e){}}function Q(e){var t=mt();j(t),e.dataTransfer.setDragImage(G,0,0),e.dataTransfer.setData("Text",t)}function et(e){var r,i,a=$[e.keyCode],o=W[On.keyMap].auto;if(null==a||e.altGraphKey)return o&&(On.keyMap=o),null;if(e.altKey&&(a="Alt-"+a),e.ctrlKey&&(a="Ctrl-"+a),e.metaKey&&(a="Cmd-"+a),e.shiftKey&&(r=t("Shift-"+a,On.extraKeys,On.keyMap))?i=!0:r=t(a,On.extraKeys,On.keyMap),"string"==typeof r&&(r=q.propertyIsEnumerable(r)?q[r]:null),o&&(r||!n(e))&&(On.keyMap=o),!r)return!1;if(i){var s=Zn;Zn=null,r(xr),Zn=s}else r(xr);return _(e),!0}function tt(e){Gn||it();var t=e.keyCode;if(V&&27==t&&(e.returnValue=!1),Pt(16==t||e.shiftKey),!On.onKeyEvent||!On.onKeyEvent(xr,b(e))){var n=et(e);window.opera&&(Er=n?e.keyCode:null,!n&&(R?e.metaKey:e.ctrlKey)&&88==e.keyCode&&dt(""))}}function nt(e){if(window.opera&&e.keyCode==Er)return Er=null,_(e),void 0;if(!(On.onKeyEvent&&On.onKeyEvent(xr,b(e))||window.opera&&!e.which&&et(e))){if(On.electricChars&&Yn.electricChars){var t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);Yn.electricChars.indexOf(t)>-1&&setTimeout(kn(function(){Ut(dr.to.line,"smart")}),75)}gt()}}function rt(e){On.onKeyEvent&&On.onKeyEvent(xr,b(e))||16==e.keyCode&&(Zn=null)}function it(){On.readOnly||(Gn||(On.onFocus&&On.onFocus(xr),Gn=!0,-1==Ln.className.search(/\bCodeMirror-focused\b/)&&(Ln.className+=" CodeMirror-focused"),sr||_t(!0)),vt(),bn())}function at(){Gn&&(On.onBlur&&On.onBlur(xr),Gn=!1,Ln.className=Ln.className.replace(" CodeMirror-focused","")),clearInterval(Vn),setTimeout(function(){Gn||(Zn=null)},150)}function ot(e,t,n,r,i){if(yr){var a=[];for($n.iter(e.line,t.line+1,function(e){a.push(e.text)}),yr.addChange(e.line,n.length,a);yr.done.length>On.undoDepth;)yr.done.shift()}ct(e,t,n,r,i)}function st(e,t){var n=e.pop();if(n){var r=[],i=n.start+n.added;$n.iter(n.start,i,function(e){r.push(e.text)}),t.push({start:n.start,added:n.old.length,old:r});var a=zt({line:n.start+n.old.length-1,ch:A(r[r.length-1],n.old[n.old.length-1])});ct({line:n.start,ch:0},{line:i-1,ch:y(i-1).text.length},n.old,a,a),nr=!0}}function lt(){st(yr.done,yr.undone)}function ut(){st(yr.undone,yr.done)}function ct(e,t,n,r,i){function a(e){return Math.min(t.line,t.line+b)>=e?e:e+b}var o=!1,s=br.length;On.lineWrapping||$n.iter(e.line,t.line,function(e){return e.text.length==s?(o=!0,!0):void 0}),(e.line!=t.line||n.length>1)&&(lr=!0);var u=t.line-e.line,c=y(e.line),h=y(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var d=[],p=null;e.line?(p=y(e.line-1),p.fixMarkEnds(h)):h.fixMarkStarts();for(var f=0,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],p));u&&$n.remove(e.line,u,ur),d.length&&$n.insert(e.line,d)}else if(c==h)if(1==n.length)c.replace(e.ch,t.ch,n[0]);else{h=c.split(t.ch,n[n.length-1]),c.replace(e.ch,null,n[0]),c.fixMarkEnds(h);for(var d=[],f=1,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],c));d.push(h),$n.insert(e.line+1,d)}else if(1==n.length)c.replace(e.ch,null,n[0]),h.replace(null,t.ch,""),c.append(h),$n.remove(e.line+1,u,ur);else{var d=[];c.replace(e.ch,null,n[0]),h.replace(null,t.ch,n[n.length-1]),c.fixMarkEnds(h);for(var f=1,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],c));u>1&&$n.remove(e.line+1,u-1,ur),$n.insert(e.line+1,d)}if(On.lineWrapping){var v=In.clientWidth/pn()-3;$n.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/v)||1;t!=e.height&&T(e,t)}})}else $n.iter(e.line,f+n.length,function(e){var t=e.text;t.length>s&&(br=t,s=t.length,hr=null,o=!1)}),o&&(s=0,br="",hr=null,$n.iter(0,$n.size,function(e){var t=e.text;t.length>s&&(s=t.length,br=t)}));for(var g=[],b=n.length-u-1,f=0,_=Xn.length;_>f;++f){var w=Xn[f];e.line>w?g.push(w):w>t.line&&g.push(w+b)}var x=e.line+Math.min(n.length,500);xn(e.line,x),g.push(x),Xn=g,Cn(100),ir.push({from:e.line,to:t.line+1,diff:b});var E={from:e,to:t,text:n};if(ar){for(var C=ar;C.next;C=C.next);C.next=E}else ar=E;Lt(r,i,a(dr.from.line),a(dr.to.line)),zn.style.height=$n.height*dn()+2*fn()+"px"}function ht(e,t,n){function r(r){if(D(r,t))return r;if(!D(n,r))return i;var a=r.line+e.length-(n.line-t.line)-1,o=r.ch;return r.line==n.line&&(o+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:a,ch:o}}t=zt(t),n=n?zt(n):t,e=K(e);var i;return pt(e,t,n,function(e){return i=e,{from:r(dr.from),to:r(dr.to)}}),i}function dt(e,t){pt(K(e),dr.from,dr.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:dr.from,to:dr.from}:{from:dr.from,to:e}})}function pt(e,t,n,r){var i=1==e.length?e[0].length+t.ch:e[e.length-1].length,a=r({line:t.line+e.length-1,ch:i});ot(t,n,e,a.from,a.to)}function ft(e,t){var n=e.line,r=t.line;if(n==r)return y(n).text.slice(e.ch,t.ch);var i=[y(n).text.slice(e.ch)];return $n.iter(n+1,r,function(e){i.push(e.text)}),i.push(y(r).text.slice(0,t.ch)),i.join("\n")}function mt(){return ft(dr.from,dr.to)}function vt(){Cr||Kn.set(On.pollInterval,function(){Sn(),bt(),Gn&&vt(),Tn()})}function gt(){function e(){Sn();var n=bt();n||t?(Cr=!1,vt()):(t=!0,Kn.set(60,e)),Tn()}var t=!1;Cr=!0,Kn.set(20,e)}function bt(){if(sr||!Gn||J(An))return!1;var e=An.value;if(e==Sr)return!1;Zn=null;for(var t=0,n=Math.min(Sr.length,e.length);n>t&&Sr[t]==e[t];)++t;return Sr.length>t?dr.from={line:dr.from.line,ch:dr.from.ch-(Sr.length-t)}:pr&&P(dr.from,dr.to)&&(dr.to={line:dr.to.line,ch:Math.min(y(dr.to.line).text.length,dr.to.ch+(e.length-t))}),dt(e.slice(t),"end"),Sr=e,!0}function _t(e){P(dr.from,dr.to)?e&&(Sr=An.value=""):(Sr="",An.value=mt(),An.select())}function yt(){On.readOnly||An.focus()}function wt(){if(Wn.getBoundingClientRect){var e=Wn.getBoundingClientRect();if(!V||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&Wn.scrollIntoView()}}}function xt(){var e=un(dr.inverted?dr.from:dr.to),t=On.lineWrapping?Math.min(e.x,Fn.offsetWidth):e.x;return Et(t,e.y,t,e.yBot)}function Et(e,t,n,r){var i=mn(),a=fn(),o=dn();t+=a,r+=a,e+=i,n+=i;var s=In.clientHeight,l=In.scrollTop,u=!1,c=!0;l>t?(In.scrollTop=Math.max(0,t-2*o),u=!0):r>l+s&&(In.scrollTop=r+o-s,u=!0);var h=In.clientWidth,d=In.scrollLeft,p=On.fixedGutter?Bn.clientWidth:0;return d+p>e?(50>e&&(e=0),In.scrollLeft=Math.max(0,e-10-p),u=!0):n>h+d-3&&(In.scrollLeft=n+10-h,u=!0,n>zn.clientWidth&&(c=!1)),u&&On.onScroll&&On.onScroll(xr),c}function Ct(){var e=dn(),t=In.scrollTop-fn(),n=Math.max(0,Math.floor(t/e)),r=Math.ceil((t+In.clientHeight)/e);return{from:f($n,n),to:f($n,r)}}function St(e,t){if(!In.clientWidth)return mr=vr=fr=0,void 0;var n=Ct();if(!(e!==!0&&0==e.length&&n.from>=mr&&vr>=n.to)){var r=Math.max(n.from-100,0),i=Math.min($n.size,n.to+100);r>mr&&20>r-mr&&(r=mr),vr>i&&20>vr-i&&(i=Math.min($n.size,vr));for(var a=e===!0?[]:Tt([{from:mr,to:vr,domStart:0}],e),o=0,s=0;a.length>s;++s){var l=a[s];r>l.from&&(l.domStart+=r-l.from,l.from=r),l.to>i&&(l.to=i),l.from>=l.to?a.splice(s--,1):o+=l.to-l.from}if(o!=i-r){a.sort(function(e,t){return e.domStart-t.domStart});var u=dn(),c=Bn.style.display;Hn.style.display=Bn.style.display="none",kt(r,i,a),Hn.style.display="";var h=r!=mr||i!=vr||gr!=In.clientHeight+u;if(h&&(gr=In.clientHeight+u),mr=r,vr=i,fr=m($n,r),Rn.style.top=fr*u+"px",zn.style.height=$n.height*u+2*fn()+"px",Hn.childNodes.length!=vr-mr)throw Error("BAD PATCH! "+JSON.stringify(a)+" size="+(vr-mr)+" nodes="+Hn.childNodes.length);if(On.lineWrapping){hr=In.clientWidth;var d=Hn.firstChild;$n.iter(mr,vr,function(e){if(!e.hidden){var t=Math.round(d.offsetHeight/u)||1;e.height!=t&&(T(e,t),lr=!0)}d=d.nextSibling})}else null==hr&&(hr=sn(br)),hr>In.clientWidth?(Fn.style.width=hr+"px",zn.style.width="",zn.style.width=In.scrollWidth+"px"):Fn.style.width=zn.style.width="";return Bn.style.display=c,(h||lr)&&Ot(),Mt(),!t&&On.onUpdate&&On.onUpdate(xr),!0}}}function Tt(e,t){for(var n=0,r=t.length||0;r>n;++n){for(var i=t[n],a=[],o=i.diff||0,s=0,l=e.length;l>s;++s){var u=e[s];i.to<=u.from&&i.diff?a.push({from:u.from+o,to:u.to+o,domStart:u.domStart}):i.to<=u.from||i.from>=u.to?a.push(u):(i.from>u.from&&a.push({from:u.from,to:i.from,domStart:u.domStart}),i.to<u.to&&a.push({from:i.to+o,to:u.to+o,domStart:u.domStart+(i.to-u.from)}))}e=a}return e}function kt(e,t,n){function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var i=0,a=Hn.firstChild,o=0;n.length>o;++o){for(var s=n[o];s.domStart>i;)a=r(a),i++;for(var l=0,u=s.to-s.from;u>l;++l)a=a.nextSibling,i++}for(;a;)a=r(a)}else Hn.innerHTML="";var c=n.shift(),a=Hn.firstChild,l=e,h=dr.from.line,d=dr.to.line,p=e>h&&d>=e,f=Dn.createElement("div");$n.iter(e,t,function(e){var t=null,r=null;p?(t=0,d==l&&(p=!1,r=dr.to.ch)):h==l&&(d==l?(t=dr.from.ch,r=dr.to.ch):(p=!0,t=dr.from.ch)),c&&c.to==l&&(c=n.shift()),!c||c.from>l?(f.innerHTML=e.hidden?"<pre></pre>":e.getHTML(t,r,!0,_r),Hn.insertBefore(f.firstChild,a)):a=a.nextSibling,++l})}function Ot(){if(On.gutter||On.lineNumbers){var e=Rn.offsetHeight,t=In.clientHeight;Bn.style.height=(2>e-t?t:e)+"px";var n=[],r=mr;$n.iter(mr,Math.max(vr,mr+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,i=On.lineNumbers?r+On.firstLineNumber:null;t&&t.text?i=t.text.replace("%N%",null!=i?i:""):null==i&&(i=" "),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",i);for(var a=1;e.height>a;++a)n.push("<br/>&#160;");n.push("</pre>")}++r}),Bn.style.display="none",Nn.innerHTML=n.join("");for(var i=($n.size+"").length,a=Nn.firstChild,o=M(a),s="";i>o.length+s.length;)s+=" ";s&&a.insertBefore(Dn.createTextNode(s),a.firstChild),Bn.style.display="",Fn.style.marginLeft=Bn.offsetWidth+"px",lr=!1}}function Mt(){var e=dr.inverted?dr.from:dr.to,t=(dn(),un(e,!0)),n=O(Ln),r=O(Hn);jn.style.top=t.y+r.top-n.top+"px",jn.style.left=t.x+r.left-n.left+"px",P(dr.from,dr.to)?(Wn.style.top=t.y+"px",Wn.style.left=(On.lineWrapping?Math.min(t.x,Fn.offsetWidth):t.x)+"px",Wn.style.display=""):Wn.style.display="none"}function Pt(e){Zn=e?Zn||(dr.inverted?dr.to:dr.from):null}function Dt(e,t){var n=Zn&&zt(Zn);n&&(D(n,e)?e=n:D(t,n)&&(t=n)),Lt(e,t),rr=!0}function Lt(e,t,n,r){if(Tr=null,null==n&&(n=dr.from.line,r=dr.to.line),!P(dr.from,e)||!P(dr.to,t)){if(D(t,e)){var i=t;t=e,e=i}e.line!=n&&(e=jt(e,n,dr.from.ch)),t.line!=r&&(t=jt(t,r,dr.to.ch)),P(e,t)?dr.inverted=!1:P(e,dr.to)?dr.inverted=!1:P(t,dr.from)&&(dr.inverted=!0),P(e,t)?P(dr.from,dr.to)||ir.push({from:n,to:r+1}):P(dr.from,dr.to)?ir.push({from:e.line,to:t.line+1}):(P(e,dr.from)||(n>e.line?ir.push({from:e.line,to:Math.min(t.line,n)+1}):ir.push({from:n,to:Math.min(r,e.line)+1})),P(t,dr.to)||(r>t.line?ir.push({from:Math.max(n,e.line),to:r+1}):ir.push({from:Math.max(e.line,r),to:t.line+1}))),dr.from=e,dr.to=t,or=!0}}function jt(e,t,n){function r(t){for(var r=e.line+t,i=1==t?$n.size:-1;r!=i;){var a=y(r);if(!a.hidden){var o=e.ch;return(o>n||o>a.text.length)&&(o=a.text.length),{line:r,ch:o}}r+=t}}var i=y(e.line);return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function At(e,t,n){var r=zt({line:e,ch:t||0});(n?Dt:Lt)(r,r)}function It(e){return Math.max(0,Math.min(e,$n.size-1))}function zt(e){if(0>e.line)return{line:0,ch:0};if(e.line>=$n.size)return{line:$n.size-1,ch:y($n.size-1).text.length};var t=e.ch,n=y(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function Rt(e,t){function n(){for(var t=a+e,n=0>e?-1:$n.size;t!=n;t+=e){var r=y(t);if(!r.hidden)return a=t,s=r,!0}}function r(t){if(o==(0>e?0:s.text.length)){if(t||!n())return!1;o=0>e?s.text.length:0}else o+=e;return!0}var i=dr.inverted?dr.from:dr.to,a=i.line,o=i.ch,s=y(a);if("char"==t)r();else if("column"==t)r(!0);else if("word"==t)for(var l=!1;!(0>e)||r();){if(z(s.text.charAt(o)))l=!0;else if(l){0>e&&(e=1,r());break}if(e>0&&!r())break}return{line:a,ch:o}}function Bt(e,t){var n=0>e?dr.from:dr.to;(Zn||P(dr.from,dr.to))&&(n=Rt(e,t)),At(n.line,n.ch,!0)}function Nt(e,t){P(dr.from,dr.to)?0>e?ht("",Rt(e,t),dr.to):ht("",dr.from,Rt(e,t)):ht("",dr.from,dr.to),rr=!0}function Ft(e,t){var n=0,r=un(dr.inverted?dr.from:dr.to,!0);null!=Tr&&(r.x=Tr),"page"==t?n=In.clientHeight:"line"==t&&(n=dn());var i=cn(r.x,r.y+n*e+2);At(i.line,i.ch,!0),Tr=r.x}function qt(e){for(var t=y(e.line).text,n=e.ch,r=e.ch;n>0&&z(t.charAt(n-1));)--n;for(;t.length>r&&z(t.charAt(r));)++r;Dt({line:e.line,ch:n},{line:e.line,ch:r})}function Wt(e){Dt({line:e,ch:0},{line:e,ch:y(e).text.length})}function Ht(e){if(P(dr.from,dr.to))return Ut(dr.from.line,e);for(var t=dr.to.line-(dr.to.ch?0:1),n=dr.from.line;t>=n;++n)Ut(n,e)}function Ut(e,t){if(t||(t="add"),"smart"==t)if(Yn.indent)var n=wn(e);else t="prev";var r,i=y(e),a=i.indentation(On.tabSize),o=i.text.match(/^\s*/)[0];"prev"==t?r=e?y(e-1).indentation(On.tabSize):0:"smart"==t?r=Yn.indent(n,i.text.slice(o.length),i.text):"add"==t?r=a+On.indentUnit:"subtract"==t&&(r=a-On.indentUnit),r=Math.max(0,r);var s=r-a;if(s){var l="",u=0;if(On.indentWithTabs)for(var c=Math.floor(r/On.tabSize);c;--c)u+=On.tabSize,l+="	";for(;r>u;)++u,l+=" "}else{if(dr.from.line!=e&&dr.to.line!=e)return;var l=o}ht(l,{line:e,ch:0},{line:e,ch:o.length})}function Vt(){Yn=e.getMode(On,On.mode),$n.iter(0,$n.size,function(e){e.stateAfter=null}),Xn=[0],Cn()}function Yt(){var e=On.gutter||On.lineNumbers;Bn.style.display=e?"":"none",e?lr=!0:Hn.parentNode.style.marginLeft=0}function Xt(){if(On.lineWrapping){Ln.className+=" CodeMirror-wrap";var e=In.clientWidth/pn()-3;$n.iter(0,$n.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&T(t,n)}}),Fn.style.width=zn.style.width=""}else Ln.className=Ln.className.replace(" CodeMirror-wrap",""),hr=null,br="",$n.iter(0,$n.size,function(e){1!=e.height&&!e.hidden&&T(e,1),e.text.length>br.length&&(br=e.text)});ir.push({from:0,to:$n.size})}function Gt(){for(var e='<span class="cm-tab">',t=0;On.tabSize>t;++t)e+=" ";return e+"</span>"}function Kt(){_r=Gt(),St(!0)}function Jt(){In.className=In.className.replace(/\s*cm-s-\w+/g,"")+On.theme.replace(/(^|\s)\s*/g," cm-s-")}function $t(){this.set=[]}function Zt(e,t,n){function r(e,t,n,r){y(e).addMark(new o(t,n,r,i.set))}e=zt(e),t=zt(t);var i=new $t;if(e.line==t.line)r(e.line,e.ch,t.ch,n);else{r(e.line,e.ch,null,n);for(var a=e.line+1,s=t.line;s>a;++a)r(a,null,null,n);r(t.line,null,t.ch,n)}return ir.push({from:e.line,to:t.line+1}),i}function Qt(e){e=zt(e);var t=new s(e.ch);return y(e.line).addMark(t),t}function en(e,t,n){return"number"==typeof e&&(e=y(It(e))),e.gutterMarker={text:t,style:n},lr=!0,e}function tn(e){"number"==typeof e&&(e=y(It(e))),e.gutterMarker=null,lr=!0}function nn(e,t){var n=e,r=e;return"number"==typeof e?r=y(It(e)):n=p(e),null==n?null:t(r,n)?(ir.push({from:n,to:n+1}),r):null}function rn(e,t){return nn(e,function(e){return e.className!=t?(e.className=t,!0):void 0})}function an(e,t){return nn(e,function(e,n){return e.hidden!=t?(e.hidden=t,T(e,t?0:1),t&&(dr.from.line==n||dr.to.line==n)&&Lt(jt(dr.from,dr.from.line,dr.from.ch),jt(dr.to,dr.to.line,dr.to.ch)),lr=!0):void 0})}function on(e){if("number"==typeof e){if(!g(e))return null;var t=e;if(e=y(e),!e)return null}else{var t=p(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function sn(e){return qn.innerHTML="<pre><span>x</span></pre>",qn.firstChild.firstChild.firstChild.nodeValue=e,qn.firstChild.firstChild.offsetWidth||10}function ln(e,t){var n="";if(On.lineWrapping){var r=e.text.indexOf(" ",t+2);n=j(e.text.slice(t+1,0>r?e.text.length:r+(V?5:0)))}qn.innerHTML="<pre>"+e.getHTML(null,null,!1,_r,t)+'<span id="CodeMirror-temp-'+Dr+'">'+j(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var i=document.getElementById("CodeMirror-temp-"+Dr),a=i.offsetTop,o=i.offsetLeft;if(V&&t&&0==a&&0==o){var s=document.createElement("span");s.innerHTML="x",i.parentNode.insertBefore(s,i.nextSibling),a=s.offsetTop}return{top:a,left:o}}function un(e,t){var n,r=dn(),i=r*(m($n,e.line)-(t?fr:0));if(0==e.ch)n=0;else{var a=ln(y(e.line),e.ch);n=a.left,On.lineWrapping&&(i+=Math.max(0,a.top))}return{x:n,y:i,yBot:i+r}}function cn(e,t){function n(e){var t=ln(s,e);if(u){var n=Math.round(t.top/r);return Math.max(0,t.left+(n-c)*In.clientWidth)}return t.left}0>t&&(t=0);var r=dn(),i=pn(),a=fr+Math.floor(t/r),o=f($n,a);if(o>=$n.size)return{line:$n.size-1,ch:y($n.size-1).text.length};var s=y(o),l=s.text,u=On.lineWrapping,c=u?a-m($n,o):0;if(0>=e&&0==c)return{line:o,ch:0};for(var h,d=0,p=0,v=l.length,g=Math.min(v,Math.ceil((e+.9*c*In.clientWidth)/i));;){var b=n(g);if(!(e>=b&&v>g)){h=b,v=g;break}g=Math.min(v,Math.ceil(1.2*g))}if(e>h)return{line:o,ch:v};for(g=Math.floor(.8*v),b=n(g),e>b&&(d=g,p=b);;){if(1>=v-d)return{line:o,ch:h-e>e-p?d:v};var _=Math.ceil((d+v)/2),w=n(_);w>e?(v=_,h=w):(d=_,p=w)}}function hn(e){var t=un(e,!0),n=O(Fn);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function dn(){if(null==Mr){Mr="<pre>";for(var e=0;49>e;++e)Mr+="x<br/>";Mr+="x</pre>"}var t=Hn.clientHeight;return t==Or?kr:(Or=t,qn.innerHTML=Mr,kr=qn.firstChild.offsetHeight/50||1,qn.innerHTML="",kr)}function pn(){return In.clientWidth==Lr?Pr:(Lr=In.clientWidth,Pr=sn("x"))}function fn(){return Fn.offsetTop}function mn(){return Fn.offsetLeft}function vn(e,t){var n,r,i=O(In,!0);try{n=e.clientX,r=e.clientY}catch(e){return null}if(!t&&(n-i.left>In.clientWidth||r-i.top>In.clientHeight))return null;var a=O(Fn,!0);return cn(n-a.left,r-a.top)}function gn(e){function t(){var e=K(An.value).join("\n");e!=i&&kn(dt)(e,"end"),jn.style.position="relative",An.style.cssText=r,sr=!1,_t(!0),vt()}var n=vn(e);if(n&&!window.opera){(P(dr.from,dr.to)||D(n,dr.from)||!D(n,dr.to))&&kn(At)(n.line,n.ch);var r=An.style.cssText;jn.style.position="absolute",An.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",sr=!0;var i=An.value=mt();if(yt(),An.select(),U){w(e);var a=C(window,"mouseup",function(){a(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function bn(){clearInterval(Vn);var e=!0;Wn.style.visibility="",Vn=setInterval(function(){Wn.style.visibility=(e=!e)?"":"hidden"},650)}function _n(e){function t(e,t,n){if(e.text)for(var r,i=e.styles,a=o?0:e.text.length-1,l=o?0:i.length-2,u=o?i.length:-2;l!=u;l+=2*s){var c=i[l];if(null==i[l+1]||i[l+1]==d){for(var h=o?0:c.length-1,m=o?c.length:-1;h!=m;h+=s,a+=s)if(a>=t&&n>a&&f.test(r=c.charAt(h))){var v=jr[r];if(">"==v.charAt(1)==o)p.push(r);else{if(p.pop()!=v.charAt(0))return{pos:a,match:!1};if(!p.length)return{pos:a,match:!0}}}}else a+=s*c.length}}var n=dr.inverted?dr.from:dr.to,r=y(n.line),i=n.ch-1,a=i>=0&&jr[r.text.charAt(i)]||jr[r.text.charAt(++i)];if(a){for(var o=(a.charAt(0),">"==a.charAt(1)),s=o?1:-1,l=r.styles,u=i+1,c=0,h=l.length;h>c;c+=2)if(0>=(u-=l[c].length)){var d=l[c+1];break}for(var p=[r.text.charAt(i)],f=/[(){}[\]]/,c=n.line,h=o?Math.min(c+100,$n.size):Math.max(-1,c-100);c!=h;c+=s){var r=y(c),m=c==n.line,v=t(r,m&&o?i+1:0,m&&!o?i:r.text.length);if(v)break}v||(v={pos:null,match:!1});var d=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",g=Zt({line:n.line,ch:i},{line:n.line,ch:i+1},d),b=null!=v.pos&&Zt({line:c,ch:v.pos},{line:c,ch:v.pos+1},d),_=kn(function(){g.clear(),b&&b.clear()});e?setTimeout(_,800):cr=_}}function yn(e){for(var t,n,r=e,i=e-40;r>i;--r){if(0==r)return 0;var a=y(r-1);if(a.stateAfter)return r;var o=a.indentation(On.tabSize);(null==n||t>o)&&(n=r-1,t=o)}return n}function wn(e){var t=yn(e),n=t&&y(t-1).stateAfter;return n=n?r(Yn,n):i(Yn),$n.iter(t,e,function(e){e.highlight(Yn,n,On.tabSize),e.stateAfter=r(Yn,n)}),e>t&&ir.push({from:t,to:e}),$n.size>e&&!y(e).stateAfter&&Xn.push(e),n}function xn(e,t){var n=wn(e);$n.iter(e,t,function(e){e.highlight(Yn,n,On.tabSize),e.stateAfter=r(Yn,n)})}function En(){for(var e=+new Date+On.workTime,t=Xn.length;Xn.length;){if(y(mr).stateAfter)var n=Xn.pop();else var n=mr;if(!(n>=$n.size)){var a=yn(n),o=a&&y(a-1).stateAfter;o=o?r(Yn,o):i(Yn);var s=0,l=Yn.compareStates,u=!1,c=a,h=!1;if($n.iter(c,$n.size,function(t){var i=t.stateAfter;if(+new Date>e)return Xn.push(c),Cn(On.workDelay),u&&ir.push({from:n,to:c+1}),h=!0;var a=t.highlight(Yn,o,On.tabSize);if(a&&(u=!0),t.stateAfter=r(Yn,o),l){if(i&&l(i,o))return!0}else if(a===!1&&i){if(++s>3&&(!Yn.indent||Yn.indent(i,"")==Yn.indent(o,"")))return!0}else s=0;++c}),h)return;u&&ir.push({from:n,to:c+1})}}t&&On.onHighlightComplete&&On.onHighlightComplete(xr)}function Cn(e){Xn.length&&Jn.set(e,kn(En))}function Sn(){nr=rr=ar=null,ir=[],or=!1,ur=[]}function Tn(){var e,t=!1;or&&(t=!xt()),ir.length?e=St(ir,!0):(or&&Mt(),lr&&Ot()),t&&xt(),or&&(wt(),bn()),Gn&&!sr&&(nr===!0||nr!==!1&&or)&&_t(rr),or&&On.matchBrackets&&setTimeout(kn(function(){cr&&(cr(),cr=null),P(dr.from,dr.to)&&_n(!1)}),20);var n=ar,r=ur;or&&On.onCursorActivity&&On.onCursorActivity(xr),n&&On.onChange&&xr&&On.onChange(xr,n);for(var i=0;r.length>i;++i)r[i](xr);e&&On.onUpdate&&On.onUpdate(xr)}function kn(e){return function(){Ar++||Sn();try{var t=e.apply(this,arguments)}finally{--Ar||Tn()}return t}}var On={},Mn=e.defaults;for(var Pn in Mn)Mn.hasOwnProperty(Pn)&&(On[Pn]=(u&&u.hasOwnProperty(Pn)?u:Mn)[Pn]);var Dn=On.document,Ln=Dn.createElement("div");Ln.className="CodeMirror"+(On.lineWrapping?" CodeMirror-wrap":""),Ln.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',a.appendChild?a.appendChild(Ln):a(Ln);var jn=Ln.firstChild,An=jn.firstChild,In=Ln.lastChild,zn=In.firstChild,Rn=zn.firstChild,Bn=Rn.firstChild,Nn=Bn.firstChild,Fn=Bn.nextSibling.firstChild,qn=Fn.firstChild,Wn=qn.nextSibling,Hn=Wn.nextSibling;Jt(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(An.style.width="0px"),Y||(Fn.draggable=!0),null!=On.tabindex&&(An.tabIndex=On.tabindex),!On.gutter&&!On.lineNumbers&&(Bn.style.display="none");try{sn("x")}catch(Un){throw Un.message.match(/runtime/i)&&(Un=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Un}var Vn,Yn,Xn,Gn,Kn=new S,Jn=new S,$n=new h([new c([new l("")])]);Vt();var Zn,Qn,er,tr,nr,rr,ir,ar,or,sr,lr,ur,cr,hr,dr={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},pr=!1,fr=0,mr=0,vr=0,gr=0,br="",_r=Gt();kn(function(){k(On.value||""),nr=!1})();var yr=new v;C(In,"mousedown",kn(N)),C(In,"dblclick",kn(X)),C(Fn,"dragstart",Q),C(Fn,"selectstart",_),U||C(In,"contextmenu",gn),C(In,"scroll",function(){St([]),On.fixedGutter&&(Bn.style.left=In.scrollLeft+"px"),On.onScroll&&On.onScroll(xr)}),C(window,"resize",function(){St(!0)}),C(An,"keyup",kn(rt)),C(An,"input",gt),C(An,"keydown",kn(tt)),C(An,"keypress",kn(nt)),C(An,"focus",it),C(An,"blur",at),C(In,"dragenter",w),C(In,"dragover",w),C(In,"drop",kn(Z)),C(In,"paste",function(){yt(),gt()}),C(An,"paste",gt),C(An,"cut",kn(function(){dt("")}));var wr;try{wr=Dn.activeElement==An}catch(Un){}wr?setTimeout(it,20):at();var xr=Ln.CodeMirror={getValue:B,setValue:kn(k),getSelection:mt,replaceSelection:kn(dt),focus:function(){yt(),it(),gt()},setOption:function(e,t){var n=On[e];On[e]=t,"mode"==e||"indentUnit"==e?Vt():"readOnly"==e&&t?(at(),An.blur()):"theme"==e?Jt():"lineWrapping"==e&&n!=t?kn(Xt)():"tabSize"==e&&kn(Kt)(),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&kn(Yt)()},getOption:function(e){return On[e]},undo:kn(lt),redo:kn(ut),indentLine:kn(function(e,t){g(e)&&Ut(e,null==t?"smart":t?"add":"subtract")}),indentSelection:kn(Ht),historySize:function(){return{undo:yr.done.length,redo:yr.undone.length}},clearHistory:function(){yr=new v},matchBrackets:kn(function(){_n(!0)}),getTokenAt:kn(function(e){return e=zt(e),y(e.line).getTokenAt(Yn,wn(e.line),e.ch)}),getStateAfter:function(e){return e=It(null==e?$n.size-1:e),wn(e+1)},cursorCoords:function(e){return null==e&&(e=dr.inverted),hn(e?dr.from:dr.to)},charCoords:function(e){return hn(zt(e))},coordsChar:function(e){var t=O(Fn);return cn(e.x-t.left,e.y-t.top)},markText:kn(Zt),setBookmark:Qt,setMarker:kn(en),clearMarker:kn(tn),setLineClass:kn(rn),hideLine:kn(function(e){return an(e,!0)}),showLine:kn(function(e){return an(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!g(e))return null;e=y(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:on,addWidget:function(e,t,n,r,i){e=un(zt(e));var a=e.yBot,o=e.x;if(t.style.position="absolute",zn.appendChild(t),"over"==r)a=e.y;else if("near"==r){var s=Math.max(In.offsetHeight,$n.height*dn()),l=Math.max(zn.clientWidth,Fn.clientWidth)-mn();e.yBot+t.offsetHeight>s&&e.y>t.offsetHeight&&(a=e.y-t.offsetHeight),o+t.offsetWidth>l&&(o=l-t.offsetWidth)}t.style.top=a+fn()+"px",t.style.left=t.style.right="","right"==i?(o=zn.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?o=0:"middle"==i&&(o=(zn.clientWidth-t.offsetWidth)/2),t.style.left=o+mn()+"px"),n&&Et(o,a,o+t.offsetWidth,a+t.offsetHeight)},lineCount:function(){return $n.size},clipPos:zt,getCursor:function(e){return null==e&&(e=dr.inverted),L(e?dr.from:dr.to)},somethingSelected:function(){return!P(dr.from,dr.to)},setCursor:kn(function(e,t,n){null==t&&"number"==typeof e.line?At(e.line,e.ch,n):At(e,t,n)}),setSelection:kn(function(e,t,n){(n?Dt:Lt)(zt(e),zt(t||e))}),getLine:function(e){return g(e)?y(e).text:void 0},getLineHandle:function(e){return g(e)?y(e):void 0},setLine:kn(function(e,t){g(e)&&ht(t,{line:e,ch:0},{line:e,ch:y(e).text.length})}),removeLine:kn(function(e){g(e)&&ht("",{line:e,ch:0},zt({line:e+1,ch:0}))}),replaceRange:kn(ht),getRange:function(e,t){return ft(zt(e),zt(t))},execCommand:function(e){return q[e](xr)},moveH:kn(Bt),deleteH:kn(Nt),moveV:kn(Ft),toggleOverwrite:function(){pr=!pr},posFromIndex:function(e){var t,n=0;return $n.iter(0,$n.size,function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,++n,void 0)}),zt({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return $n.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return kn(e)()},refresh:function(){St(!0)},getInputField:function(){return An},getWrapperElement:function(){return Ln},getScrollerElement:function(){return In},getGutterElement:function(){return Bn}},Er=null,Cr=!1,Sr="",Tr=null;$t.prototype.clear=kn(function(){for(var e=1/0,t=-1/0,n=0,r=this.set.length;r>n;++n){var i=this.set[n],a=i.marked;if(a&&i.parent){var o=p(i);e=Math.min(e,o),t=Math.max(t,o);for(var s=0;a.length>s;++s)a[s].set==this.set&&a.splice(s--,1)}}1/0!=e&&ir.push({from:e,to:t+1})}),$t.prototype.find=function(){for(var e,t,n=0,r=this.set.length;r>n;++n)for(var i=this.set[n],a=i.marked,o=0;a.length>o;++o){var s=a[o];if(s.set==this.set&&(null!=s.from||null!=s.to)){var l=p(i);null!=l&&(null!=s.from&&(e={line:l,ch:s.from}),null!=s.to&&(t={line:l,ch:s.to}))}}return{from:e,to:t}};var kr,Or,Mr,Pr,Dr=Math.floor(16777215*Math.random()).toString(16),Lr=0,jr={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Ar=0;for(var Ir in F)F.propertyIsEnumerable(Ir)&&!xr.propertyIsEnumerable(Ir)&&(xr[Ir]=F[Ir]);return xr}function t(e,t,n){function r(e,t,n){var i=t[e];if(null!=i)return i;if(null==n&&(n=t.fallthrough),null==n)return t.catchall;if("string"==typeof n)return r(e,W[n]);for(var a=0,o=n.length;o>a;++a)if(i=r(e,W[n[a]]),null!=i)return i;return null}return t?r(e,t,n):r(e,W[n])}function n(e){var t=$[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function r(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function i(e,t,n){return e.startState?e.startState(t,n):!0}function a(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function o(e,t,n,r){this.from=e,this.to=t,this.style=n,this.set=r}function s(e){this.from=e,this.to=e,this.line=null}function l(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function u(e,t,n,r){for(var i=0,a=0,o=0;t>a;i+=2){var s=n[i],l=a+s.length;0==o?(l>e&&r.push(s.slice(e-a,Math.min(s.length,t-a)),n[i+1]),l>=e&&(o=1)):1==o&&(l>t?r.push(s.slice(0,t-a),n[i+1]):r.push(s,n[i+1])),a=l}}function c(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;n>t;++t)e[t].parent=this,r+=e[t].height;this.height=r}function h(e){this.children=e;for(var t=0,n=0,r=0,i=e.length;i>r;++r){var a=e[r];t+=a.chunkSize(),n+=a.height,a.parent=this}this.size=t,this.height=n,this.parent=null}function d(e,t){for(;!e.lines;)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(i>t){e=r;break}t-=i}return e.lines[t]}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=I(t.lines,e),r=t.parent;r;t=r,r=r.parent){var i=0;for(r.children.length;r.children[i]!=t;++i)n+=r.children[i].chunkSize()}return n}function f(e,t){var n=0;e:do{for(var r=0,i=e.children.length;i>r;++r){var a=e.children[r],o=a.height;if(o>t){e=a;continue e}t-=o,n+=a.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;i>r;++r){var s=e.lines[r],l=s.height;if(l>t)break;t-=l}return n+r}function m(e,t){var n=0;e:do{for(var r=0,i=e.children.length;i>r;++r){var a=e.children[r],o=a.chunkSize();if(o>t){e=a;continue e}t-=o,n+=a.height}return n}while(!e.lines);for(var r=0;t>r;++r)n+=e.lines[r].height;return n}function v(){this.time=0,this.done=[],this.undone=[]}function g(){w(this)}function b(e){return e.stop||(e.stop=g),e}function _(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function y(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function w(e){_(e),y(e)}function x(e){return e.target||e.srcElement
}function E(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function C(e,t,n,r){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};if(e.attachEvent("on"+t,i),r)return function(){e.detachEvent("on"+t,i)}}}function S(){this.id=null}function T(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var r=0,i=0;t>r;++r)"	"==e.charAt(r)?i+=n-i%n:++i;return i}function k(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function O(e,t){for(var n=e.ownerDocument.body,r=0,i=0,a=!1,o=e;o;o=o.offsetParent){var s=o.offsetLeft,l=o.offsetTop;o==n?(r+=Math.abs(s),i+=Math.abs(l)):(r+=s,i+=l),t&&"fixed"==k(o).position&&(a=!0)}for(var u=t&&!a?null:n,o=e.parentNode;o!=u;o=o.parentNode)null!=o.scrollLeft&&(r-=o.scrollLeft,i-=o.scrollTop);return{left:r,top:i}}function M(e){return e.textContent||e.innerText||e.nodeValue||""}function P(e,t){return e.line==t.line&&e.ch==t.ch}function D(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function L(e){return{line:e.line,ch:e.ch}}function j(e){return G.textContent=e,G.innerHTML}function A(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0&&e.charAt(n)==t.charAt(r);--n,--r);return r+1}function I(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;++n)if(e[n]==t)return n;return-1}function z(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var R=/Mac/.test(navigator.platform),B=(/Win/.test(navigator.platform),{}),N={};e.defineMode=function(t,n){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),B[t]=n},e.defineMIME=function(e,t){N[e]=t},e.getMode=function(t,n){if("string"==typeof n&&N.hasOwnProperty(n)&&(n=N[n]),"string"==typeof n)var r=n,i={};else if(null!=n)var r=n.name,i=n;var a=B[r];return a?a(t,i||{}):(window.console&&console.warn("No mode "+r+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in B)B.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in N)N.propertyIsEnumerable(t)&&e.push({mime:t,mode:N[t]});return e};var F=e.extensions={};e.defineExtension=function(e,t){F[e]=t};var q=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!P(t,n);r||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,r?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,r>=t.ch&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},W=e.keyMap={};W.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},W.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},W.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},W["default"]=R?W.macDefault:W.pcDefault,W.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function r(){t.value=s.getValue()}function i(){r(),t.form.submit=o,t.form.submit(),t.form.submit=i}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),t.form){var a=C(t.form,"submit",r,!0);if("function"==typeof t.form.submit){var o=t.form.submit;t.form.submit=i}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=r,s.getTextArea=function(){return t},s.toTextArea=function(){r(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(a(),"function"==typeof t.form.submit&&(t.form.submit=o))},s},e.copyState=r,e.startState=i,a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return T(this.string,this.start,this.tabSize)},indentation:function(){return T(this.string,null,this.tabSize)},match:function(e,t,n){function r(e){return n?e.toLowerCase():e}if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&t!==!1&&(this.pos+=i[0].length),i}return r(this.string).indexOf(r(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=a,o.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=I(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,r=null==this.to?null:this.to-e+t;return new o(n,r,this.style,this.set)},dup:function(){return new o(null,null,this.style,this.set)},clipTo:function(e,t,n,r,i){null!=this.from&&this.from>=t&&(this.from=Math.max(r,this.from)+i),null!=this.to&&this.to>t&&(this.to=this.to>r?this.to+i:t),e&&r>this.from&&(this.to>r||null==this.to)&&(this.from=null),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},s.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,r,i){(e||this.from>t)&&(n||r>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(r,this.from)+i)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=I(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},l.inheritMarks=function(e,t){var n=new l(e),r=t&&t.marked;if(r)for(var i=0;r.length>i;++i)if(null==r[i].to&&r[i].style){var a=n.marked||(n.marked=[]),o=r[i],s=o.dup();a.push(s),s.attach(n)}return n},l.prototype={replace:function(e,t,n){var r=[],i=this.marked,a=null==t?this.text.length:t;if(u(0,e,this.styles,r),n&&r.push(n,null),u(a,this.text.length,this.styles,r),this.styles=r,this.text=this.text.slice(0,e)+n+this.text.slice(a),this.stateAfter=null,i)for(var o=n.length-(a-e),s=0,l=i[s];i.length>s;++s)l.clipTo(null==e,e||0,null==t,a,o),l.isDead()&&(l.detach(this),i.splice(s--,1))},split:function(e,t){var n=[t,null],r=this.marked;u(e,this.text.length,this.styles,n);var i=new l(t+this.text.slice(e),n);if(r)for(var a=0;r.length>a;++a){var o=r[a],s=o.split(e,t.length);s&&(i.marked||(i.marked=[]),i.marked.push(s),s.attach(i))}return i},append:function(e){var t=this.text.length,n=e.marked,r=this.marked;if(this.text+=e.text,u(0,e.text.length,e.styles,this.styles),r)for(var i=0;r.length>i;++i)null==r[i].to&&(r[i].to=t);if(n&&n.length){r||(this.marked=r=[]);e:for(var i=0;n.length>i;++i){var a=n[i];if(!a.from)for(var o=0;r.length>o;++o){var s=r[o];if(s.to==t&&s.sameSet(a)){s.to=null==a.to?null:a.to+t,s.isDead()&&(s.detach(this),n.splice(i--,1));continue e}}r.push(a),a.attach(this),a.from+=t,null!=a.to&&(a.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var r=0;t.length>r;++r){var i=t[r],a=null==i.to;if(a&&n)for(var o=0;n.length>o;++o)if(n[o].sameSet(i)){a=!1;break}a&&(i.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var r,i=new a(this.text,n),o=this.styles,s=0,l=!1,u=o[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!i.eol();){var c=e.token(i,t),h=this.text.slice(i.start,i.pos);if(i.start=i.pos,s&&o[s-1]==c?o[s-2]+=h:h&&(!l&&(o[s+1]!=c||s&&o[s-2]!=r)&&(l=!0),o[s++]=h,o[s++]=c,r=u,u=o[s]),i.pos>5e3){o[s++]=this.text.slice(i.pos),o[s++]=null;break}}return o.length!=s&&(o.length=s,l=!0),s&&o[s-2]!=r&&(l=!0),l||(5>o.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var r=this.text,i=new a(r);n>i.pos&&!i.eol();){i.start=i.pos;var o=e.token(i,t)}return{start:i.start,end:i.pos,string:i.current(),className:o||null,state:t}},indentation:function(e){return T(this.text,null,e)},getHTML:function(e,t,n,r,i){function a(e,t){e&&(l&&V&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,t?s.push('<span class="',t,'">',j(e).replace(/\t/g,r),"</span>"):s.push(j(e).replace(/\t/g,r)))}function o(){h&&(g+=1,b=h.length>g?h[g]:null)}var s=[],l=!0;n&&s.push(this.className?'<pre class="'+this.className+'">':"<pre>");var u=this.styles,c=this.text,h=this.marked;e==t&&(e=null);var d=c.length;if(null!=i&&(d=Math.min(i,d)),c||null!=i)if(h||null!=e){var p,f=0,m=0,v="",g=-1,b=null;for(o();d>f;){var _=d,y="";for(null!=e&&(e>f?_=e:(null==t||t>f)&&(y=" CodeMirror-selected",null!=t&&(_=Math.min(_,t))));b&&null!=b.to&&f>=b.to;)o();for(b&&(b.from>f?_=Math.min(_,b.from):(y+=" "+b.style,null!=b.to&&(_=Math.min(_,b.to))));;){var w=f+v.length,x=p;if(y&&(x=p?p+y:y),a(w>_?v.slice(0,_-f):v,x),w>=_){v=v.slice(_-f),f=_;break}f=w,v=u[m++],p="cm-"+u[m++]}}null!=e&&null==t&&a(" ","CodeMirror-selected")}else for(var m=0,E=0;d>E;m+=2){var C=u[m],p=u[m+1],S=C.length;E+S>d&&(C=C.slice(0,d-E)),E+=S,a(C,p&&"cm-"+p)}else a(" ",null!=e&&null==t?"CodeMirror-selected":null);return n&&s.push("</pre>"),s.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},c.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;i>r;++r){var a=this.lines[r];if(this.height-=a.height,a.cleanUp(),a.handlers)for(var o=0;a.handlers.length>o;++o)n.push(a.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var r=0,i=t.length;i>r;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;this.children.length>r;++r){var i=this.children[r],a=i.chunkSize();if(a>e){var o=Math.min(t,a-e),s=i.height;if(i.remove(e,o,n),this.height-=s-i.height,a==o&&(this.children.splice(r--,1),i.parent=null),0==(t-=o))break;e=0}else e-=a}if(25>this.size-t){var l=[];this.collapse(l),this.children=[new c(l)]}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,r=0,i=t.length;i>r;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;i>r;++r){var a=this.children[r],o=a.chunkSize();if(o>=e){if(a.insertHeight(e,t,n),a.lines&&a.lines.length>50){for(;a.lines.length>50;){var s=a.lines.splice(a.lines.length-25,25),l=new c(s);a.height-=l.height,this.children.splice(r+1,0,l),l.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new h(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=I(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new h(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;i>r;++r){var a=this.children[r],o=a.chunkSize();if(o>e){var s=Math.min(t,o-e);if(a.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}},v.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+new Date,i=this.done[this.done.length-1];if(r-this.time>400||!i||i.start>e+t||i.start+i.added<e-i.added+i.old.length)this.done.push({start:e,added:t,old:n});else{var a=0;if(i.start>e){for(var o=i.start-e-1;o>=0;--o)i.old.unshift(n[o]);i.added+=i.start-e,i.start=e}else e>i.start&&(a=e-i.start,t+=a);for(var o=i.added-a,s=n.length;s>o;++o)i.old.push(n[o]);t>i.added&&(i.added=t)}this.time=r}},e.e_stop=w,e.e_preventDefault=_,e.e_stopPropagation=y,e.connect=C,S.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var H=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),U=/gecko\/\d{7}/i.test(navigator.userAgent),V=/MSIE \d/.test(navigator.userAgent),Y=/WebKit\//.test(navigator.userAgent),X="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(X="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(O=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var i=document.documentElement||document.body.parentNode;null==i.scrollTop&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var G=document.createElement("pre");"\na"==j("a")?j=function(e){return G.textContent=e,G.innerHTML.slice(1)}:"	"!=j("	")&&(j=function(e){return G.innerHTML="",G.appendChild(document.createTextNode(e)),G.innerHTML}),e.htmlEscape=j;var K=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,r=[];(t=e.indexOf("\n",n))>-1;)r.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return r.push(e.slice(n)),r}:function(e){return e.split(/\r?\n/)};e.splitLines=K;var J=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var $={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=$,function(){for(var e=0;10>e;e++)$[e+48]=e+"";for(var e=65;90>=e;e++)$[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)$[e+111]=$[e+63235]="F"+e}(),e}();n.defineMode("css",function(e){function t(e,t){return o=t,e}function n(e,n){var o=e.next();return"@"==o?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==o&&e.eat("*")?(n.tokenize=r,r(e,n)):"<"==o&&e.eat("!")?(n.tokenize=i,i(e,n)):"="!=o?"~"!=o&&"|"!=o||!e.eat("=")?'"'==o||"'"==o?(n.tokenize=a(o),n.tokenize(e,n)):"#"==o?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==o?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(o)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(o)?t(null,"select-op"):/[;{}:\[\]]/.test(o)?t(null,o):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function r(e,r){for(var i,a=!1;null!=(i=e.next());){if(a&&"/"==i){r.tokenize=n;break}a="*"==i}return t("comment","comment")}function i(e,r){for(var i,a=0;null!=(i=e.next());){if(a>=2&&">"==i){r.tokenize=n;break}a="-"==i?a+1:0}return t("comment","comment")}function a(e){return function(r,i){for(var a,o=!1;null!=(a=r.next())&&(a!=e||o);)o=!o&&"\\"==a;return o||(i.tokenize=n),t("string","string")}}var o,s=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),r=t.stack[t.stack.length-1];return"hash"==o&&"rule"==r?n="atom":"variable"==n&&("rule"==r?n="number":r&&"@media{"!=r||(n="tag")),"rule"==r&&/^[\{\};]$/.test(o)&&t.stack.pop(),"{"==o?"@media"==r?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==o?t.stack.pop():"@media"==o?t.stack.push("@media"):"{"==r&&"comment"!=o&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*s},electricChars:"}"}}),n.defineMIME("text/css","css"),n.defineMode("htmlmixed",function(e){function t(e,t){var n=o.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=i,t.localState=s.startState(o.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=a,t.localState=l.startState(o.indent(t.htmlState,"")),t.mode="css")),n}function r(e,t,n){var r=e.current(),i=r.search(t);return i>-1&&e.backUp(r.length-i),n}function i(e,n){return e.match(/^<\/\s*script\s*>/i,!1)?(n.token=t,n.curState=null,n.mode="html",t(e,n)):r(e,/<\/\s*script\s*>/,s.token(e,n.localState))}function a(e,n){return e.match(/^<\/\s*style\s*>/i,!1)?(n.token=t,n.localState=null,n.mode="html",t(e,n)):r(e,/<\/\s*style\s*>/,l.token(e,n.localState))}var o=n.getMode(e,{name:"xml",htmlMode:!0}),s=n.getMode(e,"javascript"),l=n.getMode(e,"css");return{startState:function(){var e=o.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=n.copyState(e.token==a?l:s,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:n.copyState(o,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?o.indent(e.htmlState,n):e.token==i?s.indent(e.localState,n):l.indent(e.localState,n)},compareStates:function(e,t){return o.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),n.defineMIME("text/html","htmlmixed"),n.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function r(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!1;r=!r&&"\\"==n}return r}function i(e,t,n){return z=e,R=n,t}function a(e,t){var a=e.next();if('"'==a||"'"==a)return n(e,t,o(a));if(/[\[\]{}\(\),;\:\.]/.test(a))return i(a);if("0"==a&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(a))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==a)return e.eat("*")?n(e,t,s):e.eat("/")?(e.skipToEnd(),i("comment","comment")):t.reAllowed?(r(e,"/"),e.eatWhile(/[gimy]/),i("regexp","string")):(e.eatWhile(q),i("operator",null,e.current()));if("#"==a)return e.skipToEnd(),i("error","error");if(q.test(a))return e.eatWhile(q),i("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),u=F.propertyIsEnumerable(l)&&F[l];return u&&t.kwAllowed?i(u.type,u.style,l):i("variable","variable",l)}function o(e){return function(t,n){return r(t,e)||(n.tokenize=a),i("string","string")}}function s(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=a;break}r="*"==n}return i("comment","comment")}function l(e,t,n,r,i,a){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=a,null!=r&&(this.align=r)}function u(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function c(e,t,n,r,i){var a=e.cc;for(H.state=e,H.stream=i,H.marked=null,H.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():N?y:_;if(o(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return H.marked?H.marked:"variable"==n&&u(e,r)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)H.cc.push(arguments[e])}function d(){return h.apply(null,arguments),!0}function p(e){var t=H.state;if(t.context){H.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function f(){H.state.context||(H.state.localVars=U),H.state.context={prev:H.state.context,vars:H.state.localVars}}function m(){H.state.localVars=H.state.context.vars,H.state.context=H.state.context.prev}function v(e,t){var n=function(){var n=H.state;n.lexical=new l(n.indented,H.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function g(){var e=H.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function b(e){return function(t){return t==e?d():";"==e?h():d(arguments.callee)}}function _(e){return"var"==e?d(v("vardef"),O,b(";"),g):"keyword a"==e?d(v("form"),y,_,g):"keyword b"==e?d(v("form"),_,g):"{"==e?d(v("}"),k,g):";"==e?d():"function"==e?d(A):"for"==e?d(v("form"),b("("),v(")"),P,b(")"),g,_,g):"variable"==e?d(v("stat"),E):"switch"==e?d(v("form"),y,v("}","switch"),b("{"),k,g,g):"case"==e?d(y,b(":")):"default"==e?d(b(":")):"catch"==e?d(v("form"),f,b("("),I,b(")"),_,g,m):h(v("stat"),y,b(";"),g)}function y(e){return W.hasOwnProperty(e)?d(x):"function"==e?d(A):"keyword c"==e?d(w):"("==e?d(v(")"),y,b(")"),g,x):"operator"==e?d(y):"["==e?d(v("]"),T(y,"]"),g,x):"{"==e?d(v("}"),T(S,"}"),g,x):d()}function w(e){return e.match(/[;\}\)\],]/)?h():h(y)}function x(e,t){return"operator"==e&&/\+\+|--/.test(t)?d(x):"operator"==e?d(y):";"!=e?"("==e?d(v(")"),T(y,")"),g,x):"."==e?d(C,x):"["==e?d(v("]"),y,b("]"),g,x):void 0:void 0}function E(e){return":"==e?d(g,_):h(x,b(";"),g)}function C(e){return"variable"==e?(H.marked="property",d()):void 0}function S(e){return"variable"==e&&(H.marked="property"),W.hasOwnProperty(e)?d(b(":"),y):void 0}function T(e,t){function n(r){return","==r?d(e,n):r==t?d():d(b(t))}return function(r){return r==t?d():h(e,n)}}function k(e){return"}"==e?d():h(_,k)}function O(e,t){return"variable"==e?(p(t),d(M)):d()}function M(e,t){return"="==t?d(y,M):","==e?d(O):void 0}function P(e){return"var"==e?d(O,L):";"==e?h(L):"variable"==e?d(D):h(L)}function D(e,t){return"in"==t?d(y):d(x,L)}function L(e,t){return";"==e?d(j):"in"==t?d(y):d(y,b(";"),j)}function j(e){")"!=e&&d(y)}function A(e,t){return"variable"==e?(p(t),d(A)):"("==e?d(v(")"),f,T(I,")"),g,_,m):void 0}function I(e,t){return"variable"==e?(p(t),d()):void 0}var z,R,B=e.indentUnit,N=t.json,F=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),a={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a}}(),q=/[+\-*&%=<>!?|]/,W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},H={state:null,column:null,marked:null,cc:null},U={name:"this",next:{name:"arguments"}};return g.lex=!0,{startState:function(e){return{tokenize:a,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-B,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==z?n:(t.reAllowed="operator"==z||"keyword c"==z||z.match(/^[\[{}\(,;:]$/),t.kwAllowed="."!=z,c(t,n,z,R,e))},indent:function(e,t){if(e.tokenize!=a)return 0;var n=t&&t.charAt(0),r=e.lexical,i=r.type,o=n==i;return"vardef"==i?r.indented+4:"form"==i&&"{"==n?r.indented:"stat"==i||"form"==i?r.indented+B:"switch"!=r.info||o?r.align?r.column+(o?0:1):r.indented+(o?0:B):r.indented+(/^(?:case|default)\b/.test(t)?B:2*B)},electricChars:":{}"}}),n.defineMIME("text/javascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();if("<"==i){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(o(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";b=e.eat("/")?"closeTag":"openTag",e.eatSpace(),g="";for(var s;s=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)g+=s;return t.tokenize=r,"tag"}return"&"==i?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function r(e,t){var r=e.next();return">"==r||"/"==r&&e.eat(">")?(t.tokenize=n,b=">"==r?"endTag":"selfcloseTag","tag"):"="==r?(b="equals",null):/[\'\"]/.test(r)?(t.tokenize=i(r),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function i(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=r;break}return"string"}}function a(e,t){return function(r,i){for(;!r.eol();){if(r.match(t)){i.tokenize=n;break}r.next()}return e}}function o(e){return function(t,r){for(var i;null!=(i=t.next());){if("<"==i)return r.tokenize=o(e+1),r.tokenize(t,r);if(">"==i){if(1==e){r.tokenize=n;break}return r.tokenize=o(e-1),r.tokenize(t,r)}}return"meta"}}function s(){for(var e=arguments.length-1;e>=0;e--)_.cc.push(arguments[e])}function l(){return s.apply(null,arguments),!0}function u(e,t){var n=x.doNotIndent.hasOwnProperty(e)||_.context&&_.context.noIndent;_.context={prev:_.context,tagName:e,indent:_.indented,startOfLine:t,noIndent:n}}function c(){_.context&&(_.context=_.context.prev)}function h(e){if("openTag"==e)return _.tagName=g,l(f,d(_.startOfLine));if("closeTag"==e){var t=!1;return t=_.context?_.context.tagName!=g:!0,t&&(y="error"),l(p(t))}return l()}function d(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&x.autoSelfClosers.hasOwnProperty(_.tagName.toLowerCase())?l():"endTag"==t?(u(_.tagName,e),l()):l()}}function p(e){return function(t){return e&&(y="error"),"endTag"==t?(c(),l()):(y="error",l(arguments.callee))}}function f(e){return"word"==e?(y="attribute",l(f)):"equals"==e?l(m,f):"string"==e?(y="error",l(f)):s()}function m(e){return"word"==e&&x.allowUnquoted?(y="string",l()):"string"==e?l(v):s()}function v(e){return"string"==e?l(v):s()}var g,b,_,y,w=e.indentUnit,x=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},E=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;y=b=g=null;var n=t.tokenize(e,t);if(t.type=b,(n||b)&&"comment"!=n)for(_=t;;){var r=t.cc.pop()||h;if(r(b||n))break}return t.startOfLine=!1,y||n},indent:function(e,t,i){var a=e.context;if(e.tokenize!=r&&e.tokenize!=n||a&&a.noIndent)return i?i.match(/^(\s*)/)[0].length:0;if(E&&/<!\[CDATA\[/.test(t))return 0;for(a&&/^<\//.test(t)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+w:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,r=t.context;;n=n.prev,r=r.prev){if(!n||!r)return n==r;if(n.tagName!=r.tagName)return!1}},electricChars:"/"}}),n.defineMIME("application/xml","xml"),n.defineMIME("text/html",{name:"xml",htmlMode:!0})}}),montageDefine("b1cf93a","composer/translate-composer",{dependencies:["montage","composer/composer","core/event/event-manager"],factory:function(e,t){var n=(e("montage").Montage,e("composer/composer").Composer),r=e("core/event/event-manager").defaultEventManager,i=t.TranslateComposer=n.specialize({_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},_translateX:{value:0},translateX:{get:function(){return this._translateX
},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&this._minTranslateX>t&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&this._minTranslateY>t&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!=e&&(null!==e&&e>this._translateX&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!=e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!=e&&(null!==e&&e>this._translateY&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!=e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e?!0:!1}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,1>this.__momentumDuration&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_start:{value:function(e,t,n){this.pointerStartEventPosition={pageX:e,pageY:t,target:n},this._pointerX=e,this._pointerY=t,window.Touch?(document.addEventListener("touchend",this,!0),this._element.addEventListener("touchmove",this,!1)):(document.addEventListener("mouseup",this,!0),this._element.addEventListener("mousemove",this,!1)),this.isAnimating=!1,this._isFirstMove=!0}},_observedPointer:{value:null},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&-1===i._NATIVE_ELEMENTS.indexOf(e.target.tagName)&&!e.target.isContentEditable}},captureMousedown:{value:function(e){0===e.button&&(this._observedPointer="mouse",this._start(e.clientX,e.clientY,e.target))}},handleMousedown:{value:function(e){0!==e.button||this.eventManager.componentClaimingPointer(this._observedPointer)||this.eventManager.claimPointer(this._observedPointer,this)}},handleMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._firstMove()):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._firstMove())}},captureMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.clientX,e.clientY)):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._move(e.clientX,e.clientY))}},captureMouseup:{value:function(e){this._end(e)}},_releaseInterest:{value:function(){window.Touch?(document.removeEventListener("touchend",this,!0),this._isFirstMove?this._element.removeEventListener("touchmove",this,!1):document.removeEventListener("touchmove",this,!0)):(document.removeEventListener("mouseup",this,!0),this._isFirstMove?this._element.removeEventListener("mousemove",this,!1):document.removeEventListener("mousemove",this,!0)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null}},captureTouchstart:{value:function(e){null!==this._observedPointer&&this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)||e.targetTouches&&1===e.targetTouches.length&&(this._observedPointer=e.targetTouches[0].identifier,this._start(e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.targetTouches[0].target))}},handleTouchstart:{value:function(e){this.eventManager.componentClaimingPointer(this._observedPointer)||e.targetTouches&&1===e.targetTouches.length&&(this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.claimPointer(this._observedPointer,this))}},handleTouchmove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._firstMove()):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._firstMove())}},captureTouchmove:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&(this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.changedTouches[t].clientX,e.changedTouches[t].clientY)):this._analyzeMovement(e.changedTouches[t]))}},captureTouchend:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._end(e.changedTouches[t])}},_analyzeMovement:{value:function(e){var t=e.velocity;if(t){var n,r,i,a,o,s,l,u,c=.7853981633974483,h=2.356194490192345,d=-2.356194490192345,p=-.7853981633974483;if(s=t.speed,0!==t.speed&&!isNaN(t.speed))if(o=t.angle,"horizontal"===this.axis){if(i=c>=o&&o>=p,a=o>=h||d>=o,i||a)return this._stealPointer()}else if("vertical"===this.axis){if(n=p>=o&&o>=d,r=o>=c&&h>=o,n||r)return this._stealPointer()}else{if(s>=this.startTranslateSpeed)return this._stealPointer();if(l=this.pointerStartEventPosition.pageX-e.pageX,u=this.pointerStartEventPosition.pageY-e.pageY,l*l+u*u>this.startTranslateRadius*this.startTranslateRadius)return this._stealPointer()}}}},_stealPointer:{value:function(){return this.eventManager.claimPointer(this._observedPointer,this)}},_translateEndTimeout:{value:null},captureMousewheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleMousewheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._translateY;this._dispatchTranslateStart(),this.translateY=this._translateY-20*e.wheelDeltaY/120,this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd()},400),n!==this._translateY&&this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0,window.Touch?(document.addEventListener("touchmove",this,!0),this._element.removeEventListener("touchmove",this,!1)):(document.addEventListener("mousemove",this,!0),this._element.removeEventListener("mousemove",this,!1)))}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!=this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!=this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_bezierTValue:{value:function(e,t,n,r,i){var a,o,s,l,u=1-3*r+3*t,c=3*r-6*t,h=3*t,d=.5;for(o=0;10>o;o++)l=d*d,a=3*u*l+2*c*d+h,s=1-d,d-=(3*(s*s*d*t+s*l*r)+l*d-e)/a;return l=d*d,s=1-d,3*(s*s*d*n+s*l*i)+l*d}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,r,i=Date.now(),a=!1;this.animateMomentum&&(e=i-this.startTime,this.__momentumDuration>e?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=i),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=i)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&i-this.startStrideXTime>0&&(i-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((i-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,a=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&i-this.startStrideYTime>0&&(i-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((i-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,a=!0):this.posY=t*this.translateStrideY),n=this.posX,r=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=r,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||a,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this.momentumX="vertical"!=this._axis?e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):0,this.momentumY="horizontal"!=this._axis?e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},surrenderPointer:{value:function(){return!this.isMoving}},eventManager:{get:function(){return r}},load:{value:function(){window.Touch?(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("touchstart",this,!1)):(this._element.addEventListener("mousedown",this,!0),this._element.addEventListener("mousedown",this,!1),this._element.addEventListener("mousewheel",this,!1),this._element.addEventListener("mousewheel",this,!0)),this.eventManager.isStoringPointerEvents=!0}},addEventListener:{value:function(e,t,r){n.addEventListener.call(this,e,t,r),"translate"===e&&(this._shouldDispatchTranslate=!0)}}})}}),montageDefine("b1cf93a","ui/repetition.reel/repetition",{dependencies:["montage","ui/component","core/template","core/range-controller","core/promise","collections/map","collections/set","frb/observers"],factory:function(e,t){var n=e("montage").Montage,r=e("ui/component").Component;e("core/template").Template;var i=e("core/range-controller").RangeController,a=e("core/promise").Promise,o=e("collections/map"),s=e("collections/set"),l=e("frb/observers"),u=l.observeProperty,c=l.observeKey,h=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},isFirst:{value:null},isLast:{value:null},isEven:{value:null},isOdd:{value:null},_noTransition:{value:null},constructor:{value:function h(){this.super(),this.repetition=null,this.controller=null,this.content=null,this.defineBinding("object",{"<->":"content"}),this.defineBinding("selected",{"<->":"repetition.contentController._selection.has(content)"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this.defineBinding("isFirst",{"<-":"index == 0"}),this.defineBinding("isLast",{"<-":"index == repetition.iterations.length - 1"}),this.defineBinding("isEven",{"<-":"index % 2 == 0"}),this.defineBinding("isOdd",{"<-":"index % 2 != 0"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.cachedFirstElement=null}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.content=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex&&this.retractFromDocument();var t=this,n=this.repetition,r=n.element,i=n._boundaries,a=r.ownerDocument.createTextNode(""),o=i[e];i.splice(e,0,a),r.insertBefore(a,o),r.insertBefore(this._fragment,o),n.childComponents.swap(e*n._childComponentsPerIteration,0,this._childComponents);for(var s=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),s--,s||t.forEachElement(function(e){n._iterationForElement.set(e,t)})},u=0;this._childComponents.length>u;u++){var c=this._childComponents[u];c.addEventListener("firstDraw",l,!1),c.needsDraw=!0}n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._dirtyClassListIterations.add(this)}},retractFromDocument:{value:function(){var e=this._drawnIndex,t=this.repetition,n=t.element,r=t._boundaries[e],i=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,o=r.nextSibling;o!=i;){var s=o.nextSibling;n.removeChild(o),a.appendChild(o),o=s}n.removeChild(r),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._dirtyClassListIterations.add(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,r=this._drawnIndex;if(null!=r)for(var i=n._boundaries[r];i!==n._boundaries[r+1];i=i.nextSibling)1===i.nodeType&&e.call(t,i)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},cachedFirstElement:{value:null}});t.Repetition=r.specialize({initWithContent:{value:function(e){return this.content=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new i).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},contentAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addOwnPropertyChangeListener("innerTemplate",this),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=o(),this._iterationForElement=o(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=s(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},cleanupDeletedComponentTree:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._iterationTemplate||this._setupIterationTemplate(),this._isComponentExpanded=!0,a.resolve()}},handleInnerTemplateChange:{value:function(){this._iterationTemplate&&this._teardownIterationTemplate(),this._setupIterationTemplate()}},_setupIterationTemplate:{value:function(){if(!this._newDomContent&&!this._shouldClearDomContentOnNextDraw&&this.innerTemplate){this.innerTemplate.hasParameters()?(this._iterationTemplate=this.innerTemplate.clone(),this._expandIterationTemplateParameters()):this._iterationTemplate=this.innerTemplate;for(var e,t=this.childComponents,n=t.length-1;e=t[n--];)e.detachFromParentComponent(),e.needsDraw=!1,e.cleanupDeletedComponentTree(!0);this.handleOrganizedContentRangeChange(this.organizedContent,[],0),this.organizedContent.addRangeChangeListener(this,"organizedContent"),this._canDrawInitialContent=!0,this.needsDraw=!0}}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0);for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var r=t._childComponents[n];r.cleanupDeletedComponentTree(!0)}this._iterationTemplate=null,this._freeIterations.clear(),this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_expandIterationTemplateParameters:{value:function(){for(var e,t,n,r,i,a,o,s,l,u=this._iterationTemplate,c=this;u.hasParameters();){c=c.ownerComponent,e=c._ownerDocumentPart.template,r=c._ownerDocumentPart.objects,a=u.expandParameters(e,c),n=u.getSerialization().getExternalObjectLabels(),i=u.getInstances(),s=a.labels,t=a.labelsCollisions;for(var h,d=0;h=s[d];d++)o=t&&h in t?t[h]:h,n.indexOf(o)>=0?i[o]=r[h]:(l=e.getObjectMetadata(h),l.owner||(l.owner=r.owner),u.setObjectMetadata(o,l.require,l.label,l.owner))}}},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n=e.element.ownerDocument;e.currentIteration=t;var r=e._iterationTemplate.instantiate(n).then(function(n){t._childComponents=n.childComponents,t._fragment=n.fragment,n.childComponents.forEach(function(t){e.addChildComponent(t)}),n.loadComponentTree().then(function(){e.constructorIteration(t)}).done(),e.currentIteration=null});return r.done(),r.then(null,function(){})}),this._requestedIterations++,t}},constructorIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?c(this._contentForIteration,this.currentIteration,t,n):"currentIteration"===e?t(this.currentIteration):u(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},_childComponentsPerIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var r=this.iterations.splice(n,t.length);for(r.forEach(function(e){e.recycle()}),this._freeIterations.addEach(r);this._freeIterations.length<e.length;)this._freeIterations.push(this._createIteration());this.iterations.swap(n,0,e.map(function(e){var t=this._freeIterations.pop();return t.content=e,this._contentForIteration.set(t,e),t},this)),this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){if(this.canDraw()){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.forEachElement(function(t){e.selected?t.classList.add("selected"):t.classList.remove("selected"),e.active?t.classList.add("active"):t.classList.remove("active"),t.classList.remove("no-transition")},this)},this)}}},_drawInitialContent:{value:function(){var e=this.element;e.innerHTML="";var t=e.ownerDocument.createTextNode("");e.appendChild(t),this._boundaries.push(t)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0)}},_disableSelectionTracking:{value:function(){this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0)}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:h,serializable:!1}})}}),montageDefine("b1cf93a","composer/press-composer",{dependencies:["montage","composer/composer","core/event/mutable-event"],factory:function(e,t){var n=e("montage").Montage,r=e("composer/composer").Composer,i=e("core/event/mutable-event").MutableEvent,a=t.PressComposer=r.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this):this._element.removeEventListener("mousedown",this)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){r.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t,n=0;if("touchstart"===e.type){for(t=e.changedTouches.length;t>n;n++)if(!this.component.eventManager.componentClaimingPointer(e.changedTouches[n].identifier)){this._observedPointer=e.changedTouches[n].identifier;break}if(null===this._observedPointer)return!1;document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)}else"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1));this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,r;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;if(r=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&r)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!r)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;t&&!r&&this._endInteraction(e)}}},_endInteraction:{value:function(e){e&&"touchend"!==e.type&&"touchcancel"!==e.type?e&&"click"!==e.type&&"mouseup"!==e.type||(document.removeEventListener("click",this),document.removeEventListener("mouseup",this)):(document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this)),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(){if(null===this._observedPointer)return!1;for(var e=0,t=event.changedTouches.length;t>e;e++)if(event.changedTouches[e].identifier===this._observedPointer)return e;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,r;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new o,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(r=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[r]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),o=function(){var e,t,r,a,o,s;for(e=i.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch
},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],r=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},o=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},s=t.length-1;s>=0;s--)n.defineProperty(e,t[s],a(t[s]));for(s=r.length-1;s>=0;s--)n.defineProperty(e,r[s],o(r[s]));return e}()}}),montageDefine("eca8d22","ui/main.reel/main",{dependencies:["montage","montage/ui/component","montage/core/template","gist","components","examples"],factory:function(e,t){var n=e("montage").Montage,r=e("montage/ui/component").Component,i=e("montage/core/template").Template,a=e("gist").gist,o=1;t.Main=r.specialize({templateObjects:{value:{}},_componentId:{value:1},_logger:{value:null},templateDidLoad:{value:function(){var e=this.examples[0];this._logger=this.templateObjects.logger,this.addEventListener("action",this,!1),window.addEventListener("hashchange",this,!1);var t=location.hash.slice(3);t?(this.loadGist(t),this.setupGistLink(t)):(this.loadExample(e),this.executeFiddle())}},components:{value:e("components").components},examples:{value:e("examples").examples},loadGist:{value:function(e){var t=this;a.load(e,null,function(n,r,a,s){var l,u,c;return n.version!==o?(t.redirectToVersion(n.version,e),void 0):(a&&(c=new i,l=c.createHtmlDocumentWithHtml(a),u=c.getInlineObjectsString(l),a=l.body.innerHTML,u=u.replace(/\n    /g,"\n"),a=a.replace(/\n    /g,"\n").replace(/^\s*\n|\n\s*$/g,"")),t.loadFiddle(r,u,a,s),t.executeFiddle(),void 0)})}},loadFiddle:{value:function(e,t,n,r){this.templateObjects.cssCodeMirror.value=e||"",this.templateObjects.serializationCodeMirror.value=t||"",this.templateObjects.htmlCodeMirror.value=n||"",this.templateObjects.javascriptCodeMirror.value=r||""}},executeFiddle:{value:function(){var e=this.templateObjects;e.montageFrame.load(e.cssCodeMirror.value,e.serializationCodeMirror.value,e.htmlCodeMirror.value,e.javascriptCodeMirror.value)}},loadExample:{value:function(e){location.hash="",this.loadFiddle(e.css,this._stringifySerialization(e.serialization),e.html,e.javascript),this.executeFiddle()}},addComponentToFiddle:{value:function(e){var t=this._generateComponentId(e.name);e.serialization.properties.element={"#":t},this._addSerialization(t,e.serialization),this._addHtml(e.html.replace('data-montage-id=""','data-montage-id="'+t+'"')),this.executeFiddle()}},redirectToVersion:{value:function(e,t){var n;e||(e=0),n=window.location.href.slice(0,-window.location.hash.length)+"v"+e+"/#!/"+t,window.location.href=n}},clear:{value:function(){location.hash="",this.loadFiddle("","","",""),this.executeFiddle()}},_tmpDiv:{value:document.createElement("div")},_addHtml:{value:function(e){var t,r,i=this._getSerializationObject(),a=this.templateObjects.htmlCodeMirror,o=a.value,s=this._tmpDiv,l=!0;if(t=i&&n.getPath.call(i,"owner.properties.element['#']"))if(a.hasModeErrors())this._logger.log("Add component warning: The HTML code seems to be invalid, appending element at the end.");else if(s.innerHTML=o,r=s.querySelector("*[data-montage-id='"+t+"']"),r&&r.parentNode==s&&!r.nextSibling){/([\t ]*)[^\n]*\n\s*<\/[^>]+>\s*$/.exec(o);var u=RegExp.$1||"";o=o.replace(/<\/[^>]+>\s*$/,u+e+"\n$&"),l=!1}else this._logger.log("Add component warning: The owner's element is not the single root element, appending element at the end.");l&&(o+=(o?"\n":"")+e),a.value=o}},_addSerialization:{value:function(e,t){var n,r=this._getSerializationObject(),i=this.templateObjects.serializationCodeMirror.value;r?(r[e]=t,n=this._stringifySerialization(r)):(r={},r[e]=t,n=this.templateObjects.serializationCodeMirror.value+(i?"\n":"")+this._stringifySerialization(r),i&&this._logger.log("Add component warning: The serialization seems to be invalid, appending component at the end.")),this.templateObjects.serializationCodeMirror.value=n}},_serializationObject:{value:null},_lastSerialization:{value:null},_getSerializationObject:{value:function(){var e=this.templateObjects.serializationCodeMirror.value;if(e===this._lastSerialization)return this._serializationObject;this._lastSerialization=e;try{return this._serializationObject=JSON.parse(e)}catch(t){return this._serializationObject=null}}},_generateComponentId:{value:function(e){var t,n=this._getSerializationObject();if(n){do t=e+this._componentId++;while(t in n)}else t=e+this._componentId++;return t}},_htmlPageTemplate:{value:'<!DOCTYPE html>\n<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n    <title>MFiddle</title>\n    <script type="text/montage-serialization"><!-- serialization --></script></head>\n<body>\n    <!-- html -->\n</body>\n</html>'},_generateHtmlPage:{value:function(){var e=this.templateObjects,t=e.serializationCodeMirror.value,n=e.htmlCodeMirror.value;return t=t.replace(/\n/gm,"\n    "),n=n.replace(/\n/gm,"\n    "),this._htmlPageTemplate.replace("<!-- serialization -->",t).replace("<!-- html -->",n)}},handleComponentButtonAction:{value:function(e){this.addComponentToFiddle(e.target.component)}},handleSaveAction:{value:function(){a.save({anon:!0,cssCode:this.templateObjects.cssCodeMirror.value,htmlMarkup:this._generateHtmlPage(),jsCode:this.templateObjects.javascriptCodeMirror.value,settings:{version:1}})}},handleNewAction:{value:function(){this.clear()}},handleRunAction:{value:function(){this.executeFiddle()}},handleExampleButtonAction:{value:function(e){this.loadExample(e.target.example)}},handleHashchange:{value:function(){var e=location.hash.slice(3);e&&a.id!=e&&this.loadGist(e),this.setupGistLink(e)}},setupGistLink:{value:function(e){var t=this.templateObjects.gistLink,n=this.templateObjects.gistLinkCondition;n.condition=!!e,t.href="https://gist.github.com/"+e}},_stringifySerialization:{value:function(e){return JSON.stringify(e,null,4).replace(/\{\s*(\"[#@]\")\s*:\s*(\"[^\"]+\")\s*\}/g,"{$1: $2}").replace(/\{\s*(\"(?:<-|<->)\")\s*:\s*(\"[^\"]+\"\s*(?:,\s*\"converter\"\s*:\s*\{\s*\"@\"\s*:\s*\"[^\"]+\"\s*\}\s*|,\s*\"deferred\"\s*:\s*(true|false)\s*)*)\}/g,function(e,t,n){return"{"+t+": "+n.replace(/,\s*/,", ").replace(/\n\s*/,"")+"}"})}}})}}),montageDefine("5870cb7","ui/scroll-bars.reel/scroll-bars",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ScrollBars=n.specialize({_verticalScroll:{value:0},_horizontalScroll:{value:0},_verticalLength:{value:0},_horizontalLength:{value:0},verticalScroll:{get:function(){return this._verticalScroll},set:function(e){this._verticalScroll=e,this.needsDraw=!0}},horizontalScroll:{get:function(){return this._horizontalScroll},set:function(e){this._horizontalScroll=e,this.needsDraw=!0}},verticalLength:{get:function(){return this._verticalLength},set:function(e){this._verticalLength=e,this.needsDraw=!0}},horizontalLength:{get:function(){return this._horizontalLength},set:function(e){this._horizontalLength=e,this.needsDraw=!0}},_opacity:{value:0},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e,this.needsDraw=!0}},_isDisplayUpdated:{value:!1},_displayVertical:{value:!1},displayVertical:{get:function(){return this._displayVertical},set:function(e){this._displayVertical!==e&&(this._displayVertical=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_displayHorizontal:{value:!1},displayHorizontal:{get:function(){return this._displayHorizontal},set:function(e){this._displayHorizontal!==e&&(this._displayHorizontal=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_top:{value:!1},_bottomClip:{value:!1},_bottom:{value:!1},_left:{value:!1},_rightClip:{value:!1},_right:{value:!1},_hasResizedHorizontal:{value:!1},_hasResizedVertical:{value:!1},willDraw:{value:function(){this._offsetWidth!==this._element.offsetWidth&&(this._offsetWidth=this._element.offsetWidth,this._hasResizedHorizontal=!0),this._offsetHeight!==this._element.offsetHeight&&(this._offsetHeight=this._element.offsetHeight,this._hasResizedVertical=!0)}},draw:{value:function(){var e,t,n,r;if(this._isDisplayUpdated){var i=this._displayVertical?"block":"none",a=this._displayHorizontal?"block":"none";this._top.style.display=this._bottomClip.style.display=i,this._left.style.display=this._rightClip.style.display=a,this._isDisplayUpdated=!1}if(this._hasResizedHorizontal&&this._displayHorizontal&&(this._rightClip.style.width=this._right.style.width=this._offsetWidth-4+"px",this._rightClip.style.clip="rect(-1px,"+(this._offsetWidth-3)+"px,6px,3px)",this._hasResizedHorizontal=!1),this._hasResizedVertical&&this._displayVertical&&(this._bottomClip.style.height=this._bottom.style.height=this._offsetHeight-4+"px",this._bottomClip.style.clip="rect(3px,6px,"+(this._offsetHeight-3)+"px,-1px)",this._hasResizedVertical=!1),this._opacity){if(this._displayHorizontal){n=this._offsetWidth-9-(this._displayVertical?6:0),e=Math.floor(n*this._horizontalLength),r=n-e,t=1-this._horizontalLength?Math.floor(r*this._horizontalScroll/(1-this._horizontalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>r&&(e+=Math.floor(r-t),0>e&&(e=0),t=n-e);var o=e-this._offsetWidth+9+"px,0px",s=t+2+"px,0px";this._right.style.webkitTransform="translate3d("+o+",0)",this._right.style.MozTransform="translate("+o+")",this._right.style.transform="translate("+o+")",this._left.style.webkitTransform=this._rightClip.style.webkitTransform="translate3d("+s+",0)",this._left.style.MozTransform=this._rightClip.style.MozTransform="translate("+s+")",this._left.style.transform=this._rightClip.style.transform="translate("+s+")",this._left.style.webkitTransition=this._right.style.webkitTransition="none",this._left.style.MozTransition=this._right.style.MozTransition="none",this._left.style.transition=this._right.style.transition="none",this._left.style.opacity=this._right.style.opacity=this._opacity}if(this._displayVertical){n=this._offsetHeight-9-(this._displayHorizontal?6:0),e=Math.floor(n*this._verticalLength),r=n-e,t=1-this._verticalLength?Math.floor(r*this._verticalScroll/(1-this._verticalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>r&&(e+=Math.floor(r-t),0>e&&(e=0),t=n-e);var l="0px,"+(e-this._offsetHeight+9)+"px",u="0px,"+(t+2)+"px";this._bottom.style.webkitTransform="translate3d("+l+",0)",this._bottom.style.MozTransform="translate("+l+")",this._bottom.style.transform="translate("+l+")",this._top.style.webkitTransform=this._bottomClip.style.webkitTransform="translate3d("+u+",0)",this._top.style.MozTransform=this._bottomClip.style.MozTransform="translate("+u+")",this._top.style.transform=this._bottomClip.style.transform="translate("+u+")",this._top.style.webkitTransition=this._bottom.style.webkitTransition="none",this._top.style.MozTransition=this._bottom.style.MozTransition="none",this._top.style.transition=this._bottom.style.transition="none",this._top.style.opacity=this._bottom.style.opacity=this._opacity}}else this._displayHorizontal&&(this._left.style.webkitTransition=this._right.style.webkitTransition="300ms opacity",this._left.style.opacity=this._right.style.opacity=0),this._displayVertical&&(this._top.style.webkitTransition=this._bottom.style.webkitTransition="300ms opacity",this._top.style.opacity=this._bottom.style.opacity=0)}}})}}),montageDefine("b1cf93a","core/range-controller",{dependencies:["montage","core/promise","collections/generic-collection"],factory:function(e,t){var n=e("montage").Montage,r=e("core/promise").Promise,i=e("collections/generic-collection");t.RangeController=n.specialize({constructor:{value:function(){this.content=null,this._selection=[],this.selection=[],this.defineBinding("_selection.rangeContent()",{"<->":"selection.rangeContent()"}),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this._selection.addRangeChangeListener(this,"selection"),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[]}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},selection:{value:null},_selection:{value:null},select:{value:function(e){!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){for(var r=this.content.splice.apply(this.content,n),e=2;n.length>e;e++)this.handleAdd(n[e]);return r}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:i.prototype.addEach},deleteEach:{value:i.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){t.deleteEach(e),this._selection.deleteEach(t)}},handleSelectionRangeChange:{value:function(e,t){var n=this;r.nextTick(function(){var r=n._selection.length;n.avoidsEmptySelection&&0===r?n.select(t[t.length-1]):!n.multiSelect&&r>1&&n._selection.splice(0,n._selection.length,e[e.length-1])})}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent){var n=t.clone(1);n.deleteEach(e),this._selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this._selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&(!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e))}},handleMultiSelectChange:{value:function(){var e=this._selection.length;!this.multiSelect&&e>1&&this._selection.splice(0,e-1)}},blueprintModuleId:e("montage")._blueprintModuleIdDescriptor,blueprint:e("montage")._blueprintDescriptor})}}),montageDefine("eca8d22","ui/main.reel/main.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html;charset=utf-8">\n    <title>MFiddle</title>\n    <link rel=stylesheet href=main.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"main"}}},"cssView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"css"},"title":"CSS"}},"serializationView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"serialization"},"title":"Serialization"}},"htmlView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"html"},"title":"HTML"}},"javascriptView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"javascript"},"title":"JavaScript"}},"previewView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"preview"},"title":"Preview"}},"cssCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"cssCodeMirror"},"mode":"css","matchBrackets":true,"lineNumbers":true}},"serializationCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"serializationCodeMirror"},"mode":"json","matchBrackets":true,"lineNumbers":true}},"htmlCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"htmlCodeMirror"},"mode":"htmlmixed","lineNumbers":true}},"javascriptCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"javascriptCodeMirror"},"mode":"javascript","lineNumbers":true}},"components":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"components"}},"bindings":{"content":{"<-":"@owner.components"}}},"componentButton":{"prototype":"ui/component-button.reel","properties":{"element":{"#":"componentButton"}},"bindings":{"component":{"<-":"@components.objectAtCurrentIteration"}}},"gistLinkCondition":{"prototype":"montage/ui/condition.reel","properties":{"element":{"#":"gistLinkCondition"},"condition":false}},"gistLink":{"prototype":"matte/ui/anchor.reel","properties":{"element":{"#":"gist"}}},"save":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"save"}}},"new":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"new"}}},"run":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"run"}}},"examples":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"examples"}},"bindings":{"content":{"<-":"@owner.examples"}}},"exampleButton":{"prototype":"ui/example-button.reel","properties":{"element":{"#":"exampleButton"}},"bindings":{"example":{"<-":"@examples.objectAtCurrentIteration"}}},"montageFrame":{"prototype":"ui/montage-frame.reel","properties":{"element":{"#":"montageFrame"}}},"logger":{"prototype":"ui/logger.reel","properties":{"element":{"#":"logger"}},"bindings":{"input":{"<-":"@montageFrame.logMessages"}}}}</script>\n</head>\n<body>\n<div data-montage-id=main>\n    <div id=header>\n        <h1 id=logo>MFiddle</h1>\n        <ul id=components data-montage-id=components>\n            <li>\n                <div class=component-button-holder><div data-montage-id=componentButton></div></div>\n            </li>\n        </ul>\n        <ul id=links>\n            <li data-montage-id=gistLinkCondition class=montage-invisible><a data-montage-id=gist href="" target=_blank class=link>Gist</a></li>\n        </ul>\n        <ul id=menu>\n            <li><div class=menu-button data-montage-id=save>Save</div></li>\n            <li><div class=menu-button data-montage-id=new>New</div></li>\n            <li><div id=run class=menu-button data-montage-id=run>Run</div></li>\n            <li>\n                <div id=examples>\n                    <h2>Examples</h2>\n                    <ul data-montage-id=examples>\n                        <li class=exampleButtons>\n                            <span data-montage-id=exampleButton></span>\n                        </li>\n                    </ul>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <div id=css data-montage-id=css>\n        <div data-montage-id=cssCodeMirror></div>\n    </div>\n    <div id=serialization data-montage-id=serialization>\n        <div data-montage-id=serializationCodeMirror></div>\n    </div>\n    <div id=html data-montage-id=html>\n        <div data-montage-id=htmlCodeMirror></div>\n    </div>\n    <div id=javascript data-montage-id=javascript>\n        <div data-montage-id=javascriptCodeMirror></div>\n    </div>\n    <div id=preview data-montage-id=preview>\n        <div id=iframe-wrapper>\n            <div data-montage-id=montageFrame></div>\n        </div>\n        <div id=logger data-montage-id=logger></div>\n    </div>\n</div>\n</body>\n</html>'}),montageDefine("eca8d22","examples",{dependencies:["montage/ui/component"],factory:function(e,t){t.examples=[{label:"Simple component",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    templateDidLoad: {\n        value: function() {\n            console.log("templateDidLoad");\n        }\n    }\n});\n'},{label:"Simple button",css:"",serialization:{button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<button data-montage-id="button"></button>',javascript:""},{label:"Simple binding",css:".slider {\n    width: 50%;\n}",serialization:{slider:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider"},value:50}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@slider.value"}}}},html:'<input type="slider" data-montage-id="slider" class="slider">\n<h2 data-montage-id="text"></h2>',javascript:""},{label:"Simple listener",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleButtonAction: {\n        value: function() {\n            console.log("action!");\n        }\n    }\n});\n'},{label:"Simple condition",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},toggle:{prototype:"digit/ui/checkbox.reel",properties:{element:{"#":"toggle"},checked:!0}},hideBlockCondition:{prototype:"montage/ui/condition.reel",properties:{element:{"#":"block"}},bindings:{condition:{"<-":"@toggle.checked"}}}},html:'<div data-montage-id="component">\n	<label><input type="checkbox" data-montage-id="toggle">Show</label>\n    <div data-montage-id="block">\n        <h2>Hello There!</h2>\n    </div>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n});\n'},{label:"Two-way bindings",css:".slider2 {\n    width: 50%;\n}",serialization:{number:{prototype:"digit/ui/number-field.reel",properties:{element:{"#":"number"},value:50}},slider1:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider1"}},bindings:{value:{"<->":"@number.value"}}},slider2:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider2"}},bindings:{value:{"<->":"@number.value"}}}},html:'<p>\n    <input type="number" data-montage-id="number">\n    <input type="slider" data-montage-id="slider1" class="slider1">\n</p>\n<p>\n    <input type="slider" data-montage-id="slider2" class="slider2">\n</p>',javascript:""},{label:"Accessing repetition objects",css:"",serialization:{repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["Mike","François","Afonso","Heather"],element:{"#":"repetition"}}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@repetition.objectAtCurrentIteration"}}}},html:'<ul data-montage-id="repetition">\n  <li>\n    Hello there <span data-montage-id="text"></span>!\n  </li>\n</ul>',javascript:""},{label:"Listening on repeated buttons",css:"",serialization:{owner:{properties:{element:{"#":"owner"}}},repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["One","Two","Three"],element:{"#":"repetition"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"}},bindings:{label:{"<-":"@repetition.objectAtCurrentIteration"}},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="owner">\n    <ul data-montage-id="repetition">\n        <button data-montage-id="button"></button>\n    </ul>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleAction: {\n        value: function(event) {\n            console.log("action: " + event.target.element.textContent);\n        }\n    }\n});\n'}]}}),montageDefine("3dfbcf3","ui/button.reel/button",{dependencies:["ui/native-control","montage/composer/press-composer","montage/collections/dict"],factory:function(e,t){var n=e("ui/native-control").NativeControl,r=e("montage/composer/press-composer").PressComposer,i=e("montage/collections/dict"),a=t.Button=n.specialize({_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=e===!0?!0:!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){void 0===this._label&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},constructor:{value:function(){this.super(),this._pressComposer=new r,this._pressComposer.longPressThreshold=this.holdThreshold,this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){this.super(e,t,n),"hold"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},enterDocument:{value:function(e){n.enterDocument&&n.enterDocument.apply(this,arguments),e&&(this._isInputElement="INPUT"===this.originalElement.tagName,this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this._label=this.originalElement.value)):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,this.setLabelInitialValue(this._labelNode.data),void 0===this._label&&(this._label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){this.super(),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return null===this._detail&&(this._detail=new i),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}});a.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("5870cb7","ui/scroller.reel/scroller",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Scroller=n.specialize({_scrollX:{value:0},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX!==e&&(this._scrollX=e,this.needsDraw=!0)}},_scrollY:{value:0},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY!==e&&(this._scrollY=e,this.needsDraw=!0)}},_maxTranslateX:{value:0},_maxTranslateY:{value:0},_axis:{value:"auto"},axis:{get:function(){return this._axis},set:function(e){this._axis=e,this.needsDraw=!0}},_displayScrollbars:{value:"auto"},displayScrollbars:{get:function(){return this._displayScrollbars},set:function(e){switch(e){case"vertical":case"horizontal":case"both":case"auto":this._displayScrollbars=e;break;default:this._displayScrollbars="none"}this.needsDraw=!0}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e}},_content:{value:null},_scrollBars:{value:null},handleTranslateStart:{value:function(){this._scrollBars.opacity=.5}},handleTranslateEnd:{value:function(){this._scrollBars.opacity=0}},canDraw:{value:function(){return this.needsDraw=!0,n.canDraw.apply(this,arguments)}},willDraw:{value:function(){this._left=this._element.offsetLeft,this._top=this._element.offsetTop,this._width=this._element.offsetWidth,this._height=this._element.offsetHeight,this._maxTranslateX=this._content.scrollWidth-this._width,0>this._maxTranslateX&&(this._maxTranslateX=0),this._maxTranslateY=this._content.offsetHeight-this._height,0>this._maxTranslateY&&(this._maxTranslateY=0);var e=this.callDelegateMethod("didSetMaxScroll",{x:this._maxTranslateX,y:this._maxTranslateY});switch(e&&(this._maxTranslateX=e.x,this._maxTranslateY=e.y),this.scrollX=Math.min(this._scrollX,this._maxTranslateX),this.scrollY=Math.min(this._scrollY,this._maxTranslateY),this._displayScrollbars){case"horizontal":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!1;break;case"vertical":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!0;break;case"both":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!0;break;case"auto":this._scrollBars.displayHorizontal=!!this._maxTranslateX,this._scrollBars.displayVertical=!!this._maxTranslateY;break;case"none":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!1}this._scrollBars.displayHorizontal&&(this._content.scrollWidth?(this._scrollBars.horizontalLength=this._width/this._content.scrollWidth,this._scrollBars.horizontalScroll=this._scrollX/this._content.scrollWidth):(this._scrollBars.horizontalLength=1,this._scrollBars.horizontalScroll=0)),this._scrollBars.displayVertical&&(this._content.offsetHeight?(this._scrollBars.verticalLength=this._height/this._content.offsetHeight,this._scrollBars.verticalScroll=this._scrollY/this._content.offsetHeight):(this._scrollBars.verticalLength=1,this._scrollBars.verticalScroll=0))
}},draw:{value:function(){var e=-this._scrollX+"px, "+-this._scrollY+"px";this._content.style.webkitTransform="translate3d("+e+", 0px)",this._content.style.MozTransform="translate("+e+")",this._content.style.transform="translate("+e+")"}}})}}),montageDefine("eca8d22","gist",{dependencies:[],factory:function(e,t){var n=t.gist={clientId:"clientId",files:null,oauth:[function(e){n.oauth.callback=e,open("https://github.com/login/oauth/authorize?client_id="+n.clientId+"&scope=gist","popup","width=1015,height=500")},function(e){e?(window.ACCESS_TOKEN=localStorage.access_token=e,n.getUser(n.oauth.callback)):alert("Authentication error"),n.oauth.callback=null}],request:function(e){e.method=e.method||"GET",e.id=e.id||"",e.rev=e.rev||"",e.accepted=e.accepted||[];var t=e.anon||"GET"===e.method;if(!t&&!window.ACCESS_TOKEN)return n.oauth[0](function(){n.request(e)}),void 0;var r=e.path||"gists"+(e.id?"/"+e.id:"")+(e.rev?"/"+e.rev:"")+(e.gpath||"");this._xhr({method:e.method,url:"https://api.github.com/"+r+(!e.anon&&window.ACCESS_TOKEN?"?access_token="+ACCESS_TOKEN:""),headers:e.headers,callback:function(t){var n=t.responseText?JSON.parse(t.responseText):null;n&&n.message&&-1===e.accepted.indexOf(t.status)?alert("Sorry, I got a "+t.status+" ("+n.message+")"):e.callback&&e.callback(n,t)},data:e.data?JSON.stringify(e.data):null})},_xhr:function(e){var t=new XMLHttpRequest,n=e.method||"GET",r=e.data||"";if(t.open(n,e.url+("GET"===n&&r?"?"+r:""),!0),"GET"!==n&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.headers)for(var i in e.headers)t.setRequestHeader(i,e.headers[i]);return t.onreadystatechange=function(){4===t.readyState&&t.responseText&&e.callback(t)},t.send("GET"===n?null:r),t},getUser:function(e){n.request({path:"user",callback:function(t){window.user=t,e&&e(t)}})},save:function(e){e=e||{};var t=e.anon||!window.user,r=e.callback;if(!(!n.id||n.user&&window.user&&n.user.id==user.id||t))return n.fork(n.id,n.save,e.anon),void 0;var i=n.id||"",a=e.cssCode,o=e.htmlMarkup,s=e.jsCode,l=e.settings,u="title",c={};a&&(c["component.css"]={content:a}),o&&(c["component.html"]={content:o}),s&&(c["component.js"]={content:s}),c["settings.json"]={content:JSON.stringify(l)},n.request({anon:e.anon,id:t||e.forceNew?null:i,method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},callback:function(e){e.id&&n.update(e),r&&r(e.id)},data:{description:u,"public":!0,files:c}})},fork:function(e,t){n.request({method:"POST",gpath:"/fork",id:e||n.id||null,headers:{"Content-Type":"text/plain; charset=UTF-8"},callback:function(e){e.id&&(n.update(e),t&&t())},data:{}})},load:function(e,t,r){n.request({id:e||n.id,rev:t||n.rev,callback:function(e){n.update(e);var t,i,a,o,s=this.files=e.files,l=s["component.css"],u=s["component.html"],c=s["component.js"],h=s["settings.json"];if(!l||!u||!c)for(var d in s){var p=d.slice(d.lastIndexOf("."));if(l||".css"!=p||(l=s[d]),u||".html"!=p||(u=s[d]),c||".js"!=p||(c=s[d]),l&&u&&c)break}if(l&&(t=l.content),u&&(i=u.content),c&&(a=c.content),h)try{o=JSON.parse(h.content)}catch(f){console.warn("Unknown settings: ",h),o={}}else o={};r&&r(o,t,i,a)}})},update:function(e){var t=e.id,r=e.history&&e.history[0]&&e.history[0].version||"";n.id!=t?(n.id=t,n.rev=void 0,location.hash="!/"+t):n.rev&&n.rev!==r&&(n.rev=r,location.hash="!/"+t+"/"+r),e.user&&(n.user=e.user),n.saved=!0},saved:!1};window.ACCESS_TOKEN=localStorage.access_token}}),montageDefine("5870cb7","package.json",{exports:{name:"matte",version:"0.1.1",repository:{type:"git",url:"https://github.com/montagejs/matte.git"},dependencies:{montage:"~0.13.0","native":"~0.1.1"},devDependencies:{"montage-testing":"~0.2.0"},exclude:["overview.html","overview","run-tests.html","test"],readme:'matte\n==============\n\nThis is the Montage package template.\n\nNote: Before working on your package you will need to add montage to it.\n\n```\nnpm install .\n```\n\nLayout\n------\n\nThe template contains the following files and directories:\n\n* `ui/` – Directory containing all the UI .reel directories.\n* `package.json` – Describes your app and its dependencies\n* `README.md` – This readme. Replace the current content with a description of your app\n* `overview.html`\n* `overview/` – Directory that contains the files for the overview page. This is a different package so you will need to require the component using matte/*.\n  * `main.reel` – The main interface component where you can add the components to show.\n* `node_modules/` – Directory containing all npm packages needed, including Montage. Any packages here must be included as `dependencies` in `package.json` for the Montage require to find them.\n* `test/` – Directory containing tests for your package.\n  * `all.js` – Module that point the test runner to all your jasmine specs.\n* `run-tests.html` – Page to run jasmine tests manually in your browser\n* `testacular.conf.js` – This is the testacular configuration file. You can start testacular by running `node_modules/testacular/bin/testacular start`\n\nCreate the following directories if you need them:\n\n* `locale/` – Directory containing localized content.\n* `scripts/` – Directory containing other JS libraries. If a library doesn’t support the CommonJS "exports" object it will need to be loaded through a `<script>` tag.\n\n',readmeFilename:"README.md",description:"matte ==============",bugs:{url:"https://github.com/montagejs/matte/issues"},_id:"matte@0.1.1",_from:"matte@0.1.1",directories:{lib:"./"},hash:"5870cb7",mappings:{montage:{name:"montage",hash:"b1cf93a",location:"../montage@b1cf93a/"},"native":{name:"native",hash:"3dfbcf3",location:"../native@3dfbcf3/"}},production:!0,useScriptInjection:!0}}),montageDefine("3dfbcf3","package.json",{exports:{name:"native",version:"0.1.1",repository:{type:"git",url:"https://github.com/montagejs/native.git"},dependencies:{montage:"~0.13.0"},devDependencies:{"montage-testing":"~0.2.0"},exclude:["overview.html","overview","run-tests.html","test"],readme:'montage-native\n==============\n\nThis is the Montage package template.\n\nNote: Before working on your package you will need to add montage to it.\n\n```\nnpm install .\n```\n\nLayout\n------\n\nThe template contains the following files and directories:\n\n* `ui/` – Directory containing all the UI .reel directories.\n* `package.json` – Describes your app and its dependencies\n* `README.md` – This readme. Replace the current content with a description of your app\n* `overview.html`\n* `overview/` – Directory that contains the files for the overview page. This is a different package so you will need to require the component using montage-native/*.\n  * `main.reel` – The main interface component where you can add the components to show.\n* `node_modules/` – Directory containing all npm packages needed, including Montage. Any packages here must be included as `dependencies` in `package.json` for the Montage require to find them.\n* `test/` – Directory containing tests for your package.\n  * `all.js` – Module that point the test runner to all your jasmine specs.\n* `run-tests.html` – Page to run jasmine tests manually in your browser\n* `testacular.conf.js` – This is the testacular configuration file. You can start testacular by running `node_modules/testacular/bin/testacular start`\n\nCreate the following directories if you need them:\n\n* `locale/` – Directory containing localized content.\n* `scripts/` – Directory containing other JS libraries. If a library doesn’t support the CommonJS "exports" object it will need to be loaded through a `<script>` tag.\n\n',readmeFilename:"README.md",description:"montage-native ==============",bugs:{url:"https://github.com/montagejs/native/issues"},_id:"native@0.1.1",_from:"native@~0.1.1",directories:{lib:"./"},hash:"3dfbcf3",mappings:{montage:{name:"montage",hash:"b1cf93a",location:"../montage@b1cf93a/"}},production:!0,useScriptInjection:!0}}),montageDefine("eca8d22","ui/montage-frame.reel/montage-frame",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.MontageFrame=n.specialize({_css:{value:null},_serialization:{value:null},_html:{value:null},_javascript:{value:null},_iframeReady:{value:!1},_iframeWindow:{value:null},_iframeDocument:{value:null},_cssElement:{value:null},_serializationElement:{value:null},_javascriptElement:{value:null},logMessages:{distinct:!0,value:[]},enterDocument:{value:function(e){var t=this;e&&window.addEventListener("message",function(e){e._event.source===t._element.contentWindow&&"ready"===e.data&&(t._iframeReady=!0,t.needsDraw=!0,t._iframeWindow=t._element.contentWindow,t._iframeDocument=t._element.contentDocument,t._cssElement=t._iframeDocument.head.querySelector("style"),t._javascriptElement=t._iframeDocument.head.querySelector("script[type='text/montage-javascript']"),t._iframeWindow.console.debug=t.debug.bind(t),t._iframeWindow.console.log=t.log.bind(t))},!1)}},debug:{value:function(e){0==e.indexOf("Syntax error")?this._iframeDocument.body.innerHTML="<pre>"+e+"</pre>":console.debug.apply(console,arguments)}},log:{value:function(){this.logMessages.push(Array.prototype.join.call(arguments," ")),console.log.apply(console,arguments)}},load:{value:function(e,t,n,r){this._css=e,this._serialization=t,this._html=n,this._javascript=r,this.needsDraw=!0}},draw:{value:function(){if(this._iframeReady){var e=this._iframeDocument.head.querySelector("script[type='text/montage-serialization']");e&&e.parentNode.removeChild(e),this._serializationElement=this._iframeDocument.createElement("script"),this._serializationElement.setAttribute("type","text/montage-serialization"),this._iframeDocument.head.appendChild(this._serializationElement),this._iframeWindow.Frame.reset(),this._cssElement.textContent=this._css,this._serializationElement.textContent=this._serialization||"{}",this._javascriptElement.textContent=this._javascript,this._iframeDocument.body.innerHTML=this._html,this._iframeWindow.Frame.boot()}}}})}}),montageDefine("5870cb7","ui/toggle-button.reel/toggle-button",{dependencies:["ui/button.reel"],factory:function(e,t){var n=e("ui/button.reel").Button;t.ToggleButton=n.specialize({hasTemplate:{value:!0},_pressed:{value:!1},pressed:{get:function(){return this._pressed},set:function(e){this._pressed=!!e,this._label=this._pressed?this._pressedLabel:this._unpressedLabel,this.needsDraw=!0}},_unpressedLabel:{value:null},unpressedLabel:{get:function(){return this._unpressedLabel},set:function(e){this._unpressedLabel=e,this._pressed||(this.label=this._unpressedLabel,this.needsDraw=!0)}},_pressedLabel:{value:null},pressedLabel:{get:function(){return this._pressedLabel},set:function(e){this._pressedLabel=e,this._pressed&&(this.label=this._pressedLabel,this.needsDraw=!0)}},_pressedClass:{value:"pressed"},pressedClass:{get:function(){return this._pressedClass},set:function(e){this._pressedClass=e,this._pressed&&(this.needsDraw=!0)}},label:{get:function(){return Object.getPropertyDescriptor(n,"label").get.call(this)},set:function(e){Object.getPropertyDescriptor(n,"label").set.call(this,e),this._pressed===!0&&this._label===this._unpressedLabel?this.pressed=!1:this._pressed===!1&&this._label===this._pressedLabel&&(this.pressed=!0)}},setLabelInitialValue:{value:function(e){null===this._label&&(this._label=e)}},enterDocument:{value:function(e){this.super(e),e&&(null===this._unpressedLabel&&null!==this._label&&(this._unpressedLabel=this._label),null===this._pressedLabel&&null!==this._label&&(this._pressedLabel=this._label))}},draw:{value:function(){this.super(),this._pressed?(this._element.classList.add(this._pressedClass),this._element.setAttribute("aria-pressed",!0)):(this._element.classList.remove(this._pressedClass),this._element.setAttribute("aria-pressed",!1))}},_dispatchActionEvent:{value:function(){this.pressed=!this._pressed,this.super()}},toggle:{value:function(){this.pressed=!this._pressed}}})}}),montageDefine("eca8d22","ui/logger.reel/logger",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Logger=n.specialize({constructor:{value:function(){this.super()}},_scroller:{value:null},_output:{value:null},input:{distinct:!0,value:[]},_isOpen:{value:!1},isOpen:{get:function(){return this._isOpen},set:function(e){this._isOpen!==e&&(this._isOpen=e,this.needsDraw=!0)}},_value:{value:""},_newMessages:{distinct:!0,value:[]},templateDidLoad:{value:function(){this.addRangeAtPathChangeListener("input",this,"handleInputChange")}},log:{value:function(e){this._newMessages.push(e),this.needsDraw=!0}},draw:{value:function(){var e=this._newMessages;if(e.length>0){this._value+=e.join("\n")+"\n",e.length=0,this._element.classList.add("Logger-hilight"),this._scroller.scrollY=Number.MAX_VALUE;var t=this;window.setTimeout(function(){t.needsDraw=!0},100)}else this._element.classList.remove("Logger-hilight");this.isOpen?(this._element.classList.add("open"),this._scroller.needsDraw=!0):(this._element.classList.remove("open"),this._scroller.scrollY=Number.MAX_VALUE),this._output.textContent=this._value}},handleInputChange:{value:function(e){for(var t,n=0;t=e[n];n++)this.log(t)}},handleClearAction:{value:function(){this._value="",this.needsDraw=!0}}})}}),montageDefine("5870cb7","ui/scroller.reel/scroller.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroller.css>\n    <script type="text/montage-serialization">{"scrollbars":{"prototype":"ui/scroll-bars.reel","properties":{"element":{"#":"scrollbars"}}},"translateComposer1":{"prototype":"montage/composer/translate-composer","properties":{"component":{"@":"owner"},"minTranslateX":0,"minTranslateY":0,"invertAxis":true},"bindings":{"translateX":{"<->":"@owner.scrollX"},"translateY":{"<->":"@owner.scrollY"},"maxTranslateX":{"<-":"@owner._maxTranslateX"},"maxTranslateY":{"<-":"@owner._maxTranslateY"},"axis":{"<-":"@owner.axis"},"hasMomentum":{"<-":"@owner.hasMomentum"}},"listeners":[{"type":"translateStart","listener":{"@":"owner"}},{"type":"translateEnd","listener":{"@":"owner"}}]},"owner":{"prototype":"ui/scroller.reel","properties":{"_content":{"#":"content"},"element":{"#":"montage-scroller"},"_scrollBars":{"@":"scrollbars"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=montage-scroller class=matte-Scroller>\n        <div data-montage-id=scrollbars></div>\n        <div data-montage-id=content class=matte-Scroller-content>\n            <div data-param="*"></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("eca8d22","ui/code-mirror.reel/code-mirror",{dependencies:["montage/ui/component","./codemirror/codemirror-min"],factory:function(e,t){var n=e("montage/ui/component").Component,r=e("./codemirror/codemirror-min").CodeMirror;t.CodeMirror=n.specialize({_codeMirror:{value:null},tabSize:{value:4},indentUnit:{value:4},matchBrackets:{value:!1},lineNumbers:{value:!1},mode:{value:null},_newValue:{value:null},enterDocument:{value:function(e){var t,n;if(e){n="json"===this.mode?{name:"javascript",json:!0}:this.mode,t=this._codeMirror=r(this._element,{mode:n,tabSize:this.tabSize,indentUnit:this.indentUnit,matchBrackets:this.matchBracket,lineNumbers:this.lineNumbers,value:this.value}),this._newValue=null;var i=this.element,a=this.ownerComponent.element.parentElement;setTimeout(function o(){getComputedStyle(i).width===getComputedStyle(a).width?setTimeout(o,50):t.refresh()},0)}}},draw:{value:function(){null!=this._newValue&&(this._codeMirror.setValue(this._newValue),this._newValue=null)}},value:{get:function(){return this._codeMirror?null!=this._newValue?this._newValue:this._codeMirror.getValue():this._newValue},set:function(e){this._newValue=e,this.needsDraw=!0}},hasModeErrors:{value:function(){return!!this._element.querySelector("*[class~='cm-error']")}}})}}),montageDefine("b1cf93a","ui/condition.reel/condition",{dependencies:["montage","ui/component","core/logger"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);e("core/logger").logger("condition"),t.Condition=n.specialize({hasTemplate:{value:!1},_condition:{value:!0},_contents:{value:null},constructor:{value:function(){this.super()}},condition:{set:function(e){e!==this._condition&&(this._condition=e,this.needsDraw=!0,this.isDeserializing||this._updateDomContent(e))},get:function(){return this._condition}},_updateDomContent:{value:function(e){"remove"===this.removalStrategy&&(e?this.domContent=this._contents:(this._contents=this.domContent,this.domContent=null))}},deserializedFromTemplate:{value:function(){this._condition||this._updateDomContent(this._condition)}},_removalStrategy:{value:"remove"},removalStrategy:{get:function(){return this._removalStrategy},set:function(e){var t;this._removalStrategy!==e&&("hide"!==e||this.isDeserializing||(t=this.domContent,this.domContent=this._contents,this._contents=t),this._removalStrategy=e,this.needsDraw=!0)}},draw:{value:function(){this.condition?this.element.classList.remove("montage-invisible"):this.element.classList.add("montage-invisible")}}})}}),montageDefine("eca8d22","components",{dependencies:[],factory:function(e,t){t.components=[{label:"Button",name:"button",x:0,y:-76,left:12,width:45,serialization:{prototype:"digit/ui/button.reel",properties:{label:"Button",enabled:!0}},html:'<button data-montage-id=""></button>'},{label:"Slider",name:"slider",x:-46,y:-76,width:43,left:12,serialization:{prototype:"digit/ui/slider.reel",properties:{min:0,max:100,value:50}},html:'<input type="slider" data-montage-id="">'},{label:"Checkbox",name:"checkbox",x:-89,y:-76,left:22,width:24,serialization:{prototype:"digit/ui/checkbox.reel",properties:{checked:!0}},html:'<input type="checkbox" data-montage-id="">'},{label:"TextField",name:"textField",x:-69,y:-101,left:14,serialization:{prototype:"digit/ui/text-field.reel",properties:{value:"Editable text"}},html:'<input data-montage-id="" type="text">'},{label:"Text",name:"text",x:-37,y:-50,left:12,width:44,serialization:{prototype:"montage/ui/text.reel",properties:{value:"Text"}},html:'<p data-montage-id=""></p>'},{label:"Repetition",name:"repetition",x:-29,y:-125,left:19,width:30,serialization:{prototype:"montage/ui/repetition.reel",properties:{content:[1,2,3]}},html:'<ul data-montage-id=""><li>Item</li></ul>'}]}}),montageDefine("eca8d22","ui/logger.reel/logger.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <title>Logger</title>\n    <link rel=stylesheet href=logger.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"logger"},"_scroller":{"@":"scroller"},"_output":{"#":"output"}},"bindings":{"isOpen":{"<-":"@toggle.pressed"}}},"toggle":{"prototype":"matte/ui/toggle-button.reel","properties":{"element":{"#":"toggle"},"pressedLabel":"▲ Console"}},"clear":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"clear"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"scroller":{"prototype":"matte/ui/scroller.reel","properties":{"element":{"#":"scroller"},"axis":"both"}}}</script>\n</head>\n<body>\n    <div data-montage-id=logger class=Logger>\n        <div data-montage-id=scroller class=Logger-scroller>\n            <div data-montage-id=output class=Logger-output></div>\n        </div>\n        <div data-montage-id=buttons class=Logger-buttons>\n            <button data-montage-id=clear class=Logger-clear>Clear</button>\n            <button data-montage-id=toggle class=Logger-toggle>◀ Console</button>\n        </div>\n    </div>\n  \n</body>\n</html>'}),montageDefine("5870cb7","ui/scroll-bars.reel/scroll-bars.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroll-bars.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"matte-scroll-bars"},"_top":{"#":"top"},"_bottomClip":{"#":"bottom-clip"},"_bottom":{"#":"bottom"},"_left":{"#":"left"},"_rightClip":{"#":"right-clip"},"_right":{"#":"right"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=matte-scroll-bars class=matte-ScrollBars>\n        <div data-montage-id=top class=matte-ScrollBars-top></div>\n        <div data-montage-id=bottom-clip class=matte-ScrollBars-bottomClip>\n            <div data-montage-id=bottom class=matte-ScrollBars-bottom></div>\n        </div>\n        <div data-montage-id=left class=matte-ScrollBars-left></div>\n        <div data-montage-id=right-clip class=matte-ScrollBars-rightClip>\n            <div data-montage-id=right class=matte-ScrollBars-right></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("b1cf93a","composer/composer",{dependencies:["montage","core/target"],factory:function(e,t){var n=(e("montage").Montage,e("core/target").Target);t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(){}},_resolveDefaults:{value:function(){null==this.element&&null!=this.component&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("b1cf93a","ui/text.reel/text",{dependencies:["montage","ui/component"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("eca8d22","ui/content-view.reel/content-view.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Content View</title>\n    <link rel=stylesheet href=content-view.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"owner"}}},"text":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@owner.title"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=content-view>\n        <h2 data-montage-id=title>Title</h2>\n        <div data-param="*"></div>\n    </div>\n</body>\n</html>'}),montageDefine("eca8d22","ui/component-button.reel/component-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ComponentButton=n.specialize({component:{value:null},_iconStyle:{value:null},enterDocument:{value:function(e){if(e){var t=this,n=this._element;this._iconStyle=this.templateObjects.icon.style,n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){var e=this._element,t=this.component;e.setAttribute("title","Add "+t.label),this._iconStyle.backgroundPosition=t.x+"px "+t.y+"px",this._iconStyle.width=t.width+"px",this._iconStyle.left=t.left+"px"}}})}}),montageDefine("eca8d22","ui/component-button.reel/component-button.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href=component-button.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"owner"}}},"icon":{"value":{"#":"icon"}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=component-button>\n        <div data-montage-id=icon class=icon></div>\n        <div class=highlighter></div>\n    </div>\n</body>\n</html>'}),montageDefine("eca8d22","ui/example-button.reel/example-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ExampleButton=n.specialize({hasTemplate:{value:!1},example:{value:!1},enterDocument:{value:function(e){if(e){var t=this,n=this._element;n.classList.add("example-button"),n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){this._element.textContent=this.example.label}}})}}),montageDefine("eca8d22","ui/montage-frame.reel/montage-frame.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href=montage-frame.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"component"}}}}</script>\n\n</head>\n<body>\n<iframe src="ui/montage-frame.reel/frame/frame.html" data-montage-id=component class=montage-frame></iframe>\n</body>\n</html>'}),montageDefine("3dfbcf3","ui/native-control",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component,r=t.NativeControl=n.specialize({hasTemplate:{value:!1},willPrepareForDraw:{value:function(){}}});r.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,style:null,tabindex:null,title:null})}}),montageDefine("3dfbcf3","ui/anchor.reel/anchor",{dependencies:["ui/native-control"],factory:function(e,t){var n=e("ui/native-control").NativeControl,r=t.Anchor=n.specialize({blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}}});r.addAttributes({textContent:null,href:null,hreflang:null,media:null,rel:null,target:null,type:null})}}),montageDefine("5870cb7","ui/anchor.reel/anchor",{dependencies:["montage/ui/component","native/ui/anchor.reel"],factory:function(e,t){var n=(e("montage/ui/component").Component,e("native/ui/anchor.reel").Anchor);t.Anchor=n.specialize({hasTemplate:{value:!1},constructor:{value:function(){this.super(),this.classList.add("matte-Anchor")}}})}}),montageDefine("5870cb7","ui/button.reel/button",{dependencies:["native/ui/button.reel"],factory:function(e,t){var n=e("native/ui/button.reel").Button;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("matte-Button")}}})}}),montageDefine("5870cb7","ui/toggle-button.reel/toggle-button.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href="../button.reel/button.css">\n    <link rel=stylesheet href=toggle-button.css>\n</head>\n<body>\n</body>\n</html>'}),montageDefine("eca8d22","ui/code-mirror.reel/code-mirror.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href="codemirror/codemirror.css">\n</head>\n<body>\n</body>\n</html>'}),montageDefine("5870cb7","ui/button.reel/button.html",{text:"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n</body>\n</html>"}),montageDefine("eca8d22","ui/content-view.reel/content-view",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ContentView=n.specialize({})}});
bundleLoaded("index.html.bundle-1-0.js")